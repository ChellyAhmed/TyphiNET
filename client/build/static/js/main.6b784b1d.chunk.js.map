{"version":3,"sources":["registerServiceWorker.js","reportWebVitals.js","assets/img/logo-typhinet-prod.png","components/Elements/Header/HeaderMUI.js","stores/hooks.ts","components/Elements/Header/Header.js","components/Layout/MainLayoutUI.js","components/Layout/MainLayout.js","components/Elements/Map/MapMUI.js","util/colorHelper.js","components/Elements/Map/mapColorHelper.js","components/Elements/Map/BottomLeftControls/BottomLeftControlsMUI.js","stores/slices/mapSlice.ts","components/Elements/Map/BottomLeftControls/BottomLeftControls.js","components/Elements/Map/TopRightControls/TopRightControlsMUI.js","util/genotypes.js","util/mapLegends.js","components/Elements/Map/TopRightControls/TopRightControls.js","stores/slices/dashboardSlice.ts","components/Elements/Map/TopLeftControls/TopLeftControlsMUI.js","components/Elements/Map/TopLeftControls/TopLeftControls.js","components/Elements/Map/BottomRightControls/BottomRightControlsMUI.js","util/imgOnLoadPromise.js","components/Elements/Map/BottomRightControls/BottomRightControls.js","util/drugs.js","stores/slices/graphSlice.ts","components/Elements/Map/TopRightControls2/TopRightControls2MUI.js","components/Elements/Map/TopRightControls2/TopRightControls2.js","components/Elements/Map/Map.js","components/Elements/Footer/FooterMUI.js","components/Elements/Footer/Footer.js","constants.js","components/Elements/Graphs/GraphsMUI.js","components/Elements/Graphs/DeterminantsGraph/DeterminantsGraphMUI.js","components/Elements/Graphs/DeterminantsGraph/DeterminantsGraph.js","components/Elements/Graphs/FrequenciesGraph/FrequenciesGraphMUI.js","components/Elements/Graphs/graphColorHelper.js","components/Elements/Graphs/FrequenciesGraph/FrequenciesGraph.js","components/Elements/Graphs/DrugResistanceGraph/DrugResistanceGraphMUI.js","components/Elements/Graphs/DrugResistanceGraph/DrugResistanceGraph.js","components/Elements/Graphs/DistributionGraph/DistributionGraphMUI.js","components/Elements/Graphs/DistributionGraph/DistributionGraph.js","util/graphCards.js","components/Elements/SelectCountry/SelectCountryMUI.js","components/Elements/SelectCountry/SelectCountry.js","components/Elements/DownloadData/DownloadDataMUI.js","assets/img/eu_flag.jpg","util/reportInfoTexts.js","components/Elements/DownloadData/DownloadData.js","components/Elements/Graphs/Graphs.js","util/drugClassesRules.js","components/Dashboard/filters.js","components/Elements/ResetButton/ResetButtonMUI.js","components/Elements/ResetButton/ResetButton.js","components/About/AboutMUI.js","components/About/About.js","components/Dashboard/Dashboard.js","stores/store.ts","App.js"],"names":["isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","catch","error","reportWebVitals","onPerfEntry","Function","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","useStyles","makeStyles","theme","toolbar","borderRadius","display","flexDirection","gap","justifyContent","minHeight","padding","logoWrapper","width","backgroundColor","position","top","zIndex","boxShadow","logo","height","informationCards","paddingTop","card","alignItems","textAlign","cardContent","actualAndTotalValues","useAppDispatch","useDispatch","useAppSelector","useSelector","id","name","Header","classes","totalGenomes","dashboard","actualGenomes","totalGenotypes","actualGenotypes","_jsxs","Toolbar","className","children","_jsx","src","LogoImg","alt","map","index","Card","elevation","CardContent","Typography","variant","sx","fontWeight","fontSize","_Fragment","concat","mainLayout","overflowY","childrenWrapper","margin","rowGap","loading","bottom","alignSelf","paddingLeft","MainLayout","loadingData","loadingMap","Loader","type","color","mapWrapper","composableMap","tooltipMap","paddingBottom","marginRight","border","topControls","marginTop","country","tooltipInfo","info","getColorForGenotype","genotype","colorForDrugClasses","Azithromycin","Chloramphenicol","Ampicillin","Sulphonamides","Trimethoprim","Tetracyclines","Ceftriaxone","lightGrey","darkGrey","hoverColor","samplesColorScale","domain","redColorScale","percentage","sensitiveColorScale","p","parseFloat","bottomLeftControls","left","mapSlice","createSlice","initialState","coordinates","zoom","mapView","tooltipContent","dataset","mapData","ifCustom","reducers","setLoadingMap","action","payload","setPosition","setMapView","setTooltipContent","setDataset","setMapData","setIfCustom","_mapSlice$actions","actions","BottomLeftControls","dispatch","Zoom","in","some","coordinate","Tooltip","title","placement","IconButton","onClick","FilterCenterFocus","_objectSpread","AddCircle","RemoveCircle","topRightControls","right","label","columnGap","labelTooltipIcon","cursor","selectInput","selectMenu","legendWrapper","maxHeight","legend","legendColorBox","legendText","bp700","genotypes","sort","a","b","localeCompare","mapLegends","value","generalSteps","sensitiveSteps","noSamplesSteps","gradientStyle","ExcludedView","mapViewsWithZeroPercentOption","TopRightControls","matches","useMediaQuery","getStepBoxColor","step","InfoOutlined","Select","onChange","event","target","inputProps","MenuProps","list","MenuItem","length","Box","style","includes","backgroundImage","getSteps","dashboardSlice","canGetData","globalOverviewLabel","italicLabel","fullLabel","actualCountry","timeInitial","timeFinal","actualTimeInitial","actualTimeFinal","years","genotypesForFilter","listPMID","setCanGetData","setGlobalOverviewLabel","setLoadingData","setActualCountry","setTotalGenotypes","setTotalGenomes","setActualGenomes","setActualGenotypes","setTimeInitial","setTimeFinal","setActualTimeInitial","setActualTimeFinal","setYears","setGenotypesForFilter","setListPMID","_dashboardSlice$actio","topLeftControls","datasetWrapper","yearsWrapper","yearWrapper","menuPaper","datasetOptions","TopLeftControls","gutterBottom","ToggleButtonGroup","exclusive","size","_event","newValue","option","ToggleButton","paper","child","props","fullWidth","filter","year","Divider","orientation","flexItem","bottomRightControls","imgOnLoadPromise","obj","Promise","resolve","reject","onload","onerror","BottomRightControls","_handleClick","_useState","useState","_useState2","_slicedToArray","setLoading","_useState3","_useState4","showAlert","setShowAlert","customDropdownMapView","graph","handleCloseAlert","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","wrap","_context2","prev","next","svgAsPngUri","document","getElementById","scale","_x","_callee","uri","canvas","ctx","mapImg","mapImgPromise","legendHeight","actualMapView","genotypesText","legendImg","legendImgPromise","legendWidth","typhinetLogo","typhinetLogoPromise","base64","_context","createElement","getContext","cHeight","fillStyle","fillRect","font","fillText","find","x","join","drawImage","textHeight","t0","abrupt","toDataURL","download","stop","apply","arguments","finish","disabled","CircularProgress","CameraAlt","Snackbar","open","autoHideDuration","onClose","Alert","severity","drugs","drugsForDrugResistanceGraph","_toConsumableArray","defaultDrugsForDrugResistanceGraph","drugClasses","countriesForFilter","genotypesYearData","drugsYearData","genotypesDrugsData","genotypesDrugClassesData","distributionGraphView","drugResistanceGraphView","frequenciesGraphView","frequenciesGraphSelectedGenotypes","determinantsGraphView","determinantsGraphDrugClass","graphSlice","setCountriesForFilter","setGenotypesYearData","setDrugsYearData","setDistributionGraphView","setDrugResistanceGraphView","setFrequenciesGraphView","setFrequenciesGraphSelectedGenotypes","setGenotypesDrugsData","setDeterminantsGraphView","setDeterminantsGraphDrugClass","setGenotypesDrugClassesData","setCustomDropdownMapView","_graphSlice$actions","minWidth","dropdown","checkbox","frequenciesGraph","borderTop","selectsWrapper","selectWrapper","labelWrapper","dataViewSelectInput","dataViewSelectMenu","genotypesSelectInput","genotypesSelectButton","whiteSpace","genotypesMenuPaper","genotypesSelectMenu","graphWrapper","graphLabel","textAnchor","overflowX","flexWrap","marginLeft","legendItemWrapper","paddingRight","colorCircle","chartTooltipLabel","tooltipWrapper","tooltip","tooltipTitle","borderBottom","gridTemplateColumns","tooltipItemWrapper","gridColumn","tooltipItemBox","flex","tooltipItemStats","overflowWrap","noGenotypeSelected","TopRightControls2","setCurrentTooltip","searchValue2","setSearchValue2","organism","getSelectGenotypeLabel","Number","Susceptible","totalCount","toFixed","handleChangeSelectedGenotypes","_ref$event","_ref$all","all","filteredData","toLowerCase","toUpperCase","multiple","displayEmpty","e","endAdornment","Button","renderValue","selected","TextField","autoFocus","placeholder","InputProps","startAdornment","InputAdornment","SearchIcon","preventDefault","onKeyDown","stopPropagation","Checkbox","disableRipple","checked","indexOf","ListItemText","primary","statKey","MDR","XDR","AzithR","CipNS","CipR","Map","handleOnMouseLeave","ComposableMap","projectionConfig","rotate","ZoomableGroup","center","onMoveEnd","handleOnMoveEnd","Sphere","stroke","strokeWidth","Graticule","Geographies","geography","_ref2","geographies","geo","_countryStats$statKey","countryData","item","properties","NAME","countryStats","stats","fillColor","smallerThan20","showTooltip","count","GENOTYPE","items","percentCounter","genotypes1","genotypes2","forEach","push","sumCount","_step2","_iterator2","_createForOfIteratorHelper","s","n","done","err","f","undefined","parseInt","chroma","colorScale","hex","redColorScale2","Geography","fill","handleOnClick","onMouseLeave","onMouseEnter","_ref$smallerThan","_ref$showTooltip","content","Object","assign","Samples","Genotypes","H58","slice","_step","_iterator","handleOnMouseEnter","default","outline","hover","pressed","rsmKey","ReactTooltip","keys","key","footer","button","textTransform","text","Footer","startIcon","Email","GitHub","Twitter","href","rel","API_ENDPOINT","graphsCard","overflow","cardActions","titleWrapper","downloadWrapper","determinantsGraph","maxWidth","selectLabel","select","dataViewOptions","DeterminantsGraph","plotChart","setPlotChart","matches500","getData","_genotypesDrugClasses","exclusions","genotypeDrugClassesDataPercentage","structuredClone","useEffect","_genotypesDrugClasses2","_colorForDrugClasses$","ResponsiveContainer","BarChart","data","maxBarSize","CartesianGrid","strokeDasharray","XAxis","dataKey","interval","tick","YAxis","allowDataOverflow","allowDecimals","Label","angle","Brush","Legend","entry","ChartTooltip","y","wrapperStyle","active","tooltipData","getTooltipData","lineHeight","noWrap","Bar","stackId","getColorForDrug","drug","FrequenciesGraph","genotypeDataPercentage","drugResistanceGraph","selectButton","DrugResistanceGraph","drugDataPercentage","handleChangeDrugsView","newValues","lines","getElementsByClassName","_loop","hasValue","LineChart","tickCount","Line","connectNulls","activeDot","distributionGraph","DistributionGraph","graphCards","description","SelectCountry","downloadDataWrapper","getSalmonellaTexts","date","columnsToRemove","DownloadData","_handleClickDownloadDatabase","_handleClickDownloadPDF","loadingCSV","setLoadingCSV","loadingPDF","setLoadingPDF","_useState5","_useState6","listPIMD","formatDate","moment","format","drawFooter","pageHeight","pageWidth","setFontSize","line","align","drawLegend","_ref2$id","legendData","factor","rectY","_ref2$isGenotype","isGenotype","_ref2$isDrug","isDrug","xSpace","i","yFactor","xFactor","Math","floor","setFillColor","circle","setFont","replaceAll","LoadingButton","axios","get","res","indexes","csv","split","currentIndex","reverse","newLines","j","aux","newCSV","finally","TableChart","loadingPosition","_callee3","_ref3","doc","texts","euFlag","mapY","mapLegend","drugClassesBars","drugClassesFactor","genotypesFactor","graphImg","graphImgPromise","_context3","jsPDF","unit","internal","pageSize","getWidth","getHeight","Date","Image","addImage","EUFlagImg","addPage","img","ceil","domtoimage","toPng","bgcolor","sent","rect","save","t1","PictureAsPdf","Graphs","_handleClickDownload","RFWG","DRT","RDWG","GD","chartLoadings","setChartLoadings","context","mobileFactor","yPosition","_ref$isGenotype","_ref$isDrug","beginPath","arc","PI","closePath","handleLoading","_defineProperty","CardActions","disableSpacing","_x2","heightFactor","logoPromise","quality","handleClickDownload","component","d","drugRules","columnID","values","drugRulesForDrugResistanceGraph","drugClassesRules","susceptible","rules","filterData","newData","TRAVEL","DATE","checkTime","Set","genomesCount","genotypesCount","getCountryDisplayName","COUNTRY_ONLY","PMID","getMapStatsData","columnKey","statsKey","columnData","getMapData","countries","getYearsData","_ref4","drugsData","genotypesData","yearData","response","toString","reduce","accumulator","currentValue","drugStats","rule","drugData","getGenotypesData","_ref5","genotypeData","resistantCount","drugClassResponse","drugClass","classRule","classRuleName","every","r","resetButton","ResetButton","Fab","RestartAlt","paragraph","About","euFlagImg","DashboardPage","_getData","setData","yearsForFilter","getInfoFromData","responseData","yearsData","filters","store","configureStore","reducer","deashboardReducer","mapReducer","graphReducer","middleware","getDefaultMiddleware","serializableCheck","createTheme","palette","main","typography","fontFamily","ReactDOM","render","React","StrictMode","HashRouter","Provider","ThemeProvider","Routes","Route","path","element","URL","process","origin","addEventListener","fetch","status","headers","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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mB,EAAST,GAAWoB,wBAAC,CAAC,EAAIhI,GAAQ,IAAEiG,YAAa,CAAC,EAAG,GAAIC,KAAMlG,EAASkG,KAAO,MAEnF,EAoB2DrE,SACjDC,cAACoG,IAAY,CAACvF,SAAS,kBAMnC,E,wCCrDMzD,GAAYC,aAAW,SAACC,GAAK,MAAM,CACvC+I,iBAAkB,CAChB5I,QAAS,OACTC,cAAe,SACfQ,SAAU,WACVC,IAAK,EACLmI,MAAO,EAEP,UAAW,CACTpI,SAAU,aAGdQ,KAAM,CAAElB,aAAc,kBACtBqB,YAAa,CACXpB,QAAS,OACTC,cAAe,SACf0D,OAAQ,OAEVmF,MAAO,CACL9I,QAAS,OACTC,cAAe,MACfiB,WAAY,SACZ6H,UAAW,OAEbC,iBAAkB,CAChBC,OAAQ,WAEVC,YAAa,CACX9F,SAAU,kBACVD,WAAY,iBACZhC,UAAW,SAEbgI,WAAY,CACV,sBAAuB,CACrB/F,SAAU,SAGdgG,cAAe,CACbvE,UAAW,MACXwE,UAAW,QACX7F,UAAW,QAEb8F,OAAQ,CACNtJ,QAAS,OACTkB,WAAY,UAEdqI,eAAgB,CACdhJ,MAAO,OACPO,OAAQ,OACR4D,YAAa,OAEf8E,WAAY,CACVpG,SAAU,QAEZqG,MAAO,CAAC,EACT,ICxDYC,GAAY,CACvB,IACA,QACA,QACA,QACA,MACA,QACA,QACA,QACA,MACA,QACA,QACA,QACA,QACA,MACA,QACA,IACA,QACA,QACA,MACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,UACA,UACA,MACA,QACA,QACA,QACA,QACA,MACA,QACA,QACA,QACA,QACA,QACA,MACA,QACA,MACA,QACA,QACA,IACA,QACA,QACA,MACA,QACA,QACA,MACA,QACA,QACA,MACA,QACA,QACA,YACA,YACA,MACA,MACA,QACA,QACA,QACA,QACA,UACA,UACA,UACA,IACA,MACA,QACA,MACA,QACA,QACA,QACqB,QACrB,UACA,aACA,cACA,UACA,cACA,cACA,YACA,cACA,UACA,eACAC,MAAK,SAACC,EAAGC,GAAC,OAAKD,EAAEE,cAAcD,EAAE,ICxFtBE,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","file":"static/js/main.6b784b1d.chunk.js","sourcesContent":["// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (!isLocalhost) {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      } else {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log(\"New content is available; please refresh.\");\r\n            } else {\r\n              // At this point, everything has been pre-cached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get(\"content-type\").indexOf(\"javascript\") === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","// capture the user experience of a web page\r\n\r\nconst reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","export default __webpack_public_path__ + \"static/media/logo-typhinet-prod.f503745b.png\";","import { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  toolbar: {\r\n    borderRadius: '16px',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    gap: '16px',\r\n    justifyContent: 'space-between',\r\n    minHeight: 'unset !important',\r\n    padding: '0px !important',\r\n\r\n    '@media (max-width: 700px)': {\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  logoWrapper: {\r\n    width: '30%',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n\r\n    '@media (max-width: 700px)': {\r\n      width: '-webkit-fill-available',\r\n      backgroundColor: '#fff',\r\n      position: 'fixed',\r\n      top: 0,\r\n      zIndex: 1,\r\n      boxShadow: '3px 0 10px 0 rgba(0,0,0,.25)'\r\n    }\r\n  },\r\n  logo: {\r\n    height: '90px',\r\n\r\n    '@media (max-width: 700px)': {\r\n      height: '60px'\r\n    }\r\n  },\r\n  informationCards: {\r\n    width: '70%',\r\n    display: 'flex',\r\n    gap: '16px',\r\n\r\n    '@media (max-width: 700px)': {\r\n      width: '100%',\r\n      paddingTop: '60px'\r\n    }\r\n  },\r\n  card: {\r\n    width: '100%',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    textAlign: 'center',\r\n    borderRadius: '16px !important'\r\n  },\r\n  cardContent: {\r\n    padding: '12px 10px !important'\r\n  },\r\n  actualAndTotalValues: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'flex-end'\r\n  }\r\n}));\r\n\r\nexport { useStyles };\r\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux'\r\nimport type { RootState, AppDispatch } from './store'\r\n\r\nexport const useAppDispatch: () => AppDispatch = useDispatch\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector","import { Card, CardContent, Toolbar, Typography } from '@mui/material';\r\nimport { useStyles } from './HeaderMUI';\r\nimport LogoImg from '../../../assets/img/logo-typhinet-prod.png';\r\nimport { useAppSelector } from '../../../stores/hooks';\r\n\r\nconst informationCards = [\r\n  {\r\n    id: 'genomes',\r\n    name: 'Total Genomes'\r\n  },\r\n  {\r\n    id: 'genotypes',\r\n    name: 'Total Genotypes'\r\n  }\r\n];\r\n\r\nexport const Header = () => {\r\n  const classes = useStyles();\r\n\r\n  const totalGenomes = useAppSelector((state) => state.dashboard.totalGenomes);\r\n  const actualGenomes = useAppSelector((state) => state.dashboard.actualGenomes);\r\n  const totalGenotypes = useAppSelector((state) => state.dashboard.totalGenotypes);\r\n  const actualGenotypes = useAppSelector((state) => state.dashboard.actualGenotypes);\r\n\r\n  return (\r\n    <Toolbar className={classes.toolbar}>\r\n      <div className={classes.logoWrapper}>\r\n        <img src={LogoImg} alt=\"TyphiNET\" className={classes.logo} />\r\n      </div>\r\n\r\n      <div className={classes.informationCards}>\r\n        {informationCards.map((card, index) => {\r\n          return (\r\n            <Card key={`information-card-${index}`} elevation={2} className={classes.card}>\r\n              <CardContent className={classes.cardContent}>\r\n                <Typography variant=\"body1\">{card.name}</Typography>\r\n                <Typography variant=\"h4\" sx={{ fontWeight: '500', fontSize: '32px' }}>\r\n                  {card.id === 'genomes' ? (\r\n                    totalGenomes === actualGenomes ? (\r\n                      <>{totalGenomes}</>\r\n                    ) : (\r\n                      <span className={classes.actualAndTotalValues}>\r\n                        {actualGenomes}\r\n                        <Typography variant=\"body1\" sx={{ fontWeight: '500' }}>\r\n                          /{totalGenomes}\r\n                        </Typography>\r\n                      </span>\r\n                    )\r\n                  ) : totalGenotypes === actualGenotypes ? (\r\n                    <>{totalGenotypes}</>\r\n                  ) : (\r\n                    <span className={classes.actualAndTotalValues}>\r\n                      {actualGenotypes}\r\n                      <Typography variant=\"body1\" sx={{ fontWeight: '500' }}>\r\n                        /{totalGenotypes}\r\n                      </Typography>\r\n                    </span>\r\n                  )}\r\n                </Typography>\r\n              </CardContent>\r\n            </Card>\r\n          );\r\n        })}\r\n      </div>\r\n    </Toolbar>\r\n  );\r\n};\r\n","import { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  mainLayout: {\r\n    width: '100%',\r\n    backgroundColor: '#E5E5E5',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    overflowY: 'auto',\r\n\r\n    '& .MuiAppBar-root': {\r\n      boxShadow: '0px 2px 1px -1px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0,0,0,0.12)'\r\n    }\r\n  },\r\n  childrenWrapper: {\r\n    width: '100%'\r\n  },\r\n  children: {\r\n    padding: '16px',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    margin: 'auto',\r\n    rowGap: '16px',\r\n    backgroundColor: '#E5E5E5',\r\n\r\n    '@media (max-width: 500px)': {\r\n      padding: '8px',\r\n      rowGap: '8px'\r\n    }\r\n  },\r\n  loading: {\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    height: '100%',\r\n    width: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: '#fff',\r\n    zIndex: 9999\r\n  },\r\n  logo: {\r\n    height: '100px',\r\n    alignSelf: 'center',\r\n    paddingLeft: '20px'\r\n  }\r\n}));\r\n\r\nexport { useStyles };\r\n","import Loader from 'react-loader-spinner';\r\nimport LogoImg from '../../assets/img/logo-typhinet-prod.png';\r\nimport { Header } from '../Elements/Header';\r\nimport { useStyles } from './MainLayoutUI';\r\nimport { useAppSelector } from '../../stores/hooks';\r\n\r\nexport const MainLayout = ({ children }) => {\r\n  const classes = useStyles();\r\n\r\n  const loadingData = useAppSelector((state) => state.dashboard.loadingData);\r\n  const loadingMap = useAppSelector((state) => state.map.loadingMap);\r\n\r\n  return (\r\n    <>\r\n      <div className={classes.mainLayout} id=\"main-layout\">\r\n        <div className={classes.childrenWrapper}>\r\n          <div className={classes.children}>\r\n            <Header />\r\n            {children}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {(loadingData || loadingMap) && (\r\n        <div className={classes.loading}>\r\n          <img className={classes.logo} src={LogoImg} alt=\"TyphiNET\" />\r\n          <Loader type=\"Circles\" color=\"#D91E45\" height={70} width={70} />\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mapWrapper: { position: 'relative' },\r\n  card: {\r\n    '&.MuiCard-root': {\r\n      borderRadius: '16px'\r\n    }\r\n  },\r\n  cardContent: {\r\n    textAlign: 'center',\r\n    position: 'relative'\r\n  },\r\n  composableMap: {\r\n    height: '500px',\r\n    width: '100%',\r\n\r\n    '@media (max-width: 500px)': {\r\n      height: '300px'\r\n    }\r\n  },\r\n  tooltipMap: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    paddingBottom: '4px',\r\n    alignItems: 'flex-start',\r\n\r\n    '& $country': {\r\n      fontWeight: 500,\r\n      fontSize: '18px'\r\n    },\r\n\r\n    '& $tooltipInfo': {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'flex-start',\r\n\r\n      '& $info': {\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        alignItems: 'center',\r\n\r\n        '& $color': {\r\n          width: '10px',\r\n          height: '10px',\r\n          marginRight: '4px',\r\n          border: '1px solid #f5f4f6'\r\n        }\r\n      }\r\n    }\r\n  },\r\n  topControls: {\r\n    marginTop: '16px',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    rowGap: '16px'\r\n  },\r\n  country: {},\r\n  tooltipInfo: {},\r\n  info: {},\r\n  color: {}\r\n}));\r\n\r\nexport { useStyles };\r\n","// Helper for colors\r\n\r\n// Color for Salmonella genotypes\r\nexport const getColorForGenotype = (genotype) => {\r\n  switch (genotype) {\r\n    case '0':\r\n    case '0.0.1':\r\n    case '0.0.2':\r\n    case '0.0.3':\r\n    case '0.1.0':\r\n    case '0.1':\r\n    case '0.1.1':\r\n    case '0.1.2':\r\n    case '0.1.3':\r\n      return '#808080';\r\n    case '1.1':\r\n    case '1.1.1':\r\n    case '1.1.2':\r\n    case '1.1.3':\r\n    case '1.1.4':\r\n      return '#ffff00';\r\n    case '1.2':\r\n    case '1.2.1':\r\n      return '#ffd700';\r\n    case '2':\r\n    case '2.0.0':\r\n    case '2.0.1':\r\n    case '2.0.2':\r\n      return '#32cd32';\r\n    case '2.1.0':\r\n    case '2.1':\r\n    case '2.1.1':\r\n    case '2.1.2':\r\n    case '2.1.3':\r\n    case '2.1.4':\r\n    case '2.1.5':\r\n    case '2.1.6':\r\n    case '2.1.7':\r\n    case '2.1.8':\r\n    case '2.1.9':\r\n    case '2.1.7.1':\r\n    case '2.1.7.2':\r\n      return '#adff2f';\r\n    case '2.2':\r\n    case '2.2.0':\r\n    case '2.2.1':\r\n    case '2.2.2':\r\n    case '2.2.3':\r\n    case '2.2.4':\r\n      return '#98fb98';\r\n    case '2.3':\r\n    case '2.3.1':\r\n    case '2.3.2':\r\n    case '2.3.3':\r\n    case '2.3.4':\r\n    case '2.3.5':\r\n      return '#6b8e23';\r\n    case '2.4.0':\r\n    case '2.4':\r\n    case '2.4.1':\r\n      return '#2e8b57';\r\n    case '2.5.0':\r\n    case '2.5':\r\n    case '2.5.1':\r\n    case '2.5.2':\r\n      return '#006400';\r\n    case '3.0.0':\r\n    case '3':\r\n    case '3.0.1':\r\n    case '3.0.2':\r\n      return '#0000cd';\r\n    case '3.1.0':\r\n    case '3.1':\r\n    case '3.1.1':\r\n    case '3.1.2':\r\n      return '#4682b4';\r\n    case '3.2.1':\r\n    case '3.2':\r\n    case '3.2.2':\r\n      return '#00bfff';\r\n    case '3.3.0':\r\n    case '3.3':\r\n    case '3.3.1':\r\n    case '3.3.2':\r\n    case '3.3.2.Bd1':\r\n    case '3.3.2.Bd2':\r\n      return '#1e90ff';\r\n    case '3.4':\r\n      return '#6a5acd';\r\n    case '3.5':\r\n    case '3.5.1':\r\n    case '3.5.2':\r\n    case '3.5.3':\r\n    case '3.5.4':\r\n    case '3.5.4.1':\r\n    case '3.5.4.2':\r\n    case '3.5.4.3':\r\n      return '#4b0082';\r\n    case '4':\r\n    case '4.1.0':\r\n    case '4.1':\r\n    case '4.1.1':\r\n      return '#8b0000';\r\n    case '4.2':\r\n    case '4.2.1':\r\n    case '4.2.2':\r\n    case '4.2.3':\r\n      return '#ff6347';\r\n    // case '4.3':\r\n    // case '4.3.0':\r\n    case '4.3.1':\r\n      return '#ff0000';\r\n    case '4.3.1.1':\r\n    case '4.3.1.1.EA1':\r\n      return '#f1b6da';\r\n    case '4.3.1.1.P1':\r\n      return 'black';\r\n    case '4.3.1.2':\r\n    case '4.3.1.2.EA2':\r\n    case '4.3.1.2.EA3':\r\n    case '4.3.1.2.1':\r\n    case '4.3.1.2.1.1':\r\n      return '#c51b7d';\r\n    case '4.3.1.3':\r\n    case '4.3.1.3.Bdq':\r\n      return '#fb8072';\r\n    default:\r\n      return '#F5F4F6';\r\n  }\r\n};\r\n\r\n// Colors for Salmonella drug classes genes\r\nexport const colorForDrugClasses = {\r\n  Azithromycin: [\r\n    { name: 'acrB_R717L', color: '#FBCFE5' },\r\n    { name: 'acrB_R717Q', color: '#addd8e' },\r\n    { name: 'acrB_R717Q + acrB_R717L', color: '#fd8d3c' },\r\n    { name: 'None', color: '#B9B9B9' }\r\n  ],\r\n  // 'Fluoroquinolones (CipNS)': [\r\n  'Ciprofloxacin NS': [\r\n    { name: '0_QRDR + qnrB (CipNS)', color: '#0066cc' },\r\n    { name: '0_QRDR + qnrS (CipNS)', color: '#009999' },\r\n    { name: '1_QRDR (CipNS)', color: '#ffcc00' },\r\n    { name: '1_QRDR + qnrB (CipNS)', color: '#993399' },\r\n    { name: '1_QRDR + qnrS (CipNS)', color: '#660066' },\r\n    { name: '2_QRDR (CipR)', color: '#ff6600' },\r\n    { name: '2_QRDR + qnrB (CipR)', color: '#ffcccc' },\r\n    { name: '2_QRDR + qnrS (CipR)', color: '#ff6666' },\r\n    { name: '3_QRDR (CipR)', color: '#cc0000' },\r\n    { name: '3_QRDR + qnrB (CipR)', color: '#660000' },\r\n    { name: '3_QRDR + qnrS (CipR)', color: 'black' },\r\n    { name: 'None (CipS)', color: '#B9B9B9' }\r\n  ],\r\n  Chloramphenicol: [\r\n    { name: 'catA1', color: '#9e9ac8' },\r\n    { name: 'catA1 + cmlA', color: '#FFEC78' },\r\n    { name: 'cmlA', color: '#addd8e' },\r\n    { name: 'None', color: '#B9B9B9' }\r\n  ],\r\n  Ampicillin: [\r\n    { name: 'blaTEM-1D', color: '#addd8e' },\r\n    { name: 'None', color: '#B9B9B9' }\r\n  ],\r\n  Sulphonamides: [\r\n    { name: 'None', color: '#B9B9B9' },\r\n    { name: 'sul1', color: '#fd8d3c' },\r\n    { name: 'sul1 + sul2', color: '#B4DD70' },\r\n    { name: 'sul2', color: '#ffeda0' }\r\n  ],\r\n  Trimethoprim: [\r\n    { name: 'dfrA1', color: '#B4DD70' },\r\n    { name: 'dfrA5', color: '#D7AEF7' },\r\n    { name: 'dfrA7', color: '#FFEC78' },\r\n    { name: 'dfrA7 + dfrA14', color: '#fd8d3c' },\r\n    { name: 'dfrA14', color: '#6baed6' },\r\n    { name: 'dfrA15', color: '#FBCFE5' },\r\n    { name: 'dfrA17', color: '#FCB469' },\r\n    { name: 'dfrA18', color: '#66c2a4' },\r\n    { name: 'None', color: '#B9B9B9' }\r\n  ],\r\n  Tetracyclines: [\r\n    { name: 'tetA(A)', color: 'rgb(174,227,154)' },\r\n    { name: 'tetA(B)', color: '#D7AEF7' },\r\n    { name: 'tetA(C)', color: '#FFEC78' },\r\n    { name: 'tetA(D)', color: '#FCB469' },\r\n    { name: 'None', color: '#B9B9B9' }\r\n  ],\r\n  // ESBL: [\r\n  //   { name: 'blaCTX-M-15', color: '#6baed6' },\r\n  //   { name: 'blaCTX-M-55', color: '#FBCFE5' },\r\n  //   { name: 'blaOXA-7', color: '#9e9ac8' },\r\n  //   { name: 'blaSHV-12', color: '#addd8e' },\r\n  //   { name: 'None', color: '#B9B9B9' }\r\n  // ],\r\n  Ceftriaxone: [\r\n    { name: 'blaCTX-M-15', color: '#6baed6' },\r\n    { name: 'blaCTX-M-55', color: '#FBCFE5' },\r\n    { name: 'blaOXA-7', color: '#9e9ac8' },\r\n    { name: 'blaSHV-12', color: '#addd8e' },\r\n    { name: 'None', color: '#B9B9B9' }\r\n  ],\r\n  // 'Co-trimoxazole': [\r\n  'Trimethoprim-sulfamethoxazole': [\r\n    { name: 'dfrA1 + sul1', color: '#ffeda0' },\r\n    { name: 'dfrA1 + sul2', color: '#a50f15' },\r\n    { name: 'dfrA1 + sul1 + sul2', color: '#fcc5c0' },\r\n    { name: 'dfrA5 + sul1', color: '#fd8d3c' },\r\n    { name: 'dfrA5 + sul2', color: '#6a5acd' },\r\n    { name: 'dfrA5 + sul1 + sul2', color: '#bcbddc' },\r\n    { name: 'dfrA7 + sul1', color: '#addd8e' },\r\n    { name: 'dfrA7 + sul2', color: '#f1b6da' },\r\n    { name: 'dfrA7 + sul1 + sul2', color: '#fdd0a2' },\r\n    { name: 'dfrA7 + dfrA14 + sul1 + sul2', color: '#F54CEB' },\r\n    { name: 'dfrA14 + sul1', color: '#9e9ac8' },\r\n    { name: 'dfrA14 + sul2', color: '#fb8072' },\r\n    { name: 'dfrA14 + sul1 + sul2', color: '#c994c7' },\r\n    { name: 'dfrA15 + sul1', color: '#4682b4' },\r\n    { name: 'dfrA15 + sul2', color: '#6baed6' },\r\n    { name: 'dfrA15 + sul1 + sul2', color: '#9ecae1' },\r\n    { name: 'dfrA17 + sul1', color: '#7a0177' },\r\n    { name: 'dfrA17 + sul2', color: '#2e8b57' },\r\n    { name: 'dfrA17 + sul1 + sul2', color: '#a8ddb5' },\r\n    { name: 'dfrA18 + sul1', color: '#54278f' },\r\n    { name: 'dfrA18 + sul2', color: '#98fb98' },\r\n    { name: 'dfrA18 + sul1 + sul2', color: '#fc9272' },\r\n    { name: 'None', color: '#B9B9B9' }\r\n  ]\r\n};\r\n\r\n// Color variables\r\nexport const lightGrey = '#D3D3D3';\r\nexport const darkGrey = '#727272';\r\nexport const zeroPercentColor = '#A20F17';\r\nexport const zeroCountColor = '#F5F4F6';\r\nexport const hoverColor = '#D2F1F6';\r\n","// Helper for map color\r\nimport chroma from 'chroma-js';\r\n\r\nexport const samplesColorScale = (domain) => {\r\n  if (domain >= 1 && domain <= 9) {\r\n    return '#4575B4';\r\n  } else if (domain >= 10 && domain <= 19) {\r\n    return '#91BFDB';\r\n  } else if (domain >= 20 && domain <= 99) {\r\n    return '#ADDD8E';\r\n  } else if (domain >= 100 && domain <= 299) {\r\n    return '#FEE090';\r\n  } else if (domain >= 300) {\r\n    return '#FC8D59';\r\n  }\r\n};\r\n\r\nexport const redColorScale = (percentage) => {\r\n  const p = percentage;\r\n  if(p > 50){\r\n    return '#A20F17';\r\n  }else if (p > 10 && p <= 50) {\r\n    return '#DD2C24';\r\n  } else if (p > 2 && p <= 10) {\r\n    return '#FA694A';\r\n  } else {\r\n    return '#FAAD8F';\r\n  } \r\n};\r\n\r\nexport const redColorScale2 = (percentage) => {\r\n  const p = parseInt(percentage);\r\n  \r\n  // Define the color scale using chroma.scale\r\n  const colorScale = chroma.scale(['#FAAD8F', '#FA694A', '#DD2C24', '#A20F17']);\r\n  \r\n  // Map the percentage to the color scale range (0 to 1)\r\n  const normalizedPercentage = p / 100;\r\n\r\n  // Use the color scale to interpolate the color based on the percentage\r\n  const color = colorScale(normalizedPercentage).hex();\r\n\r\n  return color;\r\n};\r\n\r\nexport const sensitiveColorScale = (percentage) => {\r\n  const p = parseFloat(percentage);\r\n  if (p > 90) {\r\n    return '#727272';\r\n  } else if (p > 50) {\r\n    return '#FAAD8F';\r\n  } else if (p > 20) {\r\n    return '#FA694A';\r\n  } else if (p > 10) {\r\n    return '#DD2C24';\r\n  }\r\n  return '#A20F17';\r\n};\r\n","import { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  bottomLeftControls: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    left: 0\r\n  }\r\n}));\r\n\r\nexport { useStyles };\r\n","import { PayloadAction, createSlice } from '@reduxjs/toolkit';\r\n\r\ninterface PositionModel {\r\n  coordinates: Array<number>;\r\n  zoom: number;\r\n}\r\n\r\ninterface ItemModel {\r\n  name: string;\r\n  count: number;\r\n  percentage: number;\r\n}\r\n\r\ninterface ItemsModel {\r\n  items: Array<ItemModel>;\r\n  count: number;\r\n  percentage?: number;\r\n}\r\n\r\ninterface StatsModel {\r\n  GENOTYPE: ItemsModel;\r\n  H58: ItemsModel;\r\n  MDR: ItemsModel;\r\n  XDR: ItemsModel;\r\n  AzithR: ItemsModel;\r\n  Susceptible: ItemsModel;\r\n  CipR: ItemsModel;\r\n  CipNS: ItemsModel;\r\n}\r\n\r\ninterface MapDataModel {\r\n  name: string;\r\n  displayName: string;\r\n  count: number;\r\n  stats: StatsModel;\r\n}\r\n\r\ninterface MapState {\r\n  loadingMap: boolean;\r\n  position: PositionModel;\r\n  mapView: string;\r\n  tooltipContent: Object | null;\r\n  dataset: string;\r\n  mapData: Array<MapDataModel>;\r\n  ifCustom : boolean;\r\n\r\n}\r\n\r\nconst initialState: MapState = {\r\n  loadingMap: false,\r\n  position: {\r\n    coordinates: [0, 0],\r\n    zoom: 1\r\n  },\r\n  mapView: 'CipNS',\r\n  tooltipContent: null,\r\n  dataset: 'All',\r\n  mapData: [],\r\n  ifCustom : false,\r\n\r\n};\r\n\r\nexport const mapSlice = createSlice({\r\n  name: 'map',\r\n  initialState,\r\n  reducers: {\r\n    setLoadingMap: (state, action: PayloadAction<boolean>) => {\r\n      state.loadingMap = action.payload;\r\n    },\r\n    setPosition: (state, action: PayloadAction<PositionModel>) => {\r\n      state.position = action.payload;\r\n    },\r\n    setMapView: (state, action: PayloadAction<string>) => {\r\n      state.mapView = action.payload;\r\n    },\r\n    setTooltipContent: (state, action: PayloadAction<Object | null>) => {\r\n      state.tooltipContent = action.payload;\r\n    },\r\n    setDataset: (state, action: PayloadAction<string>) => {\r\n      state.dataset = action.payload;\r\n    },\r\n    setMapData: (state, action: PayloadAction<Array<any>>) => {\r\n      state.mapData = action.payload;\r\n    },\r\n    setIfCustom: (state, action: PayloadAction<boolean>) => {\r\n      state.ifCustom = action.payload;\r\n    },\r\n  }\r\n});\r\n\r\nexport const { setPosition, setMapView, setTooltipContent, setDataset, setLoadingMap, setMapData,  setIfCustom } = mapSlice.actions;\r\n\r\nexport default mapSlice.reducer;\r\n","import { AddCircle, FilterCenterFocus, RemoveCircle } from '@mui/icons-material';\r\nimport { IconButton, Tooltip, Zoom } from '@mui/material';\r\nimport { useStyles } from './BottomLeftControlsMUI';\r\nimport { useAppDispatch, useAppSelector } from '../../../../stores/hooks';\r\nimport { setPosition } from '../../../../stores/slices/mapSlice';\r\n\r\nexport const BottomLeftControls = () => {\r\n  const classes = useStyles();\r\n  const dispatch = useAppDispatch();\r\n  const position = useAppSelector((state) => state.map.position);\r\n\r\n  function handleRecenter() {\r\n    dispatch(setPosition({ coordinates: [0, 0], zoom: 1 }));\r\n  }\r\n\r\n  function handleZoomIn() {\r\n    if (position.zoom >= 4) return;\r\n\r\n    dispatch(setPosition({ ...position, zoom: position.zoom * 2 }));\r\n  }\r\n\r\n  function handleZoomOut() {\r\n    if (position.zoom <= 1) return;\r\n    if (position.zoom / 2 === 1) {\r\n      dispatch(setPosition({ coordinates: [0, 0], zoom: 1 }));\r\n    } else {\r\n      dispatch(setPosition({ ...position, coordinates: [0, 0], zoom: position.zoom / 2 }));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={classes.bottomLeftControls}>\r\n      <Zoom in={position.zoom !== 1 || position.coordinates.some((coordinate) => coordinate !== 0)}>\r\n        <Tooltip title=\"Recenter\" placement=\"right\">\r\n          <IconButton onClick={handleRecenter}>\r\n            <FilterCenterFocus fontSize=\"large\" color=\"primary\" />\r\n          </IconButton>\r\n        </Tooltip>\r\n      </Zoom>\r\n      <Tooltip title=\"Zoom In\" placement=\"right\">\r\n        <span>\r\n          <IconButton color=\"primary\" onClick={handleZoomIn}>\r\n            <AddCircle fontSize=\"large\" />\r\n          </IconButton>\r\n        </span>\r\n      </Tooltip>\r\n      <Tooltip title=\"Zoom Out\" placement=\"right\">\r\n        <span>\r\n          <IconButton color=\"primary\" onClick={handleZoomOut}>\r\n            <RemoveCircle fontSize=\"large\" />\r\n          </IconButton>\r\n        </span>\r\n      </Tooltip>\r\n    </div>\r\n  );\r\n};\r\n","import { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  topRightControls: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    position: 'absolute',\r\n    top: 0,\r\n    right: 0,\r\n\r\n    '&$bp700': {\r\n      position: 'relative'\r\n    }\r\n  },\r\n  card: { borderRadius: '6px !important' },\r\n  cardContent: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    rowGap: '4px'\r\n  },\r\n  label: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    columnGap: '8px'\r\n  },\r\n  labelTooltipIcon: {\r\n    cursor: 'pointer'\r\n  },\r\n  selectInput: {\r\n    fontSize: '14px !important',\r\n    fontWeight: '600 !important',\r\n    textAlign: 'start'\r\n  },\r\n  selectMenu: {\r\n    '& .MuiMenuItem-root': {\r\n      fontSize: '14px'\r\n    }\r\n  },\r\n  legendWrapper: {\r\n    marginTop: '8px',\r\n    maxHeight: '250px',\r\n    overflowY: 'auto'\r\n  },\r\n  legend: {\r\n    display: 'flex',\r\n    alignItems: 'center'\r\n  },\r\n  legendColorBox: {\r\n    width: '10px',\r\n    height: '10px',\r\n    marginRight: '4px'\r\n  },\r\n  legendText: {\r\n    fontSize: '10px'\r\n  },\r\n  bp700: {}\r\n}));\r\n\r\nexport { useStyles };\r\n","// List of Salmonella genotypes\r\nexport const genotypes = [\r\n  '0',\r\n  '0.0.1',\r\n  '0.0.2',\r\n  '0.0.3',\r\n  '0.1',\r\n  '0.1.1',\r\n  '0.1.2',\r\n  '0.1.3',\r\n  '1.1',\r\n  '1.1.1',\r\n  '1.1.2',\r\n  '1.1.3',\r\n  '1.1.4',\r\n  '1.2',\r\n  '1.2.1',\r\n  '2',\r\n  '2.0.1',\r\n  '2.0.2',\r\n  '2.1',\r\n  '2.1.1',\r\n  '2.1.2',\r\n  '2.1.3',\r\n  '2.1.4',\r\n  '2.1.5',\r\n  '2.1.6',\r\n  '2.1.7',\r\n  '2.1.8',\r\n  '2.1.9',\r\n  '2.1.7.1',\r\n  '2.1.7.2',\r\n  '2.2',\r\n  '2.2.1',\r\n  '2.2.2',\r\n  '2.2.3',\r\n  '2.2.4',\r\n  '2.3',\r\n  '2.3.1',\r\n  '2.3.2',\r\n  '2.3.3',\r\n  '2.3.4',\r\n  '2.3.5',\r\n  '2.4',\r\n  '2.4.1',\r\n  '2.5',\r\n  '2.5.1',\r\n  '2.5.2',\r\n  '3',\r\n  '3.0.1',\r\n  '3.0.2',\r\n  '3.1',\r\n  '3.1.1',\r\n  '3.1.2',\r\n  '3.2',\r\n  '3.2.1',\r\n  '3.2.2',\r\n  '3.3',\r\n  '3.3.1',\r\n  '3.3.2',\r\n  '3.3.2.Bd1',\r\n  '3.3.2.Bd2',\r\n  '3.4',\r\n  '3.5',\r\n  '3.5.1',\r\n  '3.5.2',\r\n  '3.5.3',\r\n  '3.5.4',\r\n  '3.5.4.1',\r\n  '3.5.4.2',\r\n  '3.5.4.3',\r\n  '4',\r\n  '4.1',\r\n  '4.1.1',\r\n  '4.2',\r\n  '4.2.1',\r\n  '4.2.2',\r\n  '4.2.3',\r\n  /*'4.3', '4.3.0', */ '4.3.1',\r\n  '4.3.1.1',\r\n  '4.3.1.1.P1',\r\n  '4.3.1.1.EA1',\r\n  '4.3.1.2',\r\n  '4.3.1.2.EA2',\r\n  '4.3.1.2.EA3',\r\n  '4.3.1.2.1',\r\n  '4.3.1.2.1.1',\r\n  '4.3.1.3',\r\n  '4.3.1.3.Bdq'\r\n].sort((a, b) => a.localeCompare(b));\r\n","// List of legends for the map and in which organisms they appear\r\nexport const mapLegends = [\r\n  { value: 'MDR', label: 'Multidrug resistant (MDR)' },\r\n  { value: 'XDR', label: 'Extensively drug resistant (XDR)' },\r\n  { value: 'AzithR', label: 'Azithromycin resistant' },\r\n  { value: 'CipNS', label: 'Ciprofloxacin non-susceptible (CipNS)' },\r\n  { value: 'CipR', label: 'Ciprofloxacin resistant (CipR)' },\r\n  // { value: 'Sensitive to all drugs', label: 'Sensitive to all drugs' },\r\n  { value: 'Susceptible to all drugs', label: 'Susceptible to all drugs' },\r\n  { value: 'Dominant Genotype', label: 'Dominant Genotype' },\r\n  { value: 'Genotype prevalence', label: 'Genotype prevalence' },\r\n  { value: 'H58 / Non-H58', label: 'H58 genotype' },\r\n  { value: 'No. Samples', label: 'No. Samples' }\r\n];\r\n","import { InfoOutlined } from '@mui/icons-material';\r\nimport { Box, Card, CardContent, MenuItem, Select, Tooltip, Typography, useMediaQuery } from '@mui/material';\r\nimport { useStyles } from './TopRightControlsMUI';\r\nimport { useAppDispatch, useAppSelector } from '../../../../stores/hooks';\r\nimport { setMapView, setIfCustom} from '../../../../stores/slices/mapSlice.ts';\r\nimport { darkGrey, getColorForGenotype, lightGrey } from '../../../../util/colorHelper';\r\nimport { genotypes } from '../../../../util/genotypes';\r\nimport { redColorScale, samplesColorScale, sensitiveColorScale } from '../mapColorHelper';\r\nimport { mapLegends } from '../../../../util/mapLegends';\r\n\r\nconst generalSteps = ['>0 and ≤2%', '>2% and ≤10%', '>10% and ≤50%', '>50%'];\r\nconst sensitiveSteps = ['0 - 10%', '10 - 20%', '20 - 50%', '50 - 90%', '90 - 100%'];\r\nconst noSamplesSteps = ['1 - 9', '10 - 19', '20 - 99', '100 - 299', '>= 300'];\r\nconst gradientStyle = ['0.01% - 25.00% ', '25.01 - 50.00%', '50.01% - 75.00%', '75.01% - 100.00%'];\r\nconst ExcludedView = ['Genotype prevalence'];\r\nconst mapViewsWithZeroPercentOption = ['CipNS', 'CipR', 'AzithR', 'MDR', 'XDR', 'H58 / Non-H58', 'ESBL', 'Carb', 'Genotype prevalence'];\r\n\r\nexport const TopRightControls = () => {\r\n  const classes = useStyles();\r\n  const matches = useMediaQuery('(max-width:700px)');\r\n\r\n  const dispatch = useAppDispatch();\r\n  const mapData = useAppSelector((state) => state.map.mapData);\r\n  const mapView = useAppSelector((state) => state.map.mapView);\r\n\r\n  function handleChangeMapView(event) {\r\n    if(event.target.value === 'Genotype prevalence')\r\n      dispatch(setIfCustom(true));\r\n    else\r\n      dispatch(setIfCustom(false));\r\n\r\n    dispatch(setMapView(event.target.value));\r\n  }\r\n\r\n  function hasZeroPercentOption() {\r\n    return mapViewsWithZeroPercentOption.includes(mapView);\r\n  }\r\n\r\n  function getSteps() {\r\n    switch (mapView) {\r\n      // case 'Sensitive to all drugs':\r\n      case 'Susceptible to all drugs':\r\n        return sensitiveSteps;\r\n      case 'No. Samples':\r\n        return noSamplesSteps;\r\n      case 'Dominant Genotype':\r\n        return genotypes;\r\n      case 'Genotype prevalence':\r\n        return gradientStyle;\r\n      default:\r\n        return generalSteps;\r\n    }\r\n  }\r\n\r\n  function getStepBoxColor(step, index) {\r\n    switch (mapView) {\r\n      // case 'Sensitive to all drugs':\r\n      case 'Susceptible to all drugs':\r\n        const aux = ['10', '20', '50', '90', '100'];\r\n        return sensitiveColorScale(aux[index]);\r\n      case 'No. Samples': {\r\n        const aux = [1, 10, 20, 100, 300];\r\n        return samplesColorScale(aux[index]);\r\n      }\r\n      case 'Dominant Genotype':\r\n        return getColorForGenotype(step);\r\n      default:\r\n        const aux3 = ['0.01', '2.01', '10.01', '50.01'];\r\n        return redColorScale(aux3[index]);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={`${classes.topRightControls} ${matches ? classes.bp700 : ''}`}>\r\n      <Card elevation={3} className={classes.card}>\r\n        <CardContent className={classes.cardContent}>\r\n          <div className={classes.label}>\r\n            <Typography variant=\"caption\">Select map view</Typography>\r\n            <Tooltip\r\n              title=\"Percentage frequency data is shown only for countries with\r\n          N≥20 genomes\"\r\n              placement=\"top\"\r\n            >\r\n              <InfoOutlined color=\"action\" fontSize=\"small\" className={classes.labelTooltipIcon} />\r\n            </Tooltip>\r\n          </div>\r\n          <Select\r\n            variant=\"standard\"\r\n            value={mapView}\r\n            onChange={handleChangeMapView}\r\n            inputProps={{ className: classes.selectInput }}\r\n            MenuProps={{ classes: { list: classes.selectMenu } }}\r\n          >\r\n            {mapLegends.map((legend, index) => {\r\n              return (\r\n                <MenuItem key={index + 'mapview'} value={legend.value}>\r\n                  {legend.label}\r\n                </MenuItem>\r\n              );\r\n            })}\r\n          </Select>\r\n          {mapData.length > 0 && (\r\n            <div className={classes.legendWrapper}>\r\n              <div className={classes.legend}>\r\n                <Box className={classes.legendColorBox} style={{ backgroundColor: lightGrey }} />\r\n                <span className={classes.legendText}>Insufficient data</span>\r\n              </div>\r\n              {hasZeroPercentOption() && (\r\n                <div className={classes.legend}>\r\n                  <Box className={classes.legendColorBox} style={{ backgroundColor: darkGrey }} />\r\n                  <span className={classes.legendText}>0%</span>\r\n                </div>\r\n              )}\r\n              {ExcludedView.includes(mapView) ?(\r\n                <div key={`step-1`} className={classes.legend}>\r\n                  <Box\r\n                    className={classes.legendColorBox}\r\n                    style={{\r\n                      height: '50px',\r\n                      marginTop:'2px',\r\n                      backgroundImage: \"linear-gradient( #FAAD8F, #FA694A, #DD2C24, #A20F17)\"\r\n                    }}\r\n                  />\r\n                  <span className={classes.legendText}>\r\n                    <div style={{textAlign:'left', height: '50px'}}>\r\n                      <div>1%</div>\r\n                      <br/>\r\n                      <br/>\r\n                      <div>100%</div>\r\n                    </div>\r\n                  </span>\r\n                </div>\r\n              ) : (\r\n                getSteps().map((step, index) => (\r\n                  <div key={`step-${index}`} className={classes.legend}>\r\n                    <Box className={classes.legendColorBox} style={{ backgroundColor: getStepBoxColor(step, index) }} />\r\n                    <span className={classes.legendText}>{step}</span>\r\n                  </div>\r\n                ))\r\n              ) }\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n","import { PayloadAction, createSlice } from '@reduxjs/toolkit';\r\n\r\ninterface GlobalOverviewModel {\r\n  italicLabel: string;\r\n  label: string;\r\n  fullLabel: string\r\n}\r\n\r\ninterface DashboardState {\r\n  canGetData: boolean;\r\n  globalOverviewLabel: GlobalOverviewModel;\r\n  loadingData: boolean;\r\n  actualCountry: string;\r\n  totalGenomes: number;\r\n  totalGenotypes: number;\r\n  actualGenomes: number;\r\n  actualGenotypes: number;\r\n  timeInitial: number;\r\n  timeFinal: number;\r\n  actualTimeInitial: number | string;\r\n  actualTimeFinal: number | string;\r\n  years: Array<number>;\r\n  genotypesForFilter: Array<string>;\r\n  listPMID: Array<string>\r\n}\r\n\r\nconst initialState: DashboardState = {\r\n  canGetData: true,\r\n  globalOverviewLabel: { italicLabel: 'Salmonella', label: 'Typhi', fullLabel: 'Salmonella Typhi' },\r\n  loadingData: false,\r\n  actualCountry: 'All',\r\n  totalGenotypes: 0,\r\n  totalGenomes: 0,\r\n  actualGenomes: 0,\r\n  actualGenotypes: 0,\r\n  timeInitial: 0,\r\n  timeFinal: 0,\r\n  actualTimeInitial: '',\r\n  actualTimeFinal: '',\r\n  years: [],\r\n  genotypesForFilter: [],\r\n  listPMID: []\r\n};\r\n\r\nexport const dashboardSlice = createSlice({\r\n  name: 'dashboard',\r\n  initialState,\r\n  reducers: {\r\n    setCanGetData: (state, action: PayloadAction<boolean>) => {\r\n      state.canGetData = action.payload;\r\n    },\r\n    setGlobalOverviewLabel: (state, action: PayloadAction<GlobalOverviewModel>) => {\r\n      state.globalOverviewLabel = action.payload;\r\n    },\r\n    setLoadingData: (state, action: PayloadAction<boolean>) => {\r\n      state.loadingData = action.payload;\r\n    },\r\n    setActualCountry: (state, action: PayloadAction<string>) => {\r\n      state.actualCountry = action.payload;\r\n    },\r\n    setTotalGenotypes: (state, action: PayloadAction<number>) => {\r\n      state.totalGenotypes = action.payload;\r\n    },\r\n    setTotalGenomes: (state, action: PayloadAction<number>) => {\r\n      state.totalGenomes = action.payload;\r\n    },\r\n    setActualGenomes: (state, action: PayloadAction<number>) => {\r\n      state.actualGenomes = action.payload;\r\n    },\r\n    setActualGenotypes: (state, action: PayloadAction<number>) => {\r\n      state.actualGenotypes = action.payload;\r\n    },\r\n    setTimeInitial: (state, action: PayloadAction<number>) => {\r\n      state.timeInitial = action.payload;\r\n    },\r\n    setTimeFinal: (state, action: PayloadAction<number>) => {\r\n      state.timeFinal = action.payload;\r\n    },\r\n    setActualTimeInitial: (state, action: PayloadAction<number>) => {\r\n      state.actualTimeInitial = action.payload;\r\n    },\r\n    setActualTimeFinal: (state, action: PayloadAction<number>) => {\r\n      state.actualTimeFinal = action.payload;\r\n    },\r\n    setYears: (state, action: PayloadAction<Array<number>>) => {\r\n      const years = action.payload\r\n\r\n      state.years = years;\r\n      state.timeInitial = years[0];\r\n      state.actualTimeInitial = years[0];\r\n      state.timeFinal = years[years.length - 1];\r\n      state.actualTimeFinal = years[years.length - 1];\r\n    },\r\n    setGenotypesForFilter: (state, action: PayloadAction<Array<string>>) => {\r\n      state.genotypesForFilter = action.payload;\r\n    },\r\n    setListPMID: (state, action: PayloadAction<Array<string>>) => {\r\n      state.listPMID = action.payload;\r\n    },\r\n  }\r\n});\r\n\r\nexport const {\r\n  setCanGetData,\r\n  setGlobalOverviewLabel,\r\n  setLoadingData,\r\n  setActualCountry,\r\n  setTotalGenotypes,\r\n  setTotalGenomes,\r\n  setActualGenomes,\r\n  setActualGenotypes,\r\n  setTimeInitial,\r\n  setTimeFinal,\r\n  setActualTimeInitial,\r\n  setActualTimeFinal,\r\n  setYears,\r\n  setGenotypesForFilter,\r\n  setListPMID\r\n} = dashboardSlice.actions;\r\n\r\nexport default dashboardSlice.reducer;\r\n","import { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  topLeftControls: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n\r\n    '&$bp700': {\r\n      position: 'relative',\r\n\r\n      '& $yearWrapper': {\r\n        width: '100%'\r\n      },\r\n      '& $datasetWrapper .MuiToggleButton-root': {\r\n        width: '100%'\r\n      }\r\n    }\r\n  },\r\n  card: { borderRadius: '6px !important' },\r\n  cardContent: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    rowGap: '8px',\r\n    textAlign: 'start'\r\n  },\r\n  datasetWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'column'\r\n  },\r\n  selectInput: {\r\n    fontSize: '14px !important',\r\n    fontWeight: '600 !important',\r\n    textAlign: 'start'\r\n  },\r\n  selectMenu: {\r\n    '& .MuiMenuItem-root': {\r\n      fontSize: '14px'\r\n    }\r\n  },\r\n  yearsWrapper: {\r\n    display: 'flex',\r\n    columnGap: '4px',\r\n    paddingTop: '8px'\r\n  },\r\n  yearWrapper: {\r\n    width: '78px'\r\n  },\r\n  menuPaper: {\r\n    maxHeight: '350px !important'\r\n  },\r\n  bp700: {}\r\n}));\r\n\r\nexport { useStyles };\r\n","import { useStyles } from './TopLeftControlsMUI';\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  Divider,\r\n  MenuItem,\r\n  Select,\r\n  ToggleButton,\r\n  ToggleButtonGroup,\r\n  Typography,\r\n  useMediaQuery\r\n} from '@mui/material';\r\nimport { useAppDispatch, useAppSelector } from '../../../../stores/hooks';\r\nimport { setDataset } from '../../../../stores/slices/mapSlice.ts';\r\nimport { setActualTimeFinal, setActualTimeInitial } from '../../../../stores/slices/dashboardSlice';\r\n\r\nconst datasetOptions = ['All', 'Local', 'Travel'];\r\n\r\nexport const TopLeftControls = () => {\r\n  const classes = useStyles();\r\n  const matches = useMediaQuery('(max-width:700px)');\r\n\r\n  const dispatch = useAppDispatch();\r\n  const dataset = useAppSelector((state) => state.map.dataset);\r\n  const actualTimeInitial = useAppSelector((state) => state.dashboard.actualTimeInitial);\r\n  const actualTimeFinal = useAppSelector((state) => state.dashboard.actualTimeFinal);\r\n  const years = useAppSelector((state) => state.dashboard.years);\r\n\r\n  function handleChange(_event, newValue) {\r\n    if (newValue !== null) {\r\n      dispatch(setDataset(newValue));\r\n    }\r\n  }\r\n\r\n  function handleChangeInitial(_event, child) {\r\n    dispatch(setActualTimeInitial(child.props.value));\r\n  }\r\n\r\n  function handleChangeFinal(_event, child) {\r\n    dispatch(setActualTimeFinal(child.props.value));\r\n  }\r\n\r\n  return (\r\n    <div className={`${classes.topLeftControls} ${matches ? classes.bp700 : ''}`}>\r\n      <Card elevation={3} className={classes.card}>\r\n        <CardContent className={classes.cardContent}>\r\n          <Typography variant=\"h6\">Filters</Typography>\r\n          <div className={classes.datasetWrapper}>\r\n            <Typography gutterBottom variant=\"caption\">\r\n              Select dataset\r\n            </Typography>\r\n            <ToggleButtonGroup value={dataset} exclusive size=\"small\" onChange={handleChange}>\r\n              {datasetOptions.map((option, index) => (\r\n                <ToggleButton key={`dataset-${index}`} value={option} color=\"primary\">\r\n                  {option}\r\n                </ToggleButton>\r\n              ))}\r\n            </ToggleButtonGroup>\r\n          </div>\r\n          <div className={classes.yearsWrapper}>\r\n            <div className={classes.yearWrapper}>\r\n              <Typography gutterBottom variant=\"caption\">\r\n                Start year\r\n              </Typography>\r\n              <Select\r\n                variant=\"standard\"\r\n                inputProps={{ className: classes.selectInput }}\r\n                MenuProps={{ classes: { paper: classes.menuPaper, list: classes.selectMenu } }}\r\n                value={actualTimeInitial}\r\n                onChange={handleChangeInitial}\r\n                fullWidth\r\n              >\r\n                {years\r\n                  .filter((year) => year <= actualTimeFinal)\r\n                  .map((year, index) => {\r\n                    return (\r\n                      <MenuItem key={`initial-year-${index}`} value={year}>\r\n                        {year}\r\n                      </MenuItem>\r\n                    );\r\n                  })}\r\n              </Select>\r\n            </div>\r\n            <Divider orientation=\"vertical\" flexItem />\r\n            <div className={classes.yearWrapper}>\r\n              <Typography gutterBottom variant=\"caption\">\r\n                End year\r\n              </Typography>\r\n              <Select\r\n                variant=\"standard\"\r\n                inputProps={{ className: classes.selectInput }}\r\n                MenuProps={{ classes: { paper: classes.menuPaper, list: classes.selectMenu } }}\r\n                value={actualTimeFinal}\r\n                onChange={handleChangeFinal}\r\n                fullWidth\r\n              >\r\n                {years\r\n                  .filter((year) => year >= actualTimeInitial)\r\n                  .map((year, index) => {\r\n                    return (\r\n                      <MenuItem key={`final-year-${index}`} value={year}>\r\n                        {year}\r\n                      </MenuItem>\r\n                    );\r\n                  })}\r\n              </Select>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n","import { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  bottomRightControls: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    right: 0\r\n  }\r\n}));\r\n\r\nexport { useStyles };\r\n","// Helper for loading images to the report\r\nexport function imgOnLoadPromise(obj) {\r\n  return new Promise((resolve, reject) => {\r\n    obj.onload = () => resolve(obj);\r\n    obj.onerror = reject;\r\n  });\r\n}\r\n","import { Alert, CircularProgress, IconButton, Snackbar, Tooltip } from '@mui/material';\r\nimport { useStyles } from './BottomRightControlsMUI';\r\nimport { CameraAlt } from '@mui/icons-material';\r\nimport { useAppDispatch, useAppSelector } from '../../../../stores/hooks';\r\nimport { useState } from 'react';\r\nimport { setPosition } from '../../../../stores/slices/mapSlice';\r\nimport { svgAsPngUri } from 'save-svg-as-png';\r\nimport { imgOnLoadPromise } from '../../../../util/imgOnLoadPromise';\r\nimport download from 'downloadjs';\r\nimport LogoImg from '../../../../assets/img/logo-typhinet-prod.png';\r\nimport { mapLegends } from '../../../../util/mapLegends';\r\n\r\nexport const BottomRightControls = () => {\r\n  const classes = useStyles();\r\n  const [loading, setLoading] = useState(false);\r\n  const [showAlert, setShowAlert] = useState(false);\r\n\r\n  const dispatch = useAppDispatch();\r\n  const mapView = useAppSelector((state) => state.map.mapView);\r\n  const dataset = useAppSelector((state) => state.map.dataset);\r\n  const actualTimeInitial = useAppSelector((state) => state.dashboard.actualTimeInitial);\r\n  const actualTimeFinal = useAppSelector((state) => state.dashboard.actualTimeFinal);\r\n  const globalOverviewLabel = useAppSelector((state) => state.dashboard.globalOverviewLabel);\r\n  const customDropdownMapView = useAppSelector((state) => state.graph.customDropdownMapView);\r\n\r\n  async function handleClick() {\r\n    setLoading(true);\r\n    dispatch(setPosition({ coordinates: [0, 0], zoom: 1 }));\r\n\r\n    try {\r\n      await svgAsPngUri(document.getElementById('global-overview-map'), {\r\n        scale: 4,\r\n        backgroundColor: 'white',\r\n        width: 1200,\r\n        left: -200\r\n      }).then(async (uri) => {\r\n        let canvas = document.createElement('canvas');\r\n        let ctx = canvas.getContext('2d');\r\n\r\n        let mapImg = document.createElement('img');\r\n        let mapImgPromise = imgOnLoadPromise(mapImg);\r\n        mapImg.src = uri;\r\n        await mapImgPromise;\r\n\r\n        const cWidth = 3600;\r\n        const cHeight = 1800;\r\n        const textHeight = 250;\r\n        const legendHeight = 350;\r\n\r\n        canvas.width = cWidth;\r\n        canvas.height = cHeight + textHeight + legendHeight;\r\n\r\n        ctx.fillStyle = 'white';\r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n        ctx.font = 'bolder 50px Montserrat';\r\n        ctx.fillStyle = 'black';\r\n        ctx.textAlign = 'center';\r\n        ctx.fillText(`Global Overview of ${globalOverviewLabel.fullLabel}`, canvas.width / 2, 80);\r\n        ctx.font = '35px Montserrat';\r\n        ctx.textAlign = 'center';\r\n\r\n        const actualMapView = mapLegends.find((x) => x.value === mapView).label;\r\n\r\n        ctx.fillText('Map View: ' + actualMapView, canvas.width / 2, 140);\r\n        ctx.fillText('Dataset: ' + dataset, canvas.width / 2, 190);\r\n        ctx.fillText('Time Period: ' + actualTimeInitial + ' to ' + actualTimeFinal, canvas.width / 2, 240);\r\n       if(mapView === 'Genotype prevalence'){\r\n          if (customDropdownMapView.length === 1) {\r\n            ctx.fillText('Selected Genotypes: ' + customDropdownMapView, canvas.width / 2, 290);\r\n          } else if (customDropdownMapView.length > 1) {\r\n            const genotypesText = customDropdownMapView.join(', ');\r\n            ctx.fillText('Selected Genotypes: ' + genotypesText, canvas.width / 2, 290);\r\n          }\r\n        }\r\n        ctx.drawImage(mapImg, 0, textHeight+50, canvas.width, cHeight);\r\n        const legendImg = document.createElement('img');\r\n        const legendImgPromise = imgOnLoadPromise(legendImg);\r\n        let legendWidth = 439;\r\n\r\n        switch (mapView) {\r\n          case 'Dominant Genotype':\r\n            legendWidth = 3085;\r\n            legendImg.src = `legends/MapView_DominantGenotype.png`;\r\n            break;\r\n          case 'No. Samples':\r\n            legendImg.src = 'legends/MapView_NoSamples.png';\r\n            break;\r\n          // case 'Sensitive to all drugs':\r\n          case 'Susceptible to all drugs':\r\n            legendImg.src = 'legends/MapView_Sensitive.png';\r\n            break;\r\n          case 'Genotype prevalence':\r\n            legendImg.src = 'legends/MapView_prevalence.png';\r\n            break;\r\n          default:\r\n            legendImg.src = 'legends/MapView_Others.png';\r\n            break;\r\n        }\r\n        if (mapView === 'Dominant Genotype') {\r\n        await legendImgPromise;\r\n        ctx.drawImage(\r\n          legendImg,\r\n          canvas.width / 2 - legendWidth / 2,\r\n          canvas.height - legendHeight - 30,\r\n          legendWidth,\r\n          legendHeight\r\n        );\r\n      } else {\r\n        await legendImgPromise;\r\n        ctx.drawImage(\r\n          legendImg,\r\n          canvas.width - (canvas.width / 6),\r\n          0,\r\n          legendWidth,\r\n          legendHeight\r\n        );\r\n      }\r\n        const typhinetLogo = document.createElement('img');\r\n        const typhinetLogoPromise = imgOnLoadPromise(typhinetLogo);\r\n        typhinetLogo.src = LogoImg;\r\n        await typhinetLogoPromise;\r\n        ctx.drawImage(typhinetLogo, 25, 25, 500, 200);\r\n\r\n        const base64 = canvas.toDataURL();\r\n        await download(base64, 'TyphiNET - Global Overview Salmonella Typhi.png');\r\n      });\r\n    } catch (error) {\r\n      setShowAlert(true);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  function handleCloseAlert() {\r\n    setShowAlert(false);\r\n  }\r\n\r\n  return (\r\n    <div className={classes.bottomRightControls}>\r\n      <Tooltip title=\"Download Map as PNG\" placement=\"left\">\r\n        <span>\r\n          <IconButton color=\"primary\" onClick={handleClick} disabled={loading}>\r\n            {loading ? <CircularProgress color=\"primary\" size={35} /> : <CameraAlt fontSize=\"large\" />}\r\n          </IconButton>\r\n        </span>\r\n      </Tooltip>\r\n      <Snackbar open={showAlert} autoHideDuration={5000} onClose={handleCloseAlert}>\r\n        <Alert onClose={handleCloseAlert} severity=\"error\" sx={{ width: '100%' }}>\r\n          Something went wrong with the download, please try again later.\r\n        </Alert>\r\n      </Snackbar>\r\n    </div>\r\n  );\r\n};\r\n","// List of Salmonella drugs\r\nexport const drugs = [\r\n  'Ampicillin',\r\n  'Azithromycin',\r\n  'Chloramphenicol',\r\n  // 'Co-trimoxazole',\r\n  'Trimethoprim-sulfamethoxazole',\r\n  // 'ESBL',\r\n  'Ceftriaxone',\r\n  // 'Fluoroquinolones (CipNS)',\r\n  'Ciprofloxacin NS',\r\n  // 'Fluoroquinolones (CipR)',\r\n  'Ciprofloxacin R',\r\n  'Sulphonamides',\r\n  'Susceptible',\r\n  'Tetracyclines',\r\n  'Trimethoprim'\r\n].sort((a, b) => a.localeCompare(b));\r\n\r\nexport const drugsForDrugResistanceGraph = [...drugs, 'XDR', 'MDR'].sort((a, b) => a.localeCompare(b));\r\n\r\nexport const defaultDrugsForDrugResistanceGraph = [\r\n  'Azithromycin',\r\n  'Ceftriaxone',\r\n  'Ciprofloxacin NS',\r\n  'Ciprofloxacin R',\r\n  'MDR',\r\n  'Susceptible',\r\n  'Trimethoprim-sulfamethoxazole',\r\n  'XDR'\r\n];\r\n\r\n// List of Salmonella drug classes\r\nexport const drugClasses = [\r\n  'Ampicillin',\r\n  'Azithromycin',\r\n  'Chloramphenicol',\r\n  // 'Co-trimoxazole',\r\n  'Trimethoprim-sulfamethoxazole',\r\n  // 'ESBL',\r\n  'Ceftriaxone',\r\n  // 'Fluoroquinolones (CipNS)',\r\n  'Ciprofloxacin NS',\r\n  'Sulphonamides',\r\n  'Tetracyclines',\r\n  'Trimethoprim'\r\n];\r\n","import { PayloadAction, createSlice } from '@reduxjs/toolkit';\r\nimport { defaultDrugsForDrugResistanceGraph } from '../../util/drugs';\r\ninterface GraphState {\r\n  countriesForFilter: Array<string>;\r\n  distributionGraphView: string;\r\n  genotypesYearData: Array<any>;\r\n  drugsYearData: Array<any>;\r\n  drugResistanceGraphView: Array<string>,\r\n  frequenciesGraphView: string;\r\n  frequenciesGraphSelectedGenotypes: Array<string>;\r\n  genotypesDrugsData: Array<any>;\r\n  genotypesDrugClassesData: Array<any>;\r\n  determinantsGraphView: string;\r\n  determinantsGraphDrugClass: string;\r\n  customDropdownMapView: Array<string>;\r\n}\r\n\r\nconst initialState: GraphState = {\r\n  countriesForFilter: [],\r\n  genotypesYearData: [],\r\n  drugsYearData: [],\r\n  genotypesDrugsData: [],\r\n  genotypesDrugClassesData: [],\r\n  distributionGraphView: 'number',\r\n  drugResistanceGraphView: defaultDrugsForDrugResistanceGraph,\r\n  frequenciesGraphView: 'percentage',\r\n  frequenciesGraphSelectedGenotypes: [],\r\n  determinantsGraphView: 'percentage',\r\n  determinantsGraphDrugClass: 'Ciprofloxacin NS',\r\n  customDropdownMapView: [],\r\n};\r\n\r\nexport const graphSlice = createSlice({\r\n  name: 'graph',\r\n  initialState,\r\n  reducers: {\r\n    setCountriesForFilter: (state, action: PayloadAction<Array<string>>) => {\r\n      state.countriesForFilter = action.payload;\r\n    },\r\n    setGenotypesYearData: (state, action: PayloadAction<Array<any>>) => {\r\n      state.genotypesYearData = action.payload;\r\n    },\r\n    setDrugsYearData: (state, action: PayloadAction<Array<any>>) => {\r\n      state.drugsYearData = action.payload;\r\n    },\r\n    setDistributionGraphView: (state, action: PayloadAction<string>) => {\r\n      state.distributionGraphView = action.payload;\r\n    },\r\n    setDrugResistanceGraphView: (state, action: PayloadAction<Array<string>>) => {\r\n      state.drugResistanceGraphView = action.payload;\r\n    },\r\n    setFrequenciesGraphView: (state, action: PayloadAction<string>) => {\r\n      state.frequenciesGraphView = action.payload;\r\n    },\r\n    setFrequenciesGraphSelectedGenotypes: (state, action: PayloadAction<Array<string>>) => {\r\n      state.frequenciesGraphSelectedGenotypes = action.payload;\r\n    },\r\n    setGenotypesDrugsData: (state, action: PayloadAction<Array<any>>) => {\r\n      state.genotypesDrugsData = action.payload;\r\n    },\r\n    setDeterminantsGraphView: (state, action: PayloadAction<string>) => {\r\n      state.determinantsGraphView = action.payload;\r\n    },\r\n    setDeterminantsGraphDrugClass: (state, action: PayloadAction<string>) => {\r\n      state.determinantsGraphDrugClass = action.payload;\r\n    },\r\n    setGenotypesDrugClassesData: (state, action: PayloadAction<Array<any>>) => {\r\n      state.genotypesDrugClassesData = action.payload;\r\n    },\r\n    setCustomDropdownMapView: (state, action: PayloadAction<Array<string>>) => {\r\n      state.customDropdownMapView = action.payload;\r\n    },\r\n  }\r\n});\r\n\r\nexport const {\r\n  setCountriesForFilter,\r\n  setDistributionGraphView,\r\n  setGenotypesYearData,\r\n  setDrugsYearData,\r\n  setDrugResistanceGraphView,\r\n  setFrequenciesGraphView,\r\n  setFrequenciesGraphSelectedGenotypes,\r\n  setGenotypesDrugsData,\r\n  setDeterminantsGraphView,\r\n  setDeterminantsGraphDrugClass,\r\n  setGenotypesDrugClassesData,\r\n  setCustomDropdownMapView\r\n} = graphSlice.actions;\r\n\r\nexport default graphSlice.reducer;\r\n","import { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  topRightControls: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    position: 'absolute',\r\n    top: 0,\r\n    right: 0,\r\n    marginTop: '200px',\r\n    minWidth:'209px',\r\n    // width:'25%',\r\n    '@media (max-width: 1000px)': {\r\n      // width: \r\n    },\r\n    '@media (max-width: 700px)': {\r\n      position: 'relative',\r\n      marginTop: '0px',\r\n      width:'100%',\r\n    },\r\n    // '&$bp700': {\r\n    //   position: 'relative'\r\n    // }\r\n    \r\n  },\r\n\r\n  dropdown:{\r\n    '& .MuiTypography-root': {\r\n      fontSize: '14px',\r\n      height:'20px',\r\n      padding:'0px'\r\n      // width:'20px',\r\n    }\r\n  },\r\n  checkbox:{\r\n    '& .MuiCheckbox-root': {\r\n      backgroundColor:'blue',\r\n      color:'red',\r\n      padding:'0px'\r\n      // width:'20px',\r\n    }\r\n  },\r\n  card: { borderRadius: '6px !important' },\r\n  cardContent: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    rowGap: '4px'\r\n  },\r\n  frequenciesGraph: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    borderTop: '1px solid rgba(0, 0, 0, 0.12)',\r\n    textAlign: 'justify',\r\n  },\r\n  selectsWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    rowGap: '4px'\r\n  },\r\n  selectWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    rowGap: '8px'\r\n  },\r\n  labelWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    columnGap: '8px'\r\n  },\r\n  labelTooltipIcon: {\r\n    cursor: 'pointer'\r\n  },\r\n   label: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    columnGap: '8px'\r\n  },\r\n  dataViewSelectInput: {\r\n    fontSize: '14px !important',\r\n    fontWeight: '600 !important',\r\n    padding: '8px 32px 8px 8px !important'\r\n  },\r\n  dataViewSelectMenu: {\r\n    '& .MuiMenuItem-root': {\r\n      fontSize: '14px'\r\n    }\r\n  },\r\n  genotypesSelectInput: {\r\n    fontSize: '14px !important',\r\n    fontWeight: '600 !important',\r\n    padding: '8px 110px 8px 15px !important',\r\n    marginRight: '-80px !important'\r\n  },\r\n  genotypesSelectButton: {\r\n    height: '20px',\r\n    fontSize: '8px !important',\r\n    padding: '3px 5px !important',\r\n    whiteSpace: 'nowrap',\r\n    position: 'absolute',\r\n    right: '18px'\r\n  },\r\n  genotypesMenuPaper: {\r\n    maxHeight: '350px !important'\r\n  },\r\n  genotypesSelectMenu: {\r\n    '& .MuiCheckbox-root': {\r\n      padding: '0px 8px 0px 0px'\r\n    },\r\n    '& .MuiTypography-root': {\r\n      fontSize: '14px'\r\n    }\r\n  },\r\n  graphWrapper: {\r\n    paddingTop: '16px',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    gap: '16px',\r\n    height: '560px',\r\n\r\n    '@media (max-width: 1000px)': {\r\n      flexDirection: 'column',\r\n      height: '100%'\r\n    }\r\n  },\r\n  graph: {\r\n    height: '100%',\r\n    width: '70%',\r\n\r\n    '@media (max-width: 1000px)': {\r\n      width: '100%'\r\n    },\r\n\r\n    '@media (max-width: 500px)': {\r\n      width: '100%',\r\n      height: '460px'\r\n    }\r\n  },\r\n  graphLabel: {\r\n    textAnchor: 'middle'\r\n  },\r\n  legendWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    overflowX: 'auto',\r\n    flexWrap: 'wrap',\r\n    height: '110px',\r\n    gap: '4px',\r\n    padding: '8px 0px 4px',\r\n    marginLeft: '60px'\r\n  },\r\n  legendItemWrapper: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    columnGap: '4px',\r\n    paddingRight: '8px'\r\n  },\r\n  colorCircle: {\r\n    height: '10px',\r\n    width: '10px',\r\n    borderRadius: '50%',\r\n    minWidth: '10px'\r\n  },\r\n  chartTooltipLabel: {\r\n    backgroundColor: '#fff',\r\n    padding: '8px',\r\n    border: 'solid rgba(0, 0, 0, 0.25) 1px'\r\n  },\r\n  tooltipWrapper: {\r\n    width: '30%',\r\n    borderRadius: '6px',\r\n    backgroundColor: '#E5E5E5',\r\n    overflowY: 'auto',\r\n\r\n    '@media (max-width: 1000px)': {\r\n      width: '100%',\r\n      height: '250px'\r\n    }\r\n  },\r\n  tooltip: {\r\n    width: '100%',\r\n    height: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column'\r\n  },\r\n  tooltipTitle: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    columnGap: '8px',\r\n    alignItems: 'flex-end',\r\n    padding: '16px 16px 8px',\r\n    borderBottom: '1px solid #fff'\r\n  },\r\n  tooltipContent: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(12, 1fr)',\r\n    flexWrap: 'wrap',\r\n    gap: '16px',\r\n    padding: '16px',\r\n    overflowY: 'auto'\r\n  },\r\n  tooltipItemWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    columnGap: '8px',\r\n    gridColumn: 'span 6'\r\n  },\r\n  tooltipItemBox: {\r\n    height: '18px',\r\n    width: '18px',\r\n    border: 'solid rgb(0, 0, 0, 0.75) 0.5px',\r\n    flex: 'none'\r\n  },\r\n  tooltipItemStats: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n\r\n    '& .MuiTypography-body2': {\r\n      overflowWrap: 'anywhere'\r\n    }\r\n  },\r\n  noGenotypeSelected: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    height: '100%'\r\n  }\r\n}));\r\n\r\nexport { useStyles };\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport { Button, Card, CardContent, Checkbox, ListItemText, MenuItem, Select, Tooltip, Typography, InputAdornment} from '@mui/material';\r\nimport SearchIcon from \"@mui/icons-material/Search\";\r\nimport { useState } from 'react';\r\nimport { useAppDispatch, useAppSelector } from '../../../../stores/hooks';\r\nimport { setCustomDropdownMapView } from '../../../../stores/slices/graphSlice';\r\nimport { useStyles } from './TopRightControls2MUI';\r\nimport TextField from '@mui/material/TextField';\r\nimport { InfoOutlined } from '@mui/icons-material';\r\n\r\n\r\nexport const TopRightControls2 = () => {\r\n  const classes = useStyles();\r\n  const [, setCurrentTooltip] = useState(null);\r\n  const [searchValue2, setSearchValue2] = useState(\"\")\r\n  const dispatch = useAppDispatch();\r\n  const organism = useAppSelector((state) => state.dashboard.organism);\r\n  const genotypesDrugsData = useAppSelector((state) => state.graph.genotypesDrugsData);\r\n  const customDropdownMapView = useAppSelector((state) => state.graph.customDropdownMapView);\r\n\r\n  // useEffect(() => {\r\n  //   setCurrentTooltip(null);\r\n  // }, [genotypesDrugsData, customDropdownMapView]);\r\n\r\n  function getSelectGenotypeLabel(genotype) {\r\n    const percentage = Number(((genotype.Susceptible / genotype.totalCount) * 100).toFixed(2));\r\n\r\n    return `${genotype.name} (total N=${genotype.totalCount}, ${percentage}% Susceptible)`;\r\n  }\r\n  \r\n\r\n  function handleChangeSelectedGenotypes({ event = null, all = false }) {\r\n    if (all) {\r\n      dispatch(setCustomDropdownMapView([]));\r\n      setCurrentTooltip(null);\r\n      return;\r\n    }\r\n\r\n    const {\r\n      target: { value }\r\n    } = event;\r\n\r\n    if (customDropdownMapView.length === 10 && value.length > 10) {\r\n      return;\r\n    }\r\n\r\n    if (value.length === 0) {\r\n      setCurrentTooltip(null);\r\n    }\r\n    dispatch(setCustomDropdownMapView(value));\r\n  }\r\n\r\n function setSearchValue(event){\r\n  event.preventDefault()\r\n  setSearchValue2(event.target.value)\r\n }\r\n\r\nconst filteredData = genotypesDrugsData.filter((genotype) =>\r\n  genotype.name.includes(searchValue2.toLowerCase()) || genotype.name.includes(searchValue2.toUpperCase())\r\n);\r\n\r\n  return (\r\n    <div className={`${classes.topRightControls}`}>\r\n      <Card elevation={3} className={classes.card}>\r\n        <CardContent className={classes.frequenciesGraph}>\r\n          <div className={classes.label}>\r\n            <Typography variant=\"caption\">Select genotype</Typography>\r\n            <Tooltip\r\n              title=\"Select up to 10 Genotypes\"\r\n              placement=\"top\"\r\n            >\r\n              <InfoOutlined color=\"action\" fontSize=\"small\" className={classes.labelTooltipIcon} />\r\n            </Tooltip>\r\n          </div>\r\n            <Select\r\n              multiple\r\n              // labelId=\"search-select-label\"\r\n              id=\"search-select\"\r\n              value={customDropdownMapView}\r\n              onChange={(event) => handleChangeSelectedGenotypes({ event })}\r\n              disabled={organism === 'none'}\r\n              displayEmpty\r\n              onClose={(e) => setSearchValue2(\"\")}\r\n              endAdornment={\r\n                <Button\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                className={classes.genotypesSelectButton}\r\n                onClick={() => handleChangeSelectedGenotypes({ all: true })}\r\n                disabled={customDropdownMapView.length === 0}\r\n                color=\"error\"\r\n              >\r\n                Clear\r\n              </Button>\r\n              }\r\n              inputProps={{ className: classes.genotypesSelectInput }}\r\n              MenuProps={{ classes: { paper: classes.genotypesMenuPaper, list: classes.genotypesSelectMenu } }}\r\n              renderValue={(selected) => (\r\n                selected.length === 1 ? (\r\n                  <Typography variant=\"caption\">{selected}</Typography>\r\n                ) : (\r\n                  <Typography variant=\"caption\">{`${selected.length} genotypes`}</Typography>\r\n                ))\r\n              }\r\n            >\r\n              <TextField \r\n                size=\"small\"\r\n                autoFocus\r\n                placeholder=\"Type to search...\"\r\n                label=\"Search genotype\" \r\n                variant=\"standard\" \r\n                InputProps={{\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">\r\n                      <SearchIcon />\r\n                    </InputAdornment>\r\n                  ),\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <Button\r\n                        size=\"small\"\r\n                        variant=\"outlined\"\r\n                        className={classes.genotypesSelectButton}\r\n                        onClick={(e) => {\r\n                          handleChangeSelectedGenotypes({ all: true });\r\n                        }}\r\n                        disabled={customDropdownMapView.length === 0}\r\n                        color=\"error\"\r\n                      >\r\n                        Clear\r\n                      </Button>\r\n                    </InputAdornment>\r\n                  )\r\n                }}\r\n                sx={{ width:'90%', margin:'0% 5%'}}\r\n                onChange={e => setSearchValue(e)}\r\n                onKeyDown={(e) => e.stopPropagation()}\r\n              />\r\n              {filteredData.map((genotype, index) => (\r\n                <MenuItem key={`frequencies-option-${index}`} value={genotype.name} className={classes.dropdown}>\r\n                  <Checkbox disableRipple sx={{padding: '0px', marginRight:'5px'}} checked={customDropdownMapView.indexOf(genotype.name) > -1} />\r\n                  <ListItemText primary={getSelectGenotypeLabel(genotype)}   />\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n        </CardContent>\r\n     </Card>\r\n    </div>\r\n  );\r\n};\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport { Card, CardContent, Typography, useMediaQuery } from '@mui/material';\r\nimport { ComposableMap, Geographies, Geography, Graticule, Sphere, ZoomableGroup } from 'react-simple-maps';\r\nimport { useStyles } from './MapMUI';\r\nimport geography from '../../../assets/world-50m.json';\r\nimport { darkGrey, getColorForGenotype, lightGrey, zeroCountColor, zeroPercentColor } from '../../../util/colorHelper';\r\nimport { redColorScale, samplesColorScale, sensitiveColorScale, redColorScale2 } from './mapColorHelper';\r\nimport ReactTooltip from 'react-tooltip';\r\nimport { BottomLeftControls } from './BottomLeftControls';\r\nimport { useAppDispatch, useAppSelector } from '../../../stores/hooks';\r\nimport { setPosition, setTooltipContent } from '../../../stores/slices/mapSlice.ts';\r\nimport { TopRightControls } from './TopRightControls';\r\nimport { setActualCountry } from '../../../stores/slices/dashboardSlice.ts';\r\nimport { TopLeftControls } from './TopLeftControls';\r\nimport { BottomRightControls } from './BottomRightControls';\r\nimport { TopRightControls2 } from './TopRightControls2';\r\n\r\n\r\nconst statKey = {\r\n  MDR: 'MDR',\r\n  'H58 / Non-H58': 'H58',\r\n  XDR: 'XDR',\r\n  AzithR: 'AzithR',\r\n  CipNS: 'CipNS',\r\n  CipR: 'CipR',\r\n  // 'Sensitive to all drugs': 'Susceptible'\r\n  'Susceptible to all drugs': 'Susceptible'\r\n};\r\n\r\nexport const Map = () => {\r\n  const classes = useStyles();\r\n  const matches = useMediaQuery('(max-width:700px)');\r\n\r\n  const dispatch = useAppDispatch();\r\n  const position = useAppSelector((state) => state.map.position);\r\n  const mapData = useAppSelector((state) => state.map.mapData);\r\n  const mapView = useAppSelector((state) => state.map.mapView);\r\n  const tooltipContent = useAppSelector((state) => state.map.tooltipContent);\r\n  const globalOverviewLabel = useAppSelector((state) => state.dashboard.globalOverviewLabel);\r\n  const customDropdownMapView = useAppSelector((state) => state.graph.customDropdownMapView);\r\n  const ifCustom = useAppSelector((state) => state.map.ifCustom);\r\n\r\n\r\n  function handleOnClick(countryData) {\r\n    if (countryData !== undefined) {\r\n      dispatch(setActualCountry(countryData.name));\r\n    }\r\n  }\r\n\r\n  function handleOnMouseLeave() {\r\n    dispatch(setTooltipContent(null));\r\n  }\r\n\r\n  function handleOnMouseEnter({ geo, countryStats, countryData, smallerThan20 = false, showTooltip = false }) {\r\n    const { NAME } = geo.properties;\r\n    const tooltip = {\r\n      name: NAME,\r\n      content: {},\r\n      smallerThan20\r\n    };\r\n\r\n    if (countryData !== undefined) {\r\n      switch (mapView) {\r\n        case 'No. Samples':\r\n          Object.assign(tooltip, {\r\n            content: {\r\n              Samples: countryData.count,\r\n              Genotypes: countryStats.GENOTYPE.count,\r\n              H58: `${countryStats.H58.percentage}%`,\r\n              MDR: `${countryStats.MDR.percentage}%`,\r\n              XDR: `${countryStats.XDR.percentage}%`,\r\n              AzithR: `${countryStats.AzithR.percentage}%`,\r\n              CipR: `${countryStats.CipR.percentage}%`,\r\n              CipNS: `${countryStats.CipNS.percentage}%`,\r\n              Susceptible: `${countryStats.Susceptible.percentage}%`\r\n            }\r\n          });\r\n          break;\r\n        case 'Dominant Genotype':\r\n          const genotypes = countryStats.GENOTYPE.items.slice(0, 5);\r\n          genotypes.forEach((genotype) => {\r\n            tooltip.content[genotype.name] = genotype.count;\r\n          });\r\n          break;\r\n        case 'H58 / Non-H58':\r\n        case 'MDR':\r\n        case 'Susceptible to all drugs': // case 'Sensitive to all drugs':\r\n        case 'XDR':\r\n        case 'AzithR':\r\n        case 'CipR':\r\n        case 'CipNS':\r\n          if (showTooltip) {\r\n            tooltip.content[statKey[mapView]] = {\r\n              count: countryStats[statKey[mapView]].count,\r\n              percentage: `${countryStats[statKey[mapView]].percentage}%`\r\n            };\r\n          }\r\n          break;\r\n        case 'Genotype prevalence':\r\n            let percentCounter = 0;        \r\n            const genotypes1 = countryStats.GENOTYPE.items;\r\n            let genotypes2 = [];\r\n            genotypes1.forEach((genotype) => {\r\n               if (customDropdownMapView.includes(genotype.name)){\r\n                  genotypes2.push(genotype);}\r\n                percentCounter += genotype.count;\r\n            });\r\n            genotypes1.forEach((genotype) => {\r\n               if (customDropdownMapView.includes(genotype.name))\r\n                tooltip.content[genotype.name] = `${genotype.count} (${((genotype.count/percentCounter)*100).toFixed(2)} %)`;\r\n            });\r\n            if (genotypes2.length > 0) {\r\n              let sumCount = 0;\r\n              for (const genotype of genotypes2) {\r\n                sumCount += genotype.count;\r\n              }\r\n              if(countryData.count>=20 && genotypes2.length > 1 )\r\n                tooltip.content['All selected genotypes'] = `${sumCount} (${((sumCount/percentCounter)*100).toFixed(2)} %)`;\r\n\r\n            }\r\n          break;\r\n\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n\r\n    dispatch(setTooltipContent(tooltip));\r\n  }\r\n\r\n  function handleOnMoveEnd(value) {\r\n    dispatch(setPosition(value));\r\n  }\r\n\r\n  function showPercentage() {\r\n    return !['Dominant Genotype','Genotype prevalence','No. Samples'].includes(mapView);\r\n  }\r\n\r\n  return (\r\n    <Card className={classes.card} elevation={2}>\r\n      <CardContent className={classes.cardContent}>\r\n        <Typography gutterBottom variant=\"h5\" fontWeight={'bold'}>\r\n          Global Overview{' '}\r\n          <span>\r\n            of <i>{globalOverviewLabel.italicLabel}</i> {globalOverviewLabel.label}\r\n          </span>\r\n        </Typography>\r\n        <div className={classes.mapWrapper}>\r\n          <ComposableMap\r\n            className={classes.composableMap}\r\n            id=\"global-overview-map\"\r\n            data-tip=\"\"\r\n            projectionConfig={{\r\n              rotate: [-10, 0, 0],\r\n              scale: 210\r\n            }}\r\n          >\r\n            <ZoomableGroup\r\n              zoom={position.zoom}\r\n              center={position.coordinates}\r\n              onMoveEnd={(value) => {\r\n                handleOnMoveEnd(value);\r\n              }}\r\n            >\r\n              <Sphere stroke=\"#E4E5E6\" strokeWidth={0.5} />\r\n              <Graticule stroke=\"#E4E5E6\" strokeWidth={0.5} />\r\n              <Geographies geography={geography}>\r\n                {({ geographies }) => {\r\n                  return geographies.map((geo) => {\r\n                    const countryData = mapData.find((item) => item.name === geo.properties.NAME);\r\n                    const countryStats = countryData?.stats;\r\n                    let fillColor = lightGrey;\r\n                    let smallerThan20 = false;\r\n                    let showTooltip = false;\r\n\r\n                    if (countryData) {\r\n                      let count = 0;\r\n\r\n                      switch (mapView) {\r\n                        case 'No. Samples':\r\n                          if (countryData.count > 0) {\r\n                            fillColor = samplesColorScale(countryData.count);\r\n                          } else {\r\n                            fillColor = zeroCountColor;\r\n                          }\r\n                          break;\r\n                        case 'Dominant Genotype':\r\n                          const genotypes = countryStats.GENOTYPE.items;\r\n                          fillColor = getColorForGenotype(genotypes[0].name);\r\n                          break;\r\n                        case 'Genotype prevalence':\r\n                          let percentCounter = 0;        \r\n                          const genotypes1 = countryStats.GENOTYPE.items;\r\n                          let genotypes2 = [];\r\n                          genotypes1.forEach((genotype) => {\r\n                            if (customDropdownMapView.includes(genotype.name))\r\n                                genotypes2.push(genotype);\r\n                              percentCounter += genotype.count;\r\n                          });\r\n                \r\n                          let sumCount = 0;\r\n\r\n                          if (genotypes2.length > 0 ) {\r\n                            for (const genotype of genotypes2) {\r\n                              sumCount += genotype.count;\r\n\r\n                            }\r\n                          }\r\n                          if(countryData.count>=20 && genotypes2.length > 0 ){\r\n                            if(genotypes2 != undefined){\r\n                              fillColor = redColorScale2(((sumCount/percentCounter)*100).toFixed(2));\r\n                            }\r\n                          }\r\n                          else if (countryData.count>=20) {\r\n                            fillColor = darkGrey;\r\n                            smallerThan20 = true;\r\n                          }\r\n\r\n                          break;\r\n\r\n                        case 'Susceptible to all drugs': // case 'Sensitive to all drugs':\r\n                        case 'H58 / Non-H58':\r\n                        case 'MDR':\r\n                        case 'XDR':\r\n                        case 'AzithR':\r\n                        case 'CipR':\r\n                        case 'CipNS':\r\n                          count = countryStats[statKey[mapView]]?.count;\r\n                          if (countryData.count >= 20 && count > 0) {\r\n                            if (mapView === 'Susceptible to all drugs') {\r\n                              fillColor = sensitiveColorScale(countryStats[statKey[mapView]].percentage);\r\n                            } else {\r\n                              fillColor = redColorScale(countryStats[statKey[mapView]].percentage);\r\n                            }\r\n                            showTooltip = true;\r\n                          } else if (countryData.count >= 20) {\r\n                            if (mapView === 'Susceptible to all drugs') {\r\n                              fillColor = zeroPercentColor;\r\n                            } else {\r\n                              fillColor = darkGrey;\r\n                            }\r\n                            smallerThan20 = true;\r\n                          }\r\n                          break;\r\n                        default:\r\n                          break;\r\n                      }\r\n                    }\r\n\r\n                    return (\r\n                      <Geography\r\n                        key={geo.rsmKey}\r\n                        geography={geo}\r\n                        cursor=\"pointer\"\r\n                        fill={fillColor}\r\n                        onClick={() => handleOnClick(countryData)}\r\n                        onMouseLeave={handleOnMouseLeave}\r\n                        onMouseEnter={() =>\r\n                          handleOnMouseEnter({\r\n                            geo,\r\n                            countryStats,\r\n                            countryData,\r\n                            smallerThan20,\r\n                            showTooltip\r\n                          })\r\n                        }\r\n                        style={{\r\n                          default: {\r\n                            outline: 'none'\r\n                          },\r\n                          hover: {\r\n                            stroke: '#607D8B',\r\n                            strokeWidth: 1,\r\n                            outline: 'none'\r\n                          },\r\n                          pressed: {\r\n                            fill: '#FF5722',\r\n                            stroke: '#607D8B',\r\n                            strokeWidth: 1,\r\n                            outline: 'none'\r\n                          }\r\n                        }}\r\n                      />\r\n                    );\r\n                  });\r\n                }}\r\n              </Geographies>\r\n            </ZoomableGroup>\r\n          </ComposableMap>\r\n          {!matches && (\r\n            <>\r\n              <TopLeftControls />\r\n              <TopRightControls />\r\n              {ifCustom ? <TopRightControls2/> : null}\r\n            </>\r\n          )}\r\n          <BottomLeftControls />\r\n          <BottomRightControls />\r\n        </div>\r\n        {matches && (\r\n          <div className={classes.topControls}>\r\n            <TopRightControls />\r\n            {ifCustom ? <TopRightControls2/> : null}\r\n            <TopLeftControls />\r\n          </div>\r\n        )}\r\n        <ReactTooltip>\r\n          {tooltipContent && (\r\n            <div className={classes.tooltipMap}>\r\n              <span className={classes.country}>{tooltipContent.name}</span>\r\n              <div className={classes.tooltipInfo}>\r\n                {Object.keys(tooltipContent.content).map((key, index) => {\r\n                  return (\r\n                    <div key={`tooltip-${index}`} className={classes.info}>\r\n                      {mapView === 'Dominant Genotype' && (\r\n                        <div\r\n                          className={classes.color}\r\n                          style={{\r\n                            backgroundColor: getColorForGenotype(key)\r\n                          }}\r\n                        />\r\n                      )}\r\n                      <span key={`info-${index}`}>\r\n                        <span>{key}:</span>\r\n                        {showPercentage() ? (\r\n                          <span>{` ${tooltipContent.content[key].count} (${tooltipContent.content[key].percentage})`}</span>\r\n                        ) : (\r\n                          <span>{` ${tooltipContent.content[key]}`}</span>\r\n                        )}\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                })}\r\n                {Object.keys(tooltipContent.content).length === 0 && (\r\n                  <span>{tooltipContent.smallerThan20 ? '0%' : 'Insufficient data'}</span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </ReactTooltip>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n","import { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  footer: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    padding: '16px 0px 0px',\r\n    columnGap: '20px',\r\n    rowGap: '24px'\r\n  },\r\n  actions: {\r\n    display: 'flex',\r\n    gap: '8px',\r\n    width: '100%',\r\n    justifyContent: 'space-around',\r\n\r\n    '@media (max-width: 750px)': {\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  button: {\r\n    color: '#fff !important',\r\n    textTransform: 'none !important',\r\n    paddingTop: '8px !important',\r\n    paddingBottom: '8px !important',\r\n    borderRadius: '100px !important',\r\n    fontSize: '20px !important',\r\n    fontWeight: '600 !important',\r\n    height: '40px',\r\n\r\n    '@media (max-width: 750px)': {\r\n      width: '100%'\r\n    }\r\n  },\r\n  text: {\r\n    textAlign: 'center'\r\n  }\r\n}));\r\n\r\nexport { useStyles };\r\n","import { Button, Typography } from '@mui/material';\r\nimport { useStyles } from './FooterMUI';\r\nimport { Email, GitHub, Twitter } from '@mui/icons-material';\r\n\r\nexport const Footer = () => {\r\n  const classes = useStyles();\r\n\r\n  function handleClickContact() {\r\n    window.open('mailto:dashboard@typhi.net', '_blank');\r\n  }\r\n\r\n  function handleClickDocumentation() {\r\n    window.open('https://github.com/zadyson/TyphiNET/wiki', '_blank');\r\n  }\r\n\r\n  function handleClickGitHub() {\r\n    window.open('https://github.com/zadyson/TyphiNET', '_blank');\r\n  }\r\n\r\n  function handleClickTwitter() {\r\n    window.open('https://twitter.com/typhinet', '_blank');\r\n  }\r\n\r\n  return (\r\n    <div className={classes.footer}>\r\n      <div className={classes.actions}>\r\n        <Button className={classes.button} variant=\"contained\" onClick={handleClickContact} startIcon={<Email />}>\r\n          Contact\r\n        </Button>\r\n        <Button\r\n          className={classes.button}\r\n          variant=\"contained\"\r\n          onClick={handleClickDocumentation}\r\n          startIcon={<GitHub />}\r\n        >\r\n          Documentation\r\n        </Button>\r\n        <Button className={classes.button} variant=\"contained\" onClick={handleClickGitHub} startIcon={<GitHub />}>\r\n          GitHub\r\n        </Button>\r\n        <Button className={classes.button} variant=\"contained\" onClick={handleClickTwitter} startIcon={<Twitter />}>\r\n          Twitter\r\n        </Button>\r\n      </div>\r\n      <Typography className={classes.text}>\r\n        Data obtained from:{' '}\r\n        <a href=\"https://pathogen.watch\" rel=\"noreferrer\" target=\"_blank\">\r\n          pathogen watch project\r\n        </a>{' '}\r\n        on 12/09/2023.{' '}\r\n        <a href=\"https://holtlab.net\" rel=\"noreferrer\" target=\"_blank\">\r\n          Holt Lab\r\n        </a>\r\n      </Typography>\r\n    </div>\r\n  );\r\n};\r\n","// Static routes to run the app. Only use one: local or heroku.\r\n// export const API_ENDPOINT = 'http://localhost:8080/api/';\r\nexport const API_ENDPOINT = 'https://typhinetdev.herokuapp.com/api/';\r\n","import { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  graphsCard: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(12, 1fr)',\r\n    flexDirection: 'column',\r\n    gap: '16px',\r\n    padding: '16px',\r\n    overflow: 'visible !important',\r\n\r\n    '@media (max-width: 500px)': {\r\n      rowGap: '8px',\r\n      padding: '8px'\r\n    },\r\n\r\n    '&.MuiCard-root': {\r\n      borderRadius: '16px'\r\n    }\r\n  },\r\n  card: {\r\n    gridColumn: 'span 6',\r\n    overflow: 'visible !important',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n\r\n    '&.MuiCard-root': {\r\n      borderRadius: '16px'\r\n    },\r\n\r\n    '@media (max-width: 1000px)': {\r\n      gridColumn: 'span 12'\r\n    }\r\n  },\r\n  cardActions: {\r\n    display: 'flex',\r\n    columnGap: '8px',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between',\r\n    padding: '16px 16px 0px !important'\r\n  },\r\n  cardContent: {\r\n    height: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center'\r\n  },\r\n  titleWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    columnGap: '16px',\r\n    textAlign: 'center'\r\n  },\r\n  downloadWrapper: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    columnGap: '8px'\r\n  }\r\n}));\r\n\r\nexport { useStyles };\r\n","import { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  determinantsGraph: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    height: '100%',\r\n    maxWidth: '920px',\r\n    width: '-webkit-fill-available'\r\n  },\r\n  selectsWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    rowGap: '8px',\r\n    width: '70%',\r\n\r\n    '@media (max-width: 1000px)': {\r\n      width: '100%'\r\n    }\r\n  },\r\n  selectWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    rowGap: '4px',\r\n    width: '100%',\r\n    alignItems: 'center'\r\n  },\r\n  selectLabel: {\r\n    width: '100%'\r\n  },\r\n  select: {\r\n    width: '100%'\r\n  },\r\n  selectInput: {\r\n    fontSize: '14px !important',\r\n    fontWeight: '600 !important',\r\n    padding: '8px 32px 8px 8px !important'\r\n  },\r\n  selectMenu: {\r\n    '& .MuiMenuItem-root': {\r\n      fontSize: '14px'\r\n    }\r\n  },\r\n  graphWrapper: {\r\n    paddingTop: '16px',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    gap: '16px',\r\n    height: '560px',\r\n    width: '100%',\r\n\r\n    '@media (max-width: 500px)': {\r\n      height: '460px'\r\n    }\r\n  },\r\n  graph: {\r\n    height: '100%',\r\n    width: '100%'\r\n  },\r\n  graphLabel: {\r\n    textAnchor: 'middle'\r\n  },\r\n  legendWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    overflowX: 'auto',\r\n    flexWrap: 'wrap',\r\n    height: '110px',\r\n    gap: '4px',\r\n    padding: '8px 0px 4px',\r\n    marginLeft: '60px'\r\n  },\r\n  legendItemWrapper: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    columnGap: '4px',\r\n    paddingRight: '8px'\r\n  },\r\n  colorCircle: {\r\n    height: '10px',\r\n    width: '10px',\r\n    borderRadius: '50%',\r\n    minWidth: '10px'\r\n  },\r\n  tooltip: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    backgroundColor: '#fff',\r\n    padding: '16px',\r\n    border: 'solid rgba(0, 0, 0, 0.25) 1px',\r\n    rowGap: '16px'\r\n  },\r\n  tooltipTitle: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    columnGap: '8px',\r\n    alignItems: 'flex-end'\r\n  },\r\n  tooltipContent: {\r\n    display: 'grid',\r\n    gap: '8px',\r\n    gridTemplateColumns: 'repeat(12, 1fr)',\r\n    width: '450px',\r\n\r\n    '@media (max-width: 1200px)': {\r\n      width: '320px'\r\n    },\r\n\r\n    '@media (max-width: 1000px)': {\r\n      width: '450px'\r\n    },\r\n\r\n    '@media (max-width: 650px)': {\r\n      width: '320px'\r\n    },\r\n\r\n    '@media (max-width: 400px)': {\r\n      width: '275px'\r\n    }\r\n  },\r\n  tooltipItemWrapper: {\r\n    gridColumn: 'span 6',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    columnGap: '8px'\r\n  },\r\n  tooltipItemBox: {\r\n    height: '18px',\r\n    width: '18px',\r\n    border: 'solid rgb(0, 0, 0, 0.75) 0.5px',\r\n    flex: 'none'\r\n  },\r\n  tooltipItemStats: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n\r\n    '& .MuiTypography-body2': {\r\n      overflowWrap: 'anywhere'\r\n    }\r\n  }\r\n}));\r\n\r\nexport { useStyles };\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport { Box, CardContent, MenuItem, Select, Typography, useMediaQuery } from '@mui/material';\r\nimport { useStyles } from './DeterminantsGraphMUI';\r\nimport {\r\n  Bar,\r\n  BarChart,\r\n  CartesianGrid,\r\n  Label,\r\n  Legend,\r\n  ResponsiveContainer,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip as ChartTooltip,\r\n  Brush\r\n} from 'recharts';\r\nimport { useAppDispatch, useAppSelector } from '../../../../stores/hooks';\r\nimport { setDeterminantsGraphDrugClass, setDeterminantsGraphView } from '../../../../stores/slices/graphSlice';\r\nimport { drugClasses } from '../../../../util/drugs';\r\nimport { useEffect, useState } from 'react';\r\nimport { colorForDrugClasses, hoverColor } from '../../../../util/colorHelper';\r\n\r\nconst dataViewOptions = [\r\n  { label: 'Number of genomes', value: 'number', graphLabel: 'Number of occurrences' },\r\n  { label: 'Percentage per genotype', value: 'percentage', graphLabel: '% Genomes' }\r\n];\r\n\r\nexport const DeterminantsGraph = () => {\r\n  const classes = useStyles();\r\n  const [plotChart, setPlotChart] = useState(() => {});\r\n  const matches500 = useMediaQuery('(max-width:500px)');\r\n\r\n  const dispatch = useAppDispatch();\r\n  const canGetData = useAppSelector((state) => state.dashboard.canGetData);\r\n  const genotypesDrugClassesData = useAppSelector((state) => state.graph.genotypesDrugClassesData);\r\n  const determinantsGraphView = useAppSelector((state) => state.graph.determinantsGraphView);\r\n  const determinantsGraphDrugClass = useAppSelector((state) => state.graph.determinantsGraphDrugClass);\r\n\r\n  function getDomain() {\r\n    return determinantsGraphView === 'number' ? undefined : [0, 100];\r\n  }\r\n\r\n  function getData() {\r\n    if (determinantsGraphView === 'number') {\r\n      return genotypesDrugClassesData[determinantsGraphDrugClass];\r\n    }\r\n\r\n    const exclusions = ['name', 'totalCount', 'resistantCount'];\r\n    let genotypeDrugClassesDataPercentage = structuredClone(genotypesDrugClassesData[determinantsGraphDrugClass] ?? []);\r\n    genotypeDrugClassesDataPercentage = genotypeDrugClassesDataPercentage.map((item) => {\r\n      const keys = Object.keys(item).filter((x) => !exclusions.includes(x));\r\n\r\n      keys.forEach((key) => {\r\n        item[key] = Number(((item[key] / item.totalCount) * 100).toFixed(2));\r\n      });\r\n\r\n      return item;\r\n    });\r\n\r\n    return genotypeDrugClassesDataPercentage;\r\n  }\r\n\r\n  function getTooltipData(label, payload) {\r\n    const data = genotypesDrugClassesData[determinantsGraphDrugClass].find((item) => item.name === label);\r\n\r\n    if (data) {\r\n      const tooltipData = [];\r\n\r\n      payload.forEach((item) => {\r\n        if (item.value === 0) {\r\n          return;\r\n        }\r\n\r\n        const count = data[item.name];\r\n        tooltipData.push({\r\n          name: item.name,\r\n          color: item.color,\r\n          count,\r\n          percentage: Number(((count / data.totalCount) * 100).toFixed(2))\r\n        });\r\n      });\r\n\r\n      tooltipData.sort((a, b) => a.name.localeCompare(b.name));\r\n      return tooltipData;\r\n    }\r\n  }\r\n\r\n  function handleChangeDataView(event) {\r\n    dispatch(setDeterminantsGraphView(event.target.value));\r\n  }\r\n\r\n  function handleChangeDrugClass(event) {\r\n    dispatch(setDeterminantsGraphDrugClass(event.target.value));\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (canGetData) {\r\n      setPlotChart(() => {\r\n        return (\r\n          <ResponsiveContainer width=\"100%\">\r\n            <BarChart data={getData()} maxBarSize={70}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" />\r\n              <XAxis dataKey=\"name\" interval=\"preserveStartEnd\" tick={{ fontSize: 14 }} />\r\n              <YAxis domain={getDomain()} allowDataOverflow={true} allowDecimals={false}>\r\n                <Label angle={-90} position=\"insideLeft\" className={classes.graphLabel}>\r\n                  {dataViewOptions.find((option) => option.value === determinantsGraphView).label}\r\n                </Label>\r\n              </YAxis>\r\n              {(genotypesDrugClassesData[determinantsGraphDrugClass] ?? []).length > 0 && (\r\n                <Brush dataKey=\"name\" height={20} stroke={'rgb(31, 187, 211)'} />\r\n              )}\r\n\r\n              <Legend\r\n                content={(props) => {\r\n                  const { payload } = props;\r\n                  return (\r\n                    <div className={classes.legendWrapper}>\r\n                      {payload.map((entry, index) => {\r\n                        const { dataKey, color } = entry;\r\n                        return (\r\n                          <div key={`distribution-legend-${index}`} className={classes.legendItemWrapper}>\r\n                            <Box className={classes.colorCircle} style={{ backgroundColor: color }} />\r\n                            <Typography variant=\"caption\">{dataKey}</Typography>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  );\r\n                }}\r\n              />\r\n\r\n              <ChartTooltip\r\n                position={{ x: matches500 ? 0 : 60, y: matches500 ? 310 : 410 }}\r\n                cursor={{ fill: hoverColor }}\r\n                wrapperStyle={{ outline: 'none', zIndex: 1 }}\r\n                content={({ payload, active, label }) => {\r\n                  if (payload !== null && active) {\r\n                    const data = getTooltipData(label, payload);\r\n\r\n                    return (\r\n                      <div className={classes.tooltip}>\r\n                        <div className={classes.tooltipTitle}>\r\n                          <Typography variant=\"h5\" fontWeight=\"600\">\r\n                            {label}\r\n                          </Typography>\r\n                          <Typography variant=\"subtitle1\">{`N = ${payload[0].payload.totalCount}`}</Typography>\r\n                        </div>\r\n                        <div className={classes.tooltipContent}>\r\n                          {data.map((item, index) => {\r\n                            return (\r\n                              <div key={`tooltip-content-${index}`} className={classes.tooltipItemWrapper}>\r\n                                <Box\r\n                                  className={classes.tooltipItemBox}\r\n                                  style={{\r\n                                    backgroundColor: item.color\r\n                                  }}\r\n                                />\r\n                                <div className={classes.tooltipItemStats}>\r\n                                  <Typography variant=\"body2\" fontWeight=\"500\" lineHeight={undefined}>\r\n                                    {item.name}\r\n                                  </Typography>\r\n                                  <Typography\r\n                                    fontSize=\"12px\"\r\n                                    noWrap\r\n                                    lineHeight={undefined}\r\n                                  >{`N = ${item.count}`}</Typography>\r\n                                  <Typography\r\n                                    fontSize=\"10px\"\r\n                                    lineHeight={undefined}\r\n                                  >{`${item.percentage}%`}</Typography>\r\n                                </div>\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  return null;\r\n                }}\r\n              />\r\n\r\n              {colorForDrugClasses[determinantsGraphDrugClass]?.map((option, index) => (\r\n                <Bar\r\n                  key={`determinants-bar-${index}`}\r\n                  dataKey={option.name}\r\n                  name={option.name}\r\n                  stackId={0}\r\n                  fill={option.color}\r\n                />\r\n              ))}\r\n            </BarChart>\r\n          </ResponsiveContainer>\r\n        );\r\n      });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [genotypesDrugClassesData, determinantsGraphView, determinantsGraphDrugClass, matches500]);\r\n\r\n  return (\r\n    <CardContent className={classes.determinantsGraph}>\r\n      <div className={classes.selectsWrapper}>\r\n        <div className={classes.selectWrapper}>\r\n          <Typography variant=\"caption\" className={classes.selectLabel}>\r\n            Select drug class\r\n          </Typography>\r\n          <Select\r\n            className={classes.select}\r\n            value={determinantsGraphDrugClass}\r\n            onChange={handleChangeDrugClass}\r\n            inputProps={{ className: classes.selectInput }}\r\n            MenuProps={{ classes: { list: classes.selectMenu } }}\r\n          >\r\n            {drugClasses.map((option, index) => {\r\n              return (\r\n                <MenuItem key={index + 'determinants-drug-classes'} value={option}>\r\n                  {option === 'Ciprofloxacin NS' ? 'Ciprofloxacin' : option}\r\n                </MenuItem>\r\n              );\r\n            })}\r\n          </Select>\r\n        </div>\r\n        <div className={classes.selectWrapper}>\r\n          <Typography variant=\"caption\" className={classes.selectLabel}>\r\n            Data view\r\n          </Typography>\r\n          <Select\r\n            className={classes.select}\r\n            value={determinantsGraphView}\r\n            onChange={handleChangeDataView}\r\n            inputProps={{ className: classes.selectInput }}\r\n            MenuProps={{ classes: { list: classes.selectMenu } }}\r\n          >\r\n            {dataViewOptions.map((option, index) => {\r\n              return (\r\n                <MenuItem key={index + 'determinants-dataview'} value={option.value}>\r\n                  {option.label}\r\n                </MenuItem>\r\n              );\r\n            })}\r\n          </Select>\r\n        </div>\r\n      </div>\r\n      <div className={classes.graphWrapper}>\r\n        <div className={classes.graph} id=\"RDWG\">\r\n          {plotChart}\r\n        </div>\r\n      </div>\r\n    </CardContent>\r\n  );\r\n};\r\n","import { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  frequenciesGraph: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    height: '100%',\r\n    maxWidth: '920px',\r\n    width: '-webkit-fill-available'\r\n  },\r\n  selectsWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    rowGap: '4px',\r\n    width: '70%',\r\n\r\n    '@media (max-width: 1000px)': {\r\n      width: '100%'\r\n    }\r\n  },\r\n  selectWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    rowGap: '8px',\r\n    width: '100%',\r\n    alignItems: 'center'\r\n  },\r\n  select: {\r\n    width: '100%'\r\n  },\r\n  labelWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    columnGap: '8px'\r\n  },\r\n  labelTooltipIcon: {\r\n    cursor: 'pointer'\r\n  },\r\n  dataViewSelectInput: {\r\n    fontSize: '14px !important',\r\n    fontWeight: '600 !important',\r\n    padding: '8px 32px 8px 8px !important'\r\n  },\r\n  dataViewSelectMenu: {\r\n    '& .MuiMenuItem-root': {\r\n      fontSize: '14px'\r\n    }\r\n  },\r\n  genotypesSelectInput: {\r\n    fontSize: '14px !important',\r\n    fontWeight: '600 !important',\r\n    padding: '8px 32px 8px 8px !important',\r\n    marginRight: '-80px !important'\r\n  },\r\n  genotypesSelectButton: {\r\n    height: '20px',\r\n    fontSize: '10px !important',\r\n    padding: '3px 5px !important',\r\n    whiteSpace: 'nowrap',\r\n    position: 'absolute',\r\n    right: '18px'\r\n  },\r\n  genotypesMenuPaper: {\r\n    maxHeight: '350px !important'\r\n  },\r\n  genotypesSelectMenu: {\r\n    '& .MuiCheckbox-root': {\r\n      padding: '0px 8px 0px 0px'\r\n    },\r\n    '& .MuiTypography-root': {\r\n      fontSize: '14px'\r\n    }\r\n  },\r\n  graphWrapper: {\r\n    paddingTop: '16px',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    gap: '16px',\r\n    height: '560px',\r\n    width: '100%',\r\n\r\n    '@media (max-width: 500px)': {\r\n      height: '460px'\r\n    }\r\n  },\r\n  graph: {\r\n    height: '100%',\r\n    width: '100%'\r\n  },\r\n  graphLabel: {\r\n    textAnchor: 'middle'\r\n  },\r\n  legendWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    overflowX: 'auto',\r\n    flexWrap: 'wrap',\r\n    height: '110px',\r\n    gap: '4px',\r\n    padding: '8px 0px 4px',\r\n    marginLeft: '60px'\r\n  },\r\n  legendItemWrapper: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    columnGap: '4px',\r\n    paddingRight: '8px'\r\n  },\r\n  colorCircle: {\r\n    height: '10px',\r\n    width: '10px',\r\n    borderRadius: '50%',\r\n    minWidth: '10px'\r\n  },\r\n  tooltip: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    backgroundColor: '#fff',\r\n    padding: '16px',\r\n    border: 'solid rgba(0, 0, 0, 0.25) 1px',\r\n    rowGap: '16px'\r\n  },\r\n  tooltipTitle: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    columnGap: '8px',\r\n    alignItems: 'flex-end'\r\n  },\r\n  tooltipContent: {\r\n    display: 'grid',\r\n    gap: '8px',\r\n    gridTemplateColumns: 'repeat(12, 1fr)',\r\n    width: '450px',\r\n\r\n    '@media (max-width: 1200px)': {\r\n      width: '320px'\r\n    },\r\n\r\n    '@media (max-width: 1000px)': {\r\n      width: '450px'\r\n    },\r\n\r\n    '@media (max-width: 650px)': {\r\n      width: '320px'\r\n    },\r\n\r\n    '@media (max-width: 400px)': {\r\n      width: '275px'\r\n    }\r\n  },\r\n  tooltipItemWrapper: {\r\n    gridColumn: 'span 6',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    columnGap: '8px'\r\n  },\r\n  tooltipItemBox: {\r\n    height: '18px',\r\n    width: '18px',\r\n    border: 'solid rgb(0, 0, 0, 0.75) 0.5px',\r\n    flex: 'none'\r\n  },\r\n  tooltipItemStats: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n\r\n    '& .MuiTypography-body2': {\r\n      overflowWrap: 'anywhere'\r\n    }\r\n  }\r\n}));\r\n\r\nexport { useStyles };\r\n","import { lightGrey } from '../../../util/colorHelper';\r\n\r\nexport const getColorForDrug = (drug) => {\r\n  switch (drug) {\r\n    case 'Ampicillin':\r\n    case 'Aminoglycosides':\r\n      return 'rgb(129,178,210)';\r\n\r\n    case 'Azithromycin':\r\n    case 'Carbapenems':\r\n      return 'rgb(144,211,199)';\r\n\r\n    case 'Chloramphenicol':\r\n    case 'Cephalosporins (3rd gen.)':\r\n      return 'rgb(249,129,117)';\r\n\r\n    // case 'Co-trimoxazole':\r\n    case 'Trimethoprim-sulfamethoxazole':\r\n    case 'Cephalosporins (3rd gen.) + β-lactamase inhibitors':\r\n      return 'rgb(252,180,105)';\r\n\r\n    // case 'ESBL':\r\n    case 'Ceftriaxone':\r\n    case 'Colistin':\r\n      return '#DB90F0';\r\n\r\n    // case 'Fluoroquinolones (CipI)':\r\n    case 'Fosfomycin':\r\n      return '#98fb98';\r\n\r\n    // case 'Fluoroquinolones (CipNS)':\r\n    case 'Ciprofloxacin NS':\r\n    case 'Penicillins':\r\n      return 'rgb(255,236,120)';\r\n\r\n    // case 'Fluoroquinolones (CipR)':\r\n    case 'Ciprofloxacin R':\r\n    case 'Fluoroquinolones':\r\n      return '#9e9ac8';\r\n\r\n    case 'Sulphonamides':\r\n    case 'Sulfonamides':\r\n      return 'rgb(180,221,112)';\r\n\r\n    case 'Susceptible':\r\n      return lightGrey;\r\n\r\n    case 'Tetracyclines':\r\n    case 'Tetracycline':\r\n      return 'rgb(251,207,229)';\r\n\r\n    case 'Trimethoprim':\r\n      return 'rgb(102,102,255)';\r\n\r\n    case 'Penicillins + β-lactamase inhibitors':\r\n      return '#F3AAB9';\r\n\r\n    case 'Phenicols':\r\n      return '#FBCFBA';\r\n\r\n    case 'Tigecycline':\r\n      return '#54C2FF';\r\n\r\n    case 'XDR':\r\n      return '#000';\r\n\r\n    case 'MDR':\r\n      return '#B80F0F';\r\n\r\n    default:\r\n      return '#F5F4F6';\r\n  }\r\n};\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport {\r\n  Box,\r\n  Button,\r\n  CardContent,\r\n  Checkbox,\r\n  ListItemText,\r\n  MenuItem,\r\n  Select,\r\n  Tooltip,\r\n  Typography,\r\n  useMediaQuery\r\n} from '@mui/material';\r\nimport { useStyles } from './FrequenciesGraphMUI';\r\nimport { InfoOutlined } from '@mui/icons-material';\r\nimport {\r\n  Bar,\r\n  BarChart,\r\n  CartesianGrid,\r\n  ResponsiveContainer,\r\n  Tooltip as ChartTooltip,\r\n  XAxis,\r\n  YAxis,\r\n  Label,\r\n  Legend,\r\n  Brush\r\n} from 'recharts';\r\nimport { useAppDispatch, useAppSelector } from '../../../../stores/hooks';\r\nimport { setFrequenciesGraphSelectedGenotypes, setFrequenciesGraphView } from '../../../../stores/slices/graphSlice';\r\nimport { useEffect, useState } from 'react';\r\nimport { hoverColor } from '../../../../util/colorHelper';\r\nimport { getColorForDrug } from '../graphColorHelper';\r\nimport { drugs } from '../../../../util/drugs';\r\n\r\nconst dataViewOptions = [\r\n  { label: 'Number of genomes', value: 'number' },\r\n  { label: 'Percentage within genotype', value: 'percentage' }\r\n];\r\n\r\nexport const FrequenciesGraph = () => {\r\n  const classes = useStyles();\r\n  const [plotChart, setPlotChart] = useState(() => {});\r\n  const matches500 = useMediaQuery('(max-width:500px)');\r\n\r\n  const dispatch = useAppDispatch();\r\n  const canGetData = useAppSelector((state) => state.dashboard.canGetData);\r\n  const genotypesDrugsData = useAppSelector((state) => state.graph.genotypesDrugsData);\r\n  const frequenciesGraphView = useAppSelector((state) => state.graph.frequenciesGraphView);\r\n  const frequenciesGraphSelectedGenotypes = useAppSelector((state) => state.graph.frequenciesGraphSelectedGenotypes);\r\n\r\n  function getSelectGenotypeLabel(genotype) {\r\n    const percentage = Number(((genotype.Susceptible / genotype.totalCount) * 100).toFixed(2));\r\n\r\n    return `${genotype.name} (total N=${genotype.totalCount}, ${percentage}% Susceptible)`;\r\n  }\r\n\r\n  function getDomain() {\r\n    return frequenciesGraphView === 'number' ? undefined : [0, 100];\r\n  }\r\n\r\n  function getData() {\r\n    const data = genotypesDrugsData.filter((genotype) => frequenciesGraphSelectedGenotypes.includes(genotype.name));\r\n\r\n    if (frequenciesGraphView === 'number') {\r\n      return data;\r\n    }\r\n\r\n    const exclusions = ['name', 'totalCount', 'resistantCount'];\r\n    let genotypeDataPercentage = structuredClone(data);\r\n    genotypeDataPercentage = genotypeDataPercentage.map((item) => {\r\n      const keys = Object.keys(item).filter((x) => !exclusions.includes(x));\r\n\r\n      keys.forEach((key) => {\r\n        item[key] = Number(((item[key] / item.totalCount) * 100).toFixed(2));\r\n      });\r\n\r\n      return item;\r\n    });\r\n\r\n    return genotypeDataPercentage;\r\n  }\r\n\r\n  function handleChangeDataView(event) {\r\n    dispatch(setFrequenciesGraphView(event.target.value));\r\n  }\r\n\r\n  function getTooltipData(label, payload) {\r\n    const data = genotypesDrugsData.find((item) => item.name === label);\r\n\r\n    if (data) {\r\n      const tooltipData = [];\r\n\r\n      payload.forEach((item) => {\r\n        if (item.value === 0) {\r\n          return;\r\n        }\r\n\r\n        const count = data[item.name];\r\n        tooltipData.push({\r\n          name: item.name,\r\n          color: item.color,\r\n          count,\r\n          percentage: Number(((count / data.totalCount) * 100).toFixed(2))\r\n        });\r\n      });\r\n\r\n      tooltipData.sort((a, b) => b.count - a.count);\r\n      return tooltipData;\r\n    }\r\n  }\r\n\r\n  function handleChangeSelectedGenotypes({ event = null, all = false }) {\r\n    if (all) {\r\n      dispatch(setFrequenciesGraphSelectedGenotypes([]));\r\n      return;\r\n    }\r\n\r\n    const {\r\n      target: { value }\r\n    } = event;\r\n\r\n    if (frequenciesGraphSelectedGenotypes.length === 7 && value.length > 7) {\r\n      return;\r\n    }\r\n\r\n    dispatch(setFrequenciesGraphSelectedGenotypes(value));\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (canGetData) {\r\n      setPlotChart(() => {\r\n        return (\r\n          <ResponsiveContainer width=\"100%\">\r\n            <BarChart data={getData()}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" />\r\n              <XAxis dataKey=\"name\" interval=\"preserveStartEnd\" tick={{ fontSize: 14 }} />\r\n              <YAxis domain={getDomain()} allowDecimals={false}>\r\n                <Label angle={-90} position=\"insideLeft\" className={classes.graphLabel}>\r\n                  {dataViewOptions.find((option) => option.value === frequenciesGraphView).label}\r\n                </Label>\r\n              </YAxis>\r\n              {genotypesDrugsData.length > 0 && <Brush dataKey=\"name\" height={20} stroke={'rgb(31, 187, 211)'} />}\r\n\r\n              <Legend\r\n                content={(props) => {\r\n                  const { payload } = props;\r\n                  return (\r\n                    <div className={classes.legendWrapper}>\r\n                      {payload.map((entry, index) => {\r\n                        const { dataKey, color } = entry;\r\n                        return (\r\n                          <div key={`frequencies-legend-${index}`} className={classes.legendItemWrapper}>\r\n                            <Box className={classes.colorCircle} style={{ backgroundColor: color }} />\r\n                            <Typography variant=\"caption\">{dataKey}</Typography>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  );\r\n                }}\r\n              />\r\n\r\n              <ChartTooltip\r\n                position={{ x: matches500 ? 0 : 60, y: matches500 ? 310 : 410 }}\r\n                cursor={{ fill: hoverColor }}\r\n                wrapperStyle={{ outline: 'none', zIndex: 1 }}\r\n                content={({ payload, active, label }) => {\r\n                  if (payload !== null && active) {\r\n                    const data = getTooltipData(label, payload);\r\n\r\n                    return (\r\n                      <div className={classes.tooltip}>\r\n                        <div className={classes.tooltipTitle}>\r\n                          <Typography variant=\"h5\" fontWeight=\"600\">\r\n                            {label}\r\n                          </Typography>\r\n                          <Typography variant=\"subtitle1\">{`N = ${payload[0].payload.totalCount}`}</Typography>\r\n                        </div>\r\n                        <div className={classes.tooltipContent}>\r\n                          {data.map((item, index) => {\r\n                            return (\r\n                              <div key={`tooltip-content-${index}`} className={classes.tooltipItemWrapper}>\r\n                                <Box\r\n                                  className={classes.tooltipItemBox}\r\n                                  style={{\r\n                                    backgroundColor: item.color\r\n                                  }}\r\n                                />\r\n                                <div className={classes.tooltipItemStats}>\r\n                                  <Typography variant=\"body2\" fontWeight=\"500\" lineHeight={undefined}>\r\n                                    {item.name}\r\n                                  </Typography>\r\n                                  <Typography\r\n                                    fontSize=\"12px\"\r\n                                    noWrap\r\n                                    lineHeight={undefined}\r\n                                  >{`N = ${item.count}`}</Typography>\r\n                                  <Typography\r\n                                    fontSize=\"10px\"\r\n                                    lineHeight={undefined}\r\n                                  >{`${item.percentage}%`}</Typography>\r\n                                </div>\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  return null;\r\n                }}\r\n              />\r\n\r\n              {drugs.map((option, index) => (\r\n                <Bar key={`frequencies-bar-${index}`} dataKey={option} fill={getColorForDrug(option)} />\r\n              ))}\r\n            </BarChart>\r\n          </ResponsiveContainer>\r\n        );\r\n      });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [genotypesDrugsData, frequenciesGraphView, frequenciesGraphSelectedGenotypes, matches500]);\r\n\r\n  return (\r\n    <CardContent className={classes.frequenciesGraph}>\r\n      <div className={classes.selectsWrapper}>\r\n        <div className={classes.labelWrapper}>\r\n          <Typography variant=\"caption\">Data view</Typography>\r\n          <Tooltip title=\"Select up to 7 genotypes\" placement=\"top\">\r\n            <InfoOutlined color=\"action\" fontSize=\"small\" className={classes.labelTooltipIcon} />\r\n          </Tooltip>\r\n        </div>\r\n        <div className={classes.selectWrapper}>\r\n          <Select\r\n            className={classes.select}\r\n            value={frequenciesGraphView}\r\n            onChange={handleChangeDataView}\r\n            inputProps={{ className: classes.dataViewSelectInput }}\r\n            MenuProps={{ classes: { list: classes.dataViewSelectMenu } }}\r\n          >\r\n            {dataViewOptions.map((option, index) => {\r\n              return (\r\n                <MenuItem key={index + 'frequencies-dataview'} value={option.value}>\r\n                  {option.label}\r\n                </MenuItem>\r\n              );\r\n            })}\r\n          </Select>\r\n          <Select\r\n            className={classes.select}\r\n            multiple\r\n            value={frequenciesGraphSelectedGenotypes}\r\n            onChange={(event) => handleChangeSelectedGenotypes({ event })}\r\n            displayEmpty\r\n            endAdornment={\r\n              <Button\r\n                variant=\"outlined\"\r\n                className={classes.genotypesSelectButton}\r\n                onClick={() => handleChangeSelectedGenotypes({ all: true })}\r\n                disabled={frequenciesGraphSelectedGenotypes.length === 0}\r\n                color=\"error\"\r\n              >\r\n                Clear All\r\n              </Button>\r\n            }\r\n            inputProps={{ className: classes.genotypesSelectInput }}\r\n            MenuProps={{ classes: { paper: classes.genotypesMenuPaper, list: classes.genotypesSelectMenu } }}\r\n            renderValue={(selected) => <div>{`${selected.length} of ${genotypesDrugsData.length} selected`}</div>}\r\n          >\r\n            {genotypesDrugsData.map((genotype, index) => (\r\n              <MenuItem key={`frequencies-option-${index}`} value={genotype.name}>\r\n                <Checkbox checked={frequenciesGraphSelectedGenotypes.indexOf(genotype.name) > -1} />\r\n                <ListItemText primary={getSelectGenotypeLabel(genotype)} />\r\n              </MenuItem>\r\n            ))}\r\n          </Select>\r\n        </div>\r\n      </div>\r\n      <div className={classes.graphWrapper}>\r\n        <div className={classes.graph} id=\"RFWG\">\r\n          {plotChart}\r\n        </div>\r\n      </div>\r\n    </CardContent>\r\n  );\r\n};\r\n","import { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  drugResistanceGraph: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-end',\r\n    height: '100%',\r\n    maxWidth: '920px',\r\n    width: '-webkit-fill-available'\r\n  },\r\n  selectWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    width: '70%',\r\n    alignItems: 'center',\r\n\r\n    '@media (max-width: 1000px)': {\r\n      width: '100%'\r\n    }\r\n  },\r\n  select: {\r\n    width: '100%'\r\n  },\r\n  labelWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    columnGap: '8px',\r\n    paddingBottom: '4px',\r\n    width: '100%'\r\n  },\r\n  labelTooltipIcon: {\r\n    cursor: 'pointer'\r\n  },\r\n  selectInput: {\r\n    fontSize: '14px !important',\r\n    fontWeight: '600 !important',\r\n    padding: '8px 32px 8px 8px !important',\r\n    marginRight: '-80px !important'\r\n  },\r\n  selectButton: {\r\n    height: '20px',\r\n    fontSize: '10px !important',\r\n    padding: '3px 5px !important',\r\n    whiteSpace: 'nowrap',\r\n    position: 'absolute',\r\n    right: '18px'\r\n  },\r\n  menuPaper: {\r\n    maxHeight: '350px !important'\r\n  },\r\n  selectMenu: {\r\n    '& .MuiCheckbox-root': {\r\n      padding: '0px 8px 0px 0px'\r\n    },\r\n    '& .MuiTypography-root': {\r\n      fontSize: '14px'\r\n    }\r\n  },\r\n  graphWrapper: {\r\n    paddingTop: '16px',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    gap: '16px',\r\n    height: '560px',\r\n    width: '100%',\r\n\r\n    '@media (max-width: 500px)': {\r\n      height: '460px'\r\n    }\r\n  },\r\n  graph: {\r\n    height: '100%',\r\n    width: '100%'\r\n  },\r\n  graphLabel: {\r\n    textAnchor: 'middle'\r\n  },\r\n  legendWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    overflowX: 'auto',\r\n    flexWrap: 'wrap',\r\n    height: '110px',\r\n    gap: '4px',\r\n    padding: '8px 0px 4px',\r\n    marginLeft: '60px'\r\n  },\r\n  legendItemWrapper: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    columnGap: '4px',\r\n    paddingRight: '8px'\r\n  },\r\n  colorCircle: {\r\n    height: '10px',\r\n    width: '10px',\r\n    borderRadius: '50%',\r\n    minWidth: '10px'\r\n  },\r\n  tooltip: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    backgroundColor: '#fff',\r\n    padding: '16px',\r\n    border: 'solid rgba(0, 0, 0, 0.25) 1px',\r\n    rowGap: '16px'\r\n  },\r\n  tooltipTitle: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    columnGap: '8px',\r\n    alignItems: 'flex-end'\r\n  },\r\n  tooltipContent: {\r\n    display: 'grid',\r\n    gap: '8px',\r\n    gridTemplateColumns: 'repeat(12, 1fr)',\r\n    width: '450px',\r\n\r\n    '@media (max-width: 1200px)': {\r\n      width: '320px'\r\n    },\r\n\r\n    '@media (max-width: 1000px)': {\r\n      width: '450px'\r\n    },\r\n\r\n    '@media (max-width: 650px)': {\r\n      width: '320px'\r\n    },\r\n\r\n    '@media (max-width: 400px)': {\r\n      width: '275px'\r\n    }\r\n  },\r\n  tooltipItemWrapper: {\r\n    gridColumn: 'span 6',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    columnGap: '8px'\r\n  },\r\n  tooltipItemBox: {\r\n    height: '18px',\r\n    width: '18px',\r\n    border: 'solid rgb(0, 0, 0, 0.75) 0.5px',\r\n    flex: 'none'\r\n  },\r\n  tooltipItemStats: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n\r\n    '& .MuiTypography-body2': {\r\n      overflowWrap: 'anywhere'\r\n    }\r\n  }\r\n}));\r\n\r\nexport { useStyles };\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport {\r\n  Box,\r\n  Button,\r\n  CardContent,\r\n  Checkbox,\r\n  ListItemText,\r\n  MenuItem,\r\n  Select,\r\n  Tooltip,\r\n  Typography,\r\n  useMediaQuery\r\n} from '@mui/material';\r\nimport { useStyles } from './DrugResistanceGraphMUI';\r\nimport {\r\n  Brush,\r\n  CartesianGrid,\r\n  Legend,\r\n  ResponsiveContainer,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip as ChartTooltip,\r\n  LineChart,\r\n  Line,\r\n  Label\r\n} from 'recharts';\r\nimport { useAppDispatch, useAppSelector } from '../../../../stores/hooks';\r\nimport { setDrugResistanceGraphView } from '../../../../stores/slices/graphSlice';\r\nimport { drugsForDrugResistanceGraph } from '../../../../util/drugs';\r\nimport { useEffect, useState } from 'react';\r\nimport { hoverColor } from '../../../../util/colorHelper';\r\nimport { getColorForDrug } from '../graphColorHelper';\r\nimport { InfoOutlined } from '@mui/icons-material';\r\n\r\nexport const DrugResistanceGraph = () => {\r\n  const classes = useStyles();\r\n  const [plotChart, setPlotChart] = useState(() => {});\r\n  const matches500 = useMediaQuery('(max-width:500px)');\r\n\r\n  const dispatch = useAppDispatch();\r\n  const drugResistanceGraphView = useAppSelector((state) => state.graph.drugResistanceGraphView);\r\n  const drugsYearData = useAppSelector((state) => state.graph.drugsYearData);\r\n  const canGetData = useAppSelector((state) => state.dashboard.canGetData);\r\n  const timeInitial = useAppSelector((state) => state.dashboard.timeInitial);\r\n  const timeFinal = useAppSelector((state) => state.dashboard.timeFinal);\r\n\r\n  function getData() {\r\n    const exclusions = ['name', 'count'];\r\n    let drugDataPercentage = structuredClone(drugsYearData);\r\n    drugDataPercentage = drugDataPercentage.map((item) => {\r\n      const keys = Object.keys(item).filter((x) => !exclusions.includes(x));\r\n\r\n      keys.forEach((key) => {\r\n        item[key] = Number(((item[key] / item.count) * 100).toFixed(2));\r\n      });\r\n\r\n      return item;\r\n    });\r\n\r\n    return drugDataPercentage;\r\n  }\r\n\r\n  function getTooltipData(label, payload) {\r\n    const data = drugsYearData.find((item) => item.name === label);\r\n\r\n    if (data) {\r\n      const tooltipData = [];\r\n\r\n      payload.forEach((item) => {\r\n        if (item.value === 0) {\r\n          return;\r\n        }\r\n\r\n        const count = data[item.name];\r\n        tooltipData.push({\r\n          name: item.name,\r\n          color: item.color,\r\n          count,\r\n          percentage: Number(((count / data.count) * 100).toFixed(2))\r\n        });\r\n      });\r\n\r\n      tooltipData.sort((a, b) => b.count - a.count);\r\n      return tooltipData;\r\n    }\r\n  }\r\n\r\n  function handleChangeDrugsView({ event = null, all = false }) {\r\n    let newValues = [];\r\n\r\n    if (all) {\r\n      if (drugResistanceGraphView.length === drugsForDrugResistanceGraph.length) {\r\n        newValues = [];\r\n      } else {\r\n        newValues = drugsForDrugResistanceGraph.slice();\r\n      }\r\n    } else {\r\n      const {\r\n        target: { value }\r\n      } = event;\r\n      newValues = value;\r\n    }\r\n\r\n    newValues.sort((a, b) => a.localeCompare(b));\r\n    dispatch(setDrugResistanceGraphView(newValues));\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (canGetData) {\r\n      const doc = document.getElementById('DRT');\r\n      const lines = doc.getElementsByClassName('recharts-line');\r\n\r\n      for (let index = 0; index < lines.length; index++) {\r\n        const hasValue = drugResistanceGraphView.some((value) => drugsForDrugResistanceGraph.indexOf(value) === index);\r\n        lines[index].style.display = hasValue ? 'block' : 'none';\r\n      }\r\n\r\n      setPlotChart(() => {\r\n        return (\r\n          <ResponsiveContainer width=\"100%\">\r\n            <LineChart data={getData()}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" />\r\n              <XAxis\r\n                tickCount={20}\r\n                allowDecimals={false}\r\n                padding={{ left: 20, right: 20 }}\r\n                dataKey=\"name\"\r\n                domain={['dataMin', 'dataMax']}\r\n                interval={'preserveStartEnd'}\r\n                tick={{ fontSize: 14 }}\r\n              />\r\n              <YAxis tickCount={6} padding={{ top: 20, bottom: 20 }} allowDecimals={false}>\r\n                <Label angle={-90} position=\"insideLeft\" className={classes.graphLabel}>\r\n                  Resistant (%)\r\n                </Label>\r\n              </YAxis>\r\n              {drugsYearData.length > 0 && <Brush dataKey=\"name\" height={20} stroke={'rgb(31, 187, 211)'} />}\r\n\r\n              <Legend\r\n                content={(props) => {\r\n                  const { payload } = props;\r\n                  return (\r\n                    <div className={classes.legendWrapper}>\r\n                      {payload.map((entry, index) => {\r\n                        const { dataKey, color } = entry;\r\n                        return (\r\n                          <div key={`drug-resistance-legend-${index}`} className={classes.legendItemWrapper}>\r\n                            <Box className={classes.colorCircle} style={{ backgroundColor: color }} />\r\n                            <Typography variant=\"caption\">{dataKey}</Typography>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  );\r\n                }}\r\n              />\r\n\r\n              <ChartTooltip\r\n                position={{ x: matches500 ? 0 : 60, y: matches500 ? 310 : 410 }}\r\n                cursor={{ fill: hoverColor }}\r\n                wrapperStyle={{ outline: 'none', zIndex: 1 }}\r\n                content={({ payload, active, label }) => {\r\n                  if (payload !== null && active) {\r\n                    const data = getTooltipData(label, payload);\r\n\r\n                    return (\r\n                      <div className={classes.tooltip}>\r\n                        <div className={classes.tooltipTitle}>\r\n                          <Typography variant=\"h5\" fontWeight=\"600\">\r\n                            {label}\r\n                          </Typography>\r\n                          <Typography variant=\"subtitle1\">{`N = ${payload[0].payload.count}`}</Typography>\r\n                        </div>\r\n                        <div className={classes.tooltipContent}>\r\n                          {data.map((item, index) => {\r\n                            return (\r\n                              <div key={`tooltip-content-${index}`} className={classes.tooltipItemWrapper}>\r\n                                <Box\r\n                                  className={classes.tooltipItemBox}\r\n                                  style={{\r\n                                    backgroundColor: item.color\r\n                                  }}\r\n                                />\r\n                                <div className={classes.tooltipItemStats}>\r\n                                  <Typography variant=\"body2\" fontWeight=\"500\" lineHeight={undefined}>\r\n                                    {item.name}\r\n                                  </Typography>\r\n                                  <Typography\r\n                                    fontSize=\"12px\"\r\n                                    noWrap\r\n                                    lineHeight={undefined}\r\n                                  >{`N = ${item.count}`}</Typography>\r\n                                  <Typography\r\n                                    fontSize=\"10px\"\r\n                                    lineHeight={undefined}\r\n                                  >{`${item.percentage}%`}</Typography>\r\n                                </div>\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  return null;\r\n                }}\r\n              />\r\n\r\n              {drugsForDrugResistanceGraph.map((option, index) => (\r\n                <Line\r\n                  key={`drug-resistance-bar-${index}`}\r\n                  dataKey={option}\r\n                  strokeWidth={2}\r\n                  stroke={getColorForDrug(option)}\r\n                  connectNulls\r\n                  type=\"monotone\"\r\n                  activeDot={timeInitial === timeFinal ? true : false}\r\n                />\r\n              ))}\r\n            </LineChart>\r\n          </ResponsiveContainer>\r\n        );\r\n      });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [drugsYearData, drugResistanceGraphView, matches500]);\r\n\r\n  return (\r\n    <CardContent className={classes.drugResistanceGraph}>\r\n      <div className={classes.selectWrapper}>\r\n        <div className={classes.labelWrapper}>\r\n          <Typography variant=\"caption\">Drugs view</Typography>\r\n          <Tooltip\r\n            title=\"The resistance frequencies are only shown for years with N≥10 genomes. When the data is insufficent per year to calculate annual frequencies, there are no data points to show.\"\r\n            placement=\"top\"\r\n          >\r\n            <InfoOutlined color=\"action\" fontSize=\"small\" className={classes.labelTooltipIcon} />\r\n          </Tooltip>\r\n        </div>\r\n        <Select\r\n          className={classes.select}\r\n          multiple\r\n          value={drugResistanceGraphView}\r\n          onChange={(event) => handleChangeDrugsView({ event })}\r\n          displayEmpty\r\n          endAdornment={\r\n            <Button\r\n              variant=\"outlined\"\r\n              className={classes.selectButton}\r\n              onClick={() => handleChangeDrugsView({ all: true })}\r\n              color={drugResistanceGraphView.length === drugsForDrugResistanceGraph.length ? 'error' : 'primary'}\r\n            >\r\n              {drugResistanceGraphView.length === drugsForDrugResistanceGraph.length ? 'Clear All' : 'Select All'}\r\n            </Button>\r\n          }\r\n          inputProps={{ className: classes.selectInput }}\r\n          MenuProps={{ classes: { paper: classes.menuPaper, list: classes.selectMenu } }}\r\n          renderValue={(selected) => (\r\n            <div>{`${selected.length} of ${drugsForDrugResistanceGraph.length} selected`}</div>\r\n          )}\r\n        >\r\n          {drugsForDrugResistanceGraph.map((drug, index) => (\r\n            <MenuItem key={`drug-resistance-option-${index}`} value={drug}>\r\n              <Checkbox checked={drugResistanceGraphView.indexOf(drug) > -1} />\r\n              <ListItemText primary={drug} />\r\n            </MenuItem>\r\n          ))}\r\n        </Select>\r\n      </div>\r\n      <div className={classes.graphWrapper}>\r\n        <div className={classes.graph} id=\"DRT\">\r\n          {plotChart}\r\n        </div>\r\n      </div>\r\n    </CardContent>\r\n  );\r\n};\r\n","import { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  distributionGraph: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-end',\r\n    height: '100%',\r\n    maxWidth: '920px',\r\n    width: '-webkit-fill-available'\r\n  },\r\n  selectWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    width: '70%',\r\n    alignItems: 'center',\r\n\r\n    '@media (max-width: 1000px)': {\r\n      width: '100%'\r\n    }\r\n  },\r\n  select: {\r\n    width: '100%'\r\n  },\r\n  selectInput: {\r\n    fontSize: '14px !important',\r\n    fontWeight: '600 !important',\r\n    padding: '8px 32px 8px 8px !important'\r\n  },\r\n  selectMenu: {\r\n    '& .MuiMenuItem-root': {\r\n      fontSize: '14px'\r\n    }\r\n  },\r\n  selectLabel: {\r\n    paddingBottom: '4px',\r\n    width: '100%'\r\n  },\r\n  graphWrapper: {\r\n    paddingTop: '16px',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    gap: '16px',\r\n    height: '560px',\r\n    width: '100%',\r\n\r\n    '@media (max-width: 500px)': {\r\n      height: '460px'\r\n    }\r\n  },\r\n  graph: {\r\n    height: '100%',\r\n    width: '100%'\r\n  },\r\n  graphLabel: {\r\n    textAnchor: 'middle'\r\n  },\r\n  legendWrapper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    overflowX: 'auto',\r\n    flexWrap: 'wrap',\r\n    height: '110px',\r\n    gap: '4px',\r\n    padding: '8px 0px 4px',\r\n    marginLeft: '60px'\r\n  },\r\n  legendItemWrapper: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    columnGap: '4px',\r\n    paddingRight: '8px'\r\n  },\r\n  colorCircle: {\r\n    height: '10px',\r\n    width: '10px',\r\n    borderRadius: '50%',\r\n    minWidth: '10px'\r\n  },\r\n  tooltip: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    backgroundColor: '#fff',\r\n    padding: '16px',\r\n    border: 'solid rgba(0, 0, 0, 0.25) 1px',\r\n    rowGap: '16px'\r\n  },\r\n  tooltipTitle: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    columnGap: '8px',\r\n    alignItems: 'flex-end'\r\n  },\r\n  tooltipContent: {\r\n    display: 'grid',\r\n    gap: '8px',\r\n    gridTemplateColumns: 'repeat(10, 1fr)',\r\n    width: '540px',\r\n\r\n    '@media (max-width: 1400px)': {\r\n      gridTemplateColumns: 'repeat(12, 1fr)',\r\n      width: '450px'\r\n    },\r\n\r\n    '@media (max-width: 1200px)': {\r\n      width: '320px'\r\n    },\r\n\r\n    '@media (max-width: 1000px)': {\r\n      width: '450px'\r\n    },\r\n\r\n    '@media (max-width: 650px)': {\r\n      width: '320px'\r\n    },\r\n\r\n    '@media (max-width: 400px)': {\r\n      width: '275px'\r\n    }\r\n  },\r\n  tooltipItemWrapper: {\r\n    gridColumn: 'span 2',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    columnGap: '8px',\r\n\r\n    '@media (max-width: 1400px)': {\r\n      gridColumn: 'span 3'\r\n    },\r\n\r\n    '@media (max-width: 1200px)': {\r\n      gridColumn: 'span 4'\r\n    },\r\n\r\n    '@media (max-width: 1000px)': {\r\n      gridColumn: 'span 3'\r\n    },\r\n\r\n    '@media (max-width: 650px)': {\r\n      gridColumn: 'span 4'\r\n    }\r\n  },\r\n  tooltipItemBox: {\r\n    height: '18px',\r\n    width: '18px',\r\n    border: 'solid rgb(0, 0, 0, 0.75) 0.5px',\r\n    flex: 'none'\r\n  },\r\n  tooltipItemStats: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n\r\n    '& .MuiTypography-body2': {\r\n      overflowWrap: 'anywhere'\r\n    }\r\n  }\r\n}));\r\n\r\nexport { useStyles };\r\n","import { Box, CardContent, MenuItem, Select, Typography, useMediaQuery } from '@mui/material';\r\nimport { useStyles } from './DistributionGraphMUI';\r\nimport {\r\n  Bar,\r\n  BarChart,\r\n  Brush,\r\n  CartesianGrid,\r\n  Legend,\r\n  ResponsiveContainer,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip as ChartTooltip,\r\n  Label\r\n} from 'recharts';\r\nimport { useAppDispatch, useAppSelector } from '../../../../stores/hooks';\r\nimport { setDistributionGraphView } from '../../../../stores/slices/graphSlice';\r\nimport { getColorForGenotype, hoverColor } from '../../../../util/colorHelper';\r\nimport { useEffect, useState } from 'react';\r\n\r\nconst dataViewOptions = [\r\n  { label: 'Number of genomes', value: 'number' },\r\n  { label: 'Percentage per year', value: 'percentage' }\r\n];\r\n\r\nexport const DistributionGraph = () => {\r\n  const classes = useStyles();\r\n  const [plotChart, setPlotChart] = useState(() => {});\r\n  const matches500 = useMediaQuery('(max-width:500px)');\r\n\r\n  const dispatch = useAppDispatch();\r\n  const distributionGraphView = useAppSelector((state) => state.graph.distributionGraphView);\r\n  const genotypesYearData = useAppSelector((state) => state.graph.genotypesYearData);\r\n  const genotypesForFilter = useAppSelector((state) => state.dashboard.genotypesForFilter);\r\n  const canGetData = useAppSelector((state) => state.dashboard.canGetData);\r\n\r\n  function getDomain() {\r\n    return distributionGraphView === 'number' ? undefined : [0, 100];\r\n  }\r\n\r\n  function getData() {\r\n    if (distributionGraphView === 'number') {\r\n      return genotypesYearData;\r\n    }\r\n\r\n    const exclusions = ['name', 'count'];\r\n    let genotypeDataPercentage = structuredClone(genotypesYearData);\r\n    genotypeDataPercentage = genotypeDataPercentage.map((item) => {\r\n      const keys = Object.keys(item).filter((x) => !exclusions.includes(x));\r\n\r\n      keys.forEach((key) => {\r\n        item[key] = Number(((item[key] / item.count) * 100).toFixed(2));\r\n      });\r\n\r\n      return item;\r\n    });\r\n\r\n    return genotypeDataPercentage;\r\n  }\r\n\r\n  function getTooltipData(label, payload) {\r\n    const data = genotypesYearData.find((item) => item.name === label);\r\n\r\n    if (data) {\r\n      const tooltipData = [];\r\n\r\n      payload.forEach((item) => {\r\n        if (item.value === 0) {\r\n          return;\r\n        }\r\n\r\n        const count = data[item.name];\r\n        tooltipData.push({\r\n          name: item.name,\r\n          color: item.color,\r\n          count,\r\n          percentage: Number(((count / data.count) * 100).toFixed(2))\r\n        });\r\n      });\r\n\r\n      tooltipData.sort((a, b) => b.name.localeCompare(a.name));\r\n      return tooltipData;\r\n    }\r\n  }\r\n\r\n  function handleChangeDataView(event) {\r\n    dispatch(setDistributionGraphView(event.target.value));\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (canGetData) {\r\n      setPlotChart(() => {\r\n        return (\r\n          <ResponsiveContainer width=\"100%\">\r\n            <BarChart data={getData()} maxBarSize={70}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" />\r\n              <XAxis dataKey=\"name\" interval=\"preserveStartEnd\" tick={{ fontSize: 14 }} />\r\n              <YAxis domain={getDomain()} allowDataOverflow={true} allowDecimals={false}>\r\n                <Label angle={-90} position=\"insideLeft\" className={classes.graphLabel}>\r\n                  {dataViewOptions.find((option) => option.value === distributionGraphView).label}\r\n                </Label>\r\n              </YAxis>\r\n              {genotypesYearData.length > 0 && <Brush dataKey=\"name\" height={20} stroke={'rgb(31, 187, 211)'} />}\r\n\r\n              <Legend\r\n                content={(props) => {\r\n                  const { payload } = props;\r\n                  return (\r\n                    <div className={classes.legendWrapper}>\r\n                      {payload.map((entry, index) => {\r\n                        const { dataKey, color } = entry;\r\n                        return (\r\n                          <div key={`distribution-legend-${index}`} className={classes.legendItemWrapper}>\r\n                            <Box className={classes.colorCircle} style={{ backgroundColor: color }} />\r\n                            <Typography variant=\"caption\">{dataKey}</Typography>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  );\r\n                }}\r\n              />\r\n\r\n              <ChartTooltip\r\n                position={{ x: matches500 ? 0 : 60, y: matches500 ? 310 : 410 }}\r\n                cursor={{ fill: hoverColor }}\r\n                wrapperStyle={{ outline: 'none', zIndex: 1 }}\r\n                content={({ payload, active, label }) => {\r\n                  if (payload !== null && active) {\r\n                    const data = getTooltipData(label, payload);\r\n\r\n                    return (\r\n                      <div className={classes.tooltip}>\r\n                        <div className={classes.tooltipTitle}>\r\n                          <Typography variant=\"h5\" fontWeight=\"600\">\r\n                            {label}\r\n                          </Typography>\r\n                          <Typography variant=\"subtitle1\">{`N = ${payload[0].payload.count}`}</Typography>\r\n                        </div>\r\n                        <div className={classes.tooltipContent}>\r\n                          {data.map((item, index) => {\r\n                            return (\r\n                              <div key={`tooltip-content-${index}`} className={classes.tooltipItemWrapper}>\r\n                                <Box\r\n                                  className={classes.tooltipItemBox}\r\n                                  style={{\r\n                                    backgroundColor: item.color\r\n                                  }}\r\n                                />\r\n                                <div className={classes.tooltipItemStats}>\r\n                                  <Typography variant=\"body2\" fontWeight=\"500\" lineHeight={undefined}>\r\n                                    {item.name}\r\n                                  </Typography>\r\n                                  <Typography\r\n                                    fontSize=\"12px\"\r\n                                    noWrap\r\n                                    lineHeight={undefined}\r\n                                  >{`N = ${item.count}`}</Typography>\r\n                                  <Typography\r\n                                    fontSize=\"10px\"\r\n                                    lineHeight={undefined}\r\n                                  >{`${item.percentage}%`}</Typography>\r\n                                </div>\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  return null;\r\n                }}\r\n              />\r\n\r\n              {genotypesForFilter.map((option, index) => (\r\n                <Bar\r\n                  key={`distribution-bar-${index}`}\r\n                  dataKey={option}\r\n                  name={option}\r\n                  stackId={0}\r\n                  fill={getColorForGenotype(option)}\r\n                />\r\n              ))}\r\n            </BarChart>\r\n          </ResponsiveContainer>\r\n        );\r\n      });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [genotypesYearData, distributionGraphView, matches500]);\r\n\r\n  return (\r\n    <CardContent className={classes.distributionGraph}>\r\n      <div className={classes.selectWrapper}>\r\n        <Typography variant=\"caption\" className={classes.selectLabel}>\r\n          Data view\r\n        </Typography>\r\n        <Select\r\n          className={classes.select}\r\n          value={distributionGraphView}\r\n          onChange={handleChangeDataView}\r\n          inputProps={{ className: classes.selectInput }}\r\n          MenuProps={{ classes: { list: classes.selectMenu } }}\r\n        >\r\n          {dataViewOptions.map((option, index) => {\r\n            return (\r\n              <MenuItem key={index + 'distribution-dataview'} value={option.value}>\r\n                {option.label}\r\n              </MenuItem>\r\n            );\r\n          })}\r\n        </Select>\r\n      </div>\r\n      <div className={classes.graphWrapper}>\r\n        <div className={classes.graph} id=\"GD\">\r\n          {plotChart}\r\n        </div>\r\n      </div>\r\n    </CardContent>\r\n  );\r\n};\r\n","export const graphCards = [\r\n  {\r\n    title: 'Resistance frequencies within genotypes',\r\n    description: ['Top Genotypes (up to 7)'],\r\n    id: 'RFWG'\r\n  },\r\n  {\r\n    title: 'Drug resistance trends',\r\n    description: ['Data are plotted for years with N ≥ 10 genomes'],\r\n    id: 'DRT'\r\n  },\r\n  {\r\n    title: 'Resistance determinants within genotypes',\r\n    description: ['Top Genotypes (up to 10)'],\r\n    id: 'RDWG'\r\n  },\r\n  {\r\n    title: 'Genotype distribution',\r\n    description: [],\r\n    id: 'GD'\r\n  }\r\n];\r\n","import { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  card: {\r\n    gridColumn: 'span 12',\r\n\r\n    '&.MuiCard-root': {\r\n      borderRadius: '16px'\r\n    }\r\n  },\r\n  cardContent: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    rowGap: '8px'\r\n  },\r\n  selectLabel: {\r\n    paddingTop: '16px'\r\n  },\r\n  selectInput: {\r\n    fontSize: '16px !important',\r\n    fontWeight: '600 !important',\r\n    textAlign: 'start',\r\n    minWidth: '250px !important'\r\n  },\r\n  selectMenu: {\r\n    '& .MuiMenuItem-root': {\r\n      fontSize: '16px'\r\n    }\r\n  },\r\n  menuPaper: {\r\n    maxHeight: '350px !important'\r\n  }\r\n}));\r\n\r\nexport { useStyles };\r\n","import { useStyles } from './SelectCountryMUI';\r\nimport { Card, CardContent, MenuItem, Select, Typography } from '@mui/material';\r\nimport { useAppDispatch, useAppSelector } from '../../../stores/hooks';\r\nimport { setActualCountry } from '../../../stores/slices/dashboardSlice';\r\n\r\nexport const SelectCountry = () => {\r\n  const classes = useStyles();\r\n  const dispatch = useAppDispatch();\r\n  const actualCountry = useAppSelector((state) => state.dashboard.actualCountry);\r\n  const countriesForFilter = useAppSelector((state) => state.graph.countriesForFilter);\r\n  const dataset = useAppSelector((state) => state.map.dataset);\r\n  const actualTimeInitial = useAppSelector((state) => state.dashboard.actualTimeInitial);\r\n  const actualTimeFinal = useAppSelector((state) => state.dashboard.actualTimeFinal);\r\n\r\n  function handleChange(event) {\r\n    dispatch(setActualCountry(event.target.value));\r\n  }\r\n\r\n  return (\r\n    <Card className={classes.card} elevation={0}>\r\n      <CardContent className={classes.cardContent}>\r\n        <Typography variant=\"h5\" fontWeight={700} textAlign=\"center\">\r\n          {`Now showing: ${dataset} data from ${actualCountry === 'All' ? 'all countries' : actualCountry} from ${\r\n            actualTimeInitial || 'year'\r\n          } to ${actualTimeFinal || 'year'}`}\r\n        </Typography>\r\n        <Typography className={classes.selectLabel} variant=\"subtitle1\" fontWeight={500}>\r\n          Select country (or click map)\r\n        </Typography>\r\n        <Select\r\n          variant=\"standard\"\r\n          value={actualCountry}\r\n          onChange={handleChange}\r\n          inputProps={{ className: classes.selectInput }}\r\n          MenuProps={{ classes: { paper: classes.menuPaper, list: classes.selectMenu } }}\r\n        >\r\n          <MenuItem value=\"All\">All</MenuItem>\r\n          {countriesForFilter.map((country, index) => {\r\n            return (\r\n              <MenuItem key={index + 'mapview'} value={country}>\r\n                {country}\r\n              </MenuItem>\r\n            );\r\n          })}\r\n        </Select>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n","import { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  downloadDataWrapper: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    padding: '16px 0px',\r\n    gridColumn: 'span 12',\r\n    columnGap: '20px',\r\n\r\n    '@media (max-width: 750px)': {\r\n      flexDirection: 'column',\r\n      rowGap: '8px'\r\n    }\r\n  },\r\n  button: {\r\n    color: '#fff !important',\r\n    textTransform: 'none !important',\r\n    paddingTop: '8px !important',\r\n    paddingBottom: '8px !important',\r\n    borderRadius: '100px !important',\r\n\r\n    '@media (max-width: 750px)': {\r\n      width: '100%'\r\n    }\r\n  }\r\n}));\r\n\r\nexport { useStyles };\r\n","export default __webpack_public_path__ + \"static/media/eu_flag.77134ad3.jpg\";","export function getSalmonellaTexts(date) {\r\n  return [\r\n    `This report was generated at ${date}, using TyphiNET (http://typhi.net), a data visualisation platform that draws genome-derived data on antimicrobial resistance and genotypes from Typhi Pathogenwatch (http://pathogen.watch).`,\r\n    'TyphiNET data were last updated on September 12 2023. For code and further details please see: https://github.com/zadyson/TyphiNET.',\r\n    'The genotypes reported here are defined in Dyson & Holt (2021), J. Infect. Dis.',\r\n    'Antimicrobial resistance determinants are described in the Typhi Pathogenwatch paper, Argimón et al. 2021, Nat. Commun.',\r\n    'Travel-associated cases are attributed to the country of travel, not the country of isolation (see Ingle et al. 2019, PLoS NTDs).',\r\n    'TyphiNET presents data aggregated from >100 studies. Individual genome information, including derived genotype and AMR calls, sequence data accession numbers, and source information (PubMedID for citation) can be downloaded as a spreadsheet from the TyphiNET website (http://typhi.net).',\r\n    \"This project has received funding from the the Wellcome Trust (Open Research Fund, 219692/Z/19/Z) and the  European Union's Horizon 2020 research and innovation programme under the Marie Sklodowska-Curie grant agreement No 845681.\"\r\n  ];\r\n}\r\n","import { Alert, Snackbar, useMediaQuery } from '@mui/material';\r\nimport { useStyles } from './DownloadDataMUI';\r\nimport { useAppDispatch, useAppSelector } from '../../../stores/hooks';\r\nimport axios from 'axios';\r\nimport download from 'downloadjs';\r\nimport { API_ENDPOINT } from '../../../constants';\r\nimport { useState } from 'react';\r\nimport LoadingButton from '@mui/lab/LoadingButton';\r\nimport { PictureAsPdf, TableChart } from '@mui/icons-material';\r\nimport { setPosition } from '../../../stores/slices/mapSlice';\r\nimport jsPDF from 'jspdf';\r\nimport LogoImg from '../../../assets/img/logo-typhinet-prod.png';\r\nimport EUFlagImg from '../../../assets/img/eu_flag.jpg';\r\nimport moment from 'moment';\r\nimport { svgAsPngUri } from 'save-svg-as-png';\r\nimport { mapLegends } from '../../../util/mapLegends';\r\nimport { imgOnLoadPromise } from '../../../util/imgOnLoadPromise';\r\nimport { graphCards } from '../../../util/graphCards';\r\nimport domtoimage from 'dom-to-image';\r\nimport { drugs, drugsForDrugResistanceGraph } from '../../../util/drugs';\r\nimport { getColorForDrug } from '../Graphs/graphColorHelper';\r\nimport { colorForDrugClasses, getColorForGenotype } from '../../../util/colorHelper';\r\nimport { getSalmonellaTexts } from '../../../util/reportInfoTexts';\r\n\r\nconst columnsToRemove = [\r\n  'azith_pred_pheno',\r\n  'ACCESSION',\r\n  'COUNTRY_ONLY',\r\n  'REGION_IN_COUNTRY',\r\n  'LOCATION',\r\n  'ACCURACY',\r\n  'LATITUDE',\r\n  'LONGITUDE',\r\n  'REFERENCE',\r\n  'MLST ST (EnteroBase)',\r\n  'MLST PROFILE (EnteroBase)',\r\n  'GENOTYPHI SNPs CALLED',\r\n  'Genome ID',\r\n  'Version',\r\n  'Organism Name',\r\n  'Organism ID',\r\n  'Species Name',\r\n  'Species ID',\r\n  'Genus Name',\r\n  'Genus ID',\r\n  'Reference ID',\r\n  'Matching Hashes',\r\n  'p-Value',\r\n  'Mash Distance',\r\n  // 'cip_pred_pheno',\r\n  'cip',\r\n  'dcs_category',\r\n  'amr_category',\r\n  'num_qrdr',\r\n  'num_acrb',\r\n  'ESBL_category',\r\n  'chloramphenicol_category',\r\n  'tetracycline_category',\r\n  'cip_pheno_qrdr_gene',\r\n  'dcs_mechanisms',\r\n  'num_amr_genes',\r\n  'dfra_any',\r\n  'sul_any',\r\n  'co_trim',\r\n  'GENOTYPE_SIMPLE',\r\n  'h58_genotypes',\r\n  'COUNTRY OF ORIGIN',\r\n  'AGE',\r\n  'TRAVEL COUNTRY',\r\n  'TRAVEL ASSOCIATED'\r\n];\r\n\r\nexport const DownloadData = () => {\r\n  const classes = useStyles();\r\n  const matches500 = useMediaQuery('(max-width:500px)');\r\n  const [loadingCSV, setLoadingCSV] = useState(false);\r\n  const [loadingPDF, setLoadingPDF] = useState(false);\r\n  const [showAlert, setShowAlert] = useState(false);\r\n\r\n  const dispatch = useAppDispatch();\r\n  const actualCountry = useAppSelector((state) => state.dashboard.actualCountry);\r\n  const listPIMD = useAppSelector((state) => state.dashboard.listPMID);\r\n  const globalOverviewLabel = useAppSelector((state) => state.dashboard.globalOverviewLabel);\r\n  const actualGenomes = useAppSelector((state) => state.dashboard.actualGenomes);\r\n  const actualTimeInitial = useAppSelector((state) => state.dashboard.actualTimeInitial);\r\n  const actualTimeFinal = useAppSelector((state) => state.dashboard.actualTimeFinal);\r\n  const mapView = useAppSelector((state) => state.map.mapView);\r\n  const dataset = useAppSelector((state) => state.map.dataset);\r\n  const determinantsGraphDrugClass = useAppSelector((state) => state.graph.determinantsGraphDrugClass);\r\n  const genotypesForFilter = useAppSelector((state) => state.dashboard.genotypesForFilter);\r\n  const customDropdownMapView = useAppSelector((state) => state.graph.customDropdownMapView);\r\n\r\n  async function handleClickDownloadDatabase() {\r\n    setLoadingCSV(true);\r\n    await axios\r\n      .get(`${API_ENDPOINT}file/download`)\r\n      .then((res) => {\r\n        let indexes = [];\r\n        let csv = res.data.split('\\n');\r\n        let lines = [];\r\n\r\n        for (let index = 0; index < csv.length; index++) {\r\n          let line = csv[index].split(',');\r\n          lines.push(line);\r\n        }\r\n        // lines[0].forEach((curr, index) => {\r\n        //   if (curr === 'cip_pred_pheno') {\r\n        //     lines[0][index] = 'Cip';\r\n        //   }\r\n        // });\r\n\r\n        for (let index = 0; index < columnsToRemove.length; index++) {\r\n          let currentIndex = lines[0].indexOf(columnsToRemove[index]);\r\n          indexes.push(currentIndex);\r\n        }\r\n        indexes.sort();\r\n        indexes.reverse();\r\n\r\n        let newLines = [];\r\n        for (let j = 0; j < lines.length; j++) {\r\n          let aux = [];\r\n          for (let i = 0; i < lines[j].length; i++) {\r\n            if (!indexes.includes(i)) {\r\n              aux.push(lines[j][i]);\r\n            }\r\n          }\r\n          newLines.push(aux);\r\n        }\r\n\r\n        let newCSV = '';\r\n        for (let i = 0; i < newLines.length; i++) {\r\n          let aux = '';\r\n          for (let index = 0; index < newLines[i].length; index++) {\r\n            aux += newLines[i][index];\r\n            if (index !== newLines[i].length - 1) {\r\n              aux += ',';\r\n            }\r\n          }\r\n          if (i !== newLines.length - 1) {\r\n            aux += '\\n';\r\n          }\r\n          newCSV += aux;\r\n        }\r\n\r\n        download(newCSV, 'TyphiNET - Database.csv');\r\n      })\r\n      .finally(() => {\r\n        setLoadingCSV(false);\r\n      });\r\n  }\r\n\r\n  function formatDate(date) {\r\n    return moment(date).format('ddd MMM DD YYYY HH:mm');\r\n  }\r\n\r\n  function drawFooter({ document, pageHeight, pageWidth, date }) {\r\n    document.setFontSize(10);\r\n    document.line(0, pageHeight - 26, pageWidth, pageHeight - 24);\r\n    document.text(`Source: typhi.net [${date}]`, pageWidth / 2, pageHeight - 10, { align: 'center' });\r\n  }\r\n\r\n  function drawLegend({ id = null, legendData, document, factor, rectY, isGenotype = false, isDrug = false, xSpace }) {\r\n    legendData.forEach((legend, i) => {\r\n      const yFactor = (i % factor) * 10;\r\n      const xFactor = Math.floor(i / factor) * xSpace;\r\n\r\n      document.setFillColor(isGenotype ? getColorForGenotype(legend) : isDrug ? getColorForDrug(legend) : legend.color);\r\n      document.circle(50 + xFactor, rectY + 10 + yFactor, 2.5, 'F');\r\n\r\n      if (id === 'CERDT' && i < 2) {\r\n        if (i === 0) {\r\n          document.setFont(undefined, 'bold');\r\n        } else {\r\n          document.setFont(undefined, 'normal');\r\n        }\r\n      }\r\n      document.text(\r\n        isGenotype || isDrug ? legend.replaceAll('β', 'B') : legend.name,\r\n        56 + xFactor,\r\n        rectY + 12 + yFactor\r\n      );\r\n    });\r\n  }\r\n\r\n  async function handleClickDownloadPDF() {\r\n    setLoadingPDF(true);\r\n    dispatch(setPosition({ coordinates: [0, 0], zoom: 1 }));\r\n\r\n    try {\r\n      if(genotypesForFilter.length<=0)\r\n        return console.log(\"No data available to generate report\");\r\n      const doc = new jsPDF({ unit: 'px', format: 'a4' });\r\n      const pageWidth = doc.internal.pageSize.getWidth();\r\n      const pageHeight = doc.internal.pageSize.getHeight();\r\n      const date = formatDate(new Date());\r\n\r\n      // Logo\r\n      const logo = new Image();\r\n      logo.src = LogoImg;\r\n      const logoWidth = 80;\r\n      doc.addImage(logo, 'PNG', 16, 16, logoWidth, 34);\r\n\r\n      // Title and Date\r\n      doc.setFontSize(16).setFont(undefined, 'bold');\r\n      doc.text(`TyphiNET Report - ${globalOverviewLabel.fullLabel}`, pageWidth / 2, 34, { align: 'center' });\r\n      doc.setFontSize(12).setFont(undefined, 'normal');\r\n      doc.text(date, pageWidth / 2, 48, { align: 'center' });\r\n\r\n      const texts = getSalmonellaTexts(date);\r\n\r\n      // Info\r\n      doc.text(texts[0], 16, 85, { align: 'justify', maxWidth: pageWidth - 36 });\r\n      doc.text(texts[1], 16, 125, { align: 'justify', maxWidth: pageWidth - 36 });\r\n      doc.text(texts[2], 16, 153, {\r\n        align: 'justify',\r\n        maxWidth: pageWidth - 36\r\n      });\r\n      doc.text(texts[3], 16, 169, { align: 'justify', maxWidth: pageWidth - 36 });\r\n      doc.text(texts[4], 16, 197, { align: 'justify', maxWidth: pageWidth - 36 });\r\n      doc.text(texts[5], 16, 225, { align: 'justify', maxWidth: pageWidth - 36 });\r\n      doc.text(texts[6], 16, 277, { align: 'justify', maxWidth: pageWidth - 36 });\r\n\r\n      const euFlag = new Image();\r\n      euFlag.src = EUFlagImg;\r\n      doc.addImage(euFlag, 'JPG', 208, 290, 12, 8);\r\n\r\n      if (actualCountry !== 'All') {\r\n        doc.text(\r\n          `Studies contributing genomes representing infections originating from ${actualCountry} have the following PubMed IDs (PMIDs): ${listPIMD.join(\r\n            ', '\r\n          )}.`,\r\n          16,\r\n          317,\r\n          { align: 'justify', maxWidth: pageWidth - 36 }\r\n        );\r\n      }\r\n\r\n      drawFooter({ document: doc, pageHeight, pageWidth, date });\r\n\r\n      // Map\r\n      doc.addPage();\r\n      drawFooter({ document: doc, pageHeight, pageWidth, date });\r\n\r\n      doc.setFontSize(16).setFont(undefined, 'bold');\r\n      doc.text(`Global Overview of ${globalOverviewLabel.fullLabel}`, pageWidth / 2, 24, { align: 'center' });\r\n      doc.setFontSize(12).setFont(undefined, 'normal');\r\n      doc.text(`Total: ${actualGenomes} genomes`, pageWidth / 2, 40, { align: 'center' });\r\n      doc.text(`Country: ${actualCountry}`, pageWidth / 2, 52, { align: 'center' });\r\n      doc.text(`Time Period: ${actualTimeInitial} to ${actualTimeFinal}`, pageWidth / 2, 64, { align: 'center' });\r\n      doc.line(16, 76, pageWidth - 16, 76);\r\n\r\n      doc.setFont(undefined, 'bold');\r\n      doc.text('Map', 16, 96);\r\n      doc.setFont(undefined, 'normal');\r\n      const actualMapView = mapLegends.find((x) => x.value === mapView).label;\r\n      doc.text(`Map View: ${actualMapView}`, 16, 108);\r\n      doc.text(`Dataset: ${dataset}${dataset === 'All' ? ' (local + travel)' : ''}`, 16, 120);\r\n\r\n      // doc.setFontSize(10);\r\n      if(mapView === 'Genotype prevalence'){\r\n        if (customDropdownMapView.length === 1) {\r\n            doc.text('Selected Genotypes: ' + customDropdownMapView, 16, 140);\r\n        } else if (customDropdownMapView.length > 1) {\r\n            const genotypesText = customDropdownMapView.join('\\n');\r\n            doc.text('Selected Genotypes: \\n' + genotypesText, 16, 140);\r\n        }\r\n      }\r\n      let mapY = 160 + (customDropdownMapView.length*9);\r\n      await svgAsPngUri(document.getElementById('global-overview-map'), {\r\n        scale: 4,\r\n        backgroundColor: 'white',\r\n        width: 1200,\r\n        left: -200\r\n      }).then(async (uri) => {\r\n        const canvas = document.createElement('canvas');\r\n        const ctx = canvas.getContext('2d');\r\n\r\n        const mapImg = document.createElement('img');\r\n        const mapImgPromise = imgOnLoadPromise(mapImg);\r\n        mapImg.src = uri;\r\n        await mapImgPromise;\r\n\r\n        canvas.width = 4800;\r\n        canvas.height = 2400;\r\n        ctx.drawImage(mapImg, 0, 0, canvas.width, canvas.height);\r\n\r\n        const img = canvas.toDataURL('image/png');\r\n        doc.addImage(img, 'PNG', 0, mapY, pageWidth, 223);\r\n      });\r\n\r\n      const mapLegend = new Image();\r\n      let legendWidth = 58.85;\r\n\r\n      switch (mapView) {\r\n        case 'Dominant Genotype':\r\n          legendWidth = 414.21;\r\n          mapLegend.src = 'legends/MapView_DominantGenotype.png';\r\n          break;\r\n        case 'No. Samples':\r\n          mapLegend.src = 'legends/MapView_NoSamples.png';\r\n          break;\r\n        // case 'Sensitive to all drugs':\r\n        case 'Susceptible to all drugs':\r\n          mapLegend.src = 'legends/MapView_Sensitive.png';\r\n          break;\r\n        case 'Genotype prevalence':\r\n          mapLegend.src = 'legends/MapView_prevalence.png';\r\n          break;\r\n        default:\r\n          mapLegend.src = 'legends/MapView_Others.png';\r\n          break;\r\n      }\r\n      if (mapView === 'Dominant Genotype') {\r\n        doc.addImage(mapLegend, 'PNG', pageWidth / 2 - legendWidth / 2, 351, legendWidth, 47);\r\n      } else {\r\n        doc.addImage(mapLegend, 'PNG', pageWidth - pageWidth / 5 , 85, legendWidth, 47);\r\n      }\r\n\r\n      // Graphs\r\n      const drugClassesBars = colorForDrugClasses[determinantsGraphDrugClass];\r\n      const drugClassesFactor = Math.ceil(drugClassesBars.length / 3);\r\n      const genotypesFactor = Math.ceil(genotypesForFilter.length / 6);\r\n\r\n      for (let index = 0; index < graphCards.length; index++) {\r\n        doc.addPage();\r\n        drawFooter({ document: doc, pageHeight, pageWidth, date });\r\n\r\n        const title = `${graphCards[index].title}${\r\n          graphCards[index].id === 'RDWG' ? `: ${determinantsGraphDrugClass}` : ''\r\n        }`;\r\n        doc.setFontSize(12).setFont(undefined, 'bold');\r\n        doc.text(title, 16, 24);\r\n        doc.setFont(undefined, 'normal');\r\n        doc.setFontSize(10);\r\n        doc.text(graphCards[index].description.join(' / ').replaceAll('≥', '>='), 16, 36);\r\n        doc.setFontSize(12);\r\n        doc.text(`Total: ${actualGenomes} genomes`, 16, 54);\r\n        doc.text(`Country: ${actualCountry}`, 16, 66);\r\n        doc.text(`Time Period: ${actualTimeInitial} to ${actualTimeFinal}`, 16, 78);\r\n        doc.text(`Dataset: ${dataset}${dataset === 'All' ? ' (local + travel)' : ''}`, 16, 90);\r\n\r\n        const graphImg = document.createElement('img');\r\n        const graphImgPromise = imgOnLoadPromise(graphImg);\r\n        graphImg.src = await domtoimage.toPng(document.getElementById(graphCards[index].id), { bgcolor: 'white' });\r\n        await graphImgPromise;\r\n        if (graphImg.width <= 741) {\r\n          doc.addImage(graphImg, 'PNG', 16, 110);\r\n        } else {\r\n          doc.addImage(graphImg, 'PNG', 16, 110, pageWidth - 32, 271);\r\n        }\r\n\r\n        doc.setFillColor(255, 255, 255);\r\n        const rectY = matches500 ? 300 : graphImg.width <= 741 ? 360 : 320;\r\n        doc.rect(0, rectY, pageWidth, 200, 'F');\r\n\r\n        doc.setFontSize(9);\r\n        if (graphCards[index].id === 'RFWG') {\r\n          drawLegend({\r\n            document: doc,\r\n            legendData: drugs,\r\n            factor: 4,\r\n            rectY,\r\n            xSpace: 100,\r\n            isDrug: true\r\n          });\r\n        }else if (graphCards[index].id === 'DRT') {\r\n          drawLegend({\r\n            document: doc,\r\n            legendData: drugsForDrugResistanceGraph,\r\n            factor: 4,\r\n            rectY,\r\n            xSpace: 100,\r\n            isDrug: true\r\n          });\r\n        } else if (graphCards[index].id === 'RDWG') {\r\n          drawLegend({\r\n            document: doc,\r\n            legendData: drugClassesBars,\r\n            factor: drugClassesFactor,\r\n            rectY,\r\n            xSpace: 127\r\n          });\r\n        } else if (graphCards[index].id === 'GD') {\r\n          drawLegend({\r\n            document: doc,\r\n            legendData: genotypesForFilter,\r\n            factor: genotypesFactor,\r\n            rectY,\r\n            xSpace: 65,\r\n            isGenotype: true\r\n          });\r\n        }\r\n      }\r\n\r\n      doc.save('TyphiNET - Report.pdf');\r\n    } catch (error) {\r\n      setShowAlert(true);\r\n    } finally {\r\n      setLoadingPDF(false);\r\n    }\r\n  }\r\n\r\n  function handleCloseAlert() {\r\n    setShowAlert(false);\r\n  }\r\n\r\n  return (\r\n    <div className={classes.downloadDataWrapper}>\r\n      <LoadingButton\r\n        className={classes.button}\r\n        variant=\"contained\"\r\n        onClick={handleClickDownloadDatabase}\r\n        loading={loadingCSV}\r\n        startIcon={<TableChart />}\r\n        loadingPosition=\"start\"\r\n      >\r\n        Download database (CSV format, 7.2MB)\r\n      </LoadingButton>\r\n      <LoadingButton\r\n        className={classes.button}\r\n        variant=\"contained\"\r\n        onClick={handleClickDownloadPDF}\r\n        loading={loadingPDF}\r\n        startIcon={<PictureAsPdf />}\r\n        loadingPosition=\"start\"\r\n      >\r\n        Download report from current view\r\n      </LoadingButton>\r\n      <Snackbar open={showAlert} autoHideDuration={5000} onClose={handleCloseAlert}>\r\n        <Alert onClose={handleCloseAlert} severity=\"error\" sx={{ width: '100%' }}>\r\n          Something went wrong with the download, please try again later.\r\n        </Alert>\r\n      </Snackbar>\r\n    </div>\r\n  );\r\n};\r\n\r\n","import {\r\n  Alert,\r\n  Card,\r\n  CardActions,\r\n  CircularProgress,\r\n  IconButton,\r\n  Snackbar,\r\n  Tooltip,\r\n  Typography,\r\n  useMediaQuery\r\n} from '@mui/material';\r\nimport { useStyles } from './GraphsMUI';\r\nimport { useAppSelector } from '../../../stores/hooks';\r\nimport { CameraAlt } from '@mui/icons-material';\r\nimport { DeterminantsGraph } from './DeterminantsGraph';\r\nimport { FrequenciesGraph } from './FrequenciesGraph';\r\nimport { DrugResistanceGraph } from './DrugResistanceGraph';\r\nimport { DistributionGraph } from './DistributionGraph';\r\nimport { useState } from 'react';\r\nimport { imgOnLoadPromise } from '../../../util/imgOnLoadPromise';\r\nimport domtoimage from 'dom-to-image';\r\nimport LogoImg from '../../../assets/img/logo-typhinet-prod.png';\r\nimport download from 'downloadjs';\r\nimport { drugs, drugsForDrugResistanceGraph } from '../../../util/drugs';\r\nimport { getColorForDrug } from './graphColorHelper';\r\nimport { colorForDrugClasses, getColorForGenotype } from '../../../util/colorHelper';\r\nimport { graphCards } from '../../../util/graphCards';\r\nimport { SelectCountry } from '../SelectCountry';\r\nimport { DownloadData } from '../DownloadData';\r\n\r\nexport const Graphs = () => {\r\n  const classes = useStyles();\r\n  const matches500 = useMediaQuery('(max-width:500px)');\r\n  const [showAlert, setShowAlert] = useState(false);\r\n  const [chartLoadings, setChartLoadings] = useState({\r\n    RFWG: false,\r\n    DRT: false,\r\n    RDWG: false,\r\n    GD: false\r\n  });\r\n\r\n  const dataset = useAppSelector((state) => state.map.dataset);\r\n  const actualTimeInitial = useAppSelector((state) => state.dashboard.actualTimeInitial);\r\n  const actualTimeFinal = useAppSelector((state) => state.dashboard.actualTimeFinal);\r\n  const actualCountry = useAppSelector((state) => state.dashboard.actualCountry);\r\n  const determinantsGraphDrugClass = useAppSelector((state) => state.graph.determinantsGraphDrugClass);\r\n  const globalOverviewLabel = useAppSelector((state) => state.dashboard.globalOverviewLabel);\r\n  const genotypesForFilter = useAppSelector((state) => state.dashboard.genotypesForFilter);\r\n\r\n  function drawLegend({\r\n    legendData,\r\n    context,\r\n    factor,\r\n    mobileFactor,\r\n    yPosition,\r\n    isGenotype = false,\r\n    isDrug = false,\r\n    xSpace\r\n  }) {\r\n    legendData.forEach((legend, i) => {\r\n      const yFactor = (i % factor) * 24;\r\n      const xFactor = Math.floor(i / factor) * xSpace;\r\n\r\n      context.fillStyle = isGenotype ? getColorForGenotype(legend) : isDrug ? getColorForDrug(legend) : legend.color;\r\n      context.beginPath();\r\n      context.arc(102 + xFactor, yPosition - mobileFactor + yFactor, 5, 0, 2 * Math.PI);\r\n      context.fill();\r\n      context.closePath();\r\n      context.fillStyle = 'black';\r\n      context.fillText(\r\n        isGenotype || isDrug ? legend : legend.name,\r\n        111 + xFactor,\r\n        yPosition + 4 - mobileFactor + yFactor\r\n      );\r\n    });\r\n  }\r\n\r\n  async function handleClickDownload(event, card) {\r\n    event.stopPropagation();\r\n    handleLoading(card.id, true);\r\n\r\n    try {\r\n      const canvas = document.createElement('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n\r\n      const graph = document.getElementById(card.id);\r\n      const graphImg = document.createElement('img');\r\n      const graphImgPromise = imgOnLoadPromise(graphImg);\r\n\r\n      graphImg.src = await domtoimage.toPng(graph, { quality: 0.1, bgcolor: 'white' });\r\n      await graphImgPromise;\r\n\r\n      let heightFactor = 0,\r\n        drugClassesBars,\r\n        drugClassesFactor,\r\n        genotypesFactor;\r\n\r\n      if (['RFWG', 'DRT'].includes(card.id)) {\r\n        heightFactor = 250;\r\n      }\r\n      if (card.id === 'RDWG') {\r\n        drugClassesBars = colorForDrugClasses[determinantsGraphDrugClass];\r\n        drugClassesFactor = Math.ceil(drugClassesBars.length / 4);\r\n        heightFactor += drugClassesFactor * 22;\r\n      }\r\n      if (card.id === 'GD') {\r\n        genotypesFactor = Math.ceil(genotypesForFilter.length / 9);\r\n        heightFactor += genotypesFactor * 22;\r\n      }\r\n\r\n      canvas.width = 950;\r\n      canvas.height = graphImg.height + 220 + heightFactor;\r\n\r\n      ctx.fillStyle = 'white';\r\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n      const logo = document.createElement('img');\r\n      const logoPromise = imgOnLoadPromise(logo);\r\n      logo.src = LogoImg;\r\n      await logoPromise;\r\n\r\n      ctx.drawImage(logo, 10, 10, 155, 65);\r\n      ctx.drawImage(graphImg, canvas.width / 2 - graphImg.width / 2, 220);\r\n     \r\n      ctx.font = 'bold 18px Montserrat';\r\n      ctx.fillStyle = 'black';\r\n      ctx.textAlign = 'center';\r\n      ctx.fillText(card.title, canvas.width / 2, 50);\r\n\r\n      ctx.font = '12px Montserrat';\r\n      ctx.fillText(card.description.join(' / '), canvas.width / 2, 72);\r\n\r\n      ctx.font = '14px Montserrat';\r\n      // ctx.fillText(`Organism: ${globalOverviewLabel.fullLabel}`, canvas.width / 2, 110);\r\n      ctx.fillText(`Dataset: ${dataset}`, canvas.width / 2, 110);\r\n      ctx.fillText(`Time period: ${actualTimeInitial} to ${actualTimeFinal}`, canvas.width / 2, 132);\r\n      ctx.fillText(`Country: ${actualCountry}`, canvas.width / 2, 154);\r\n      if (card.id === 'RDWG') ctx.fillText(`Drug Class: ${determinantsGraphDrugClass}`, canvas.width / 2, 176);\r\n\r\n      ctx.fillStyle = 'white';\r\n      ctx.textAlign = 'start';\r\n      ctx.font = '12px Montserrat';\r\n\r\n      const mobileFactor = matches500 ? 100 : 0;\r\n    \r\n      if (['RFWG', 'DRT'].includes(card.id)) {\r\n        ctx.fillRect(0, 660 - mobileFactor, canvas.width, canvas.height);\r\n\r\n        drawLegend({\r\n          legendData: ((['RFWG'].includes(card.id))? drugs: drugsForDrugResistanceGraph),\r\n          context: ctx,\r\n          factor: 4,\r\n          mobileFactor,\r\n          yPosition: 670,\r\n          xSpace: 200,\r\n          isDrug: true\r\n        });\r\n      }\r\n      else if (card.id === 'RDWG') {\r\n        ctx.fillRect(0, 660 - mobileFactor, canvas.width, canvas.height);\r\n\r\n        drawLegend({\r\n          legendData: drugClassesBars,\r\n          context: ctx,\r\n          factor: drugClassesFactor,\r\n          mobileFactor,\r\n          yPosition: 670,\r\n          xSpace: 208\r\n        });\r\n      } else if (card.id === 'GD') {\r\n        ctx.fillRect(0, 660 - mobileFactor, canvas.width, canvas.height);\r\n\r\n        drawLegend({\r\n          legendData: genotypesForFilter,\r\n          context: ctx,\r\n          factor: genotypesFactor,\r\n          mobileFactor,\r\n          yPosition: 670,\r\n          isGenotype: true,\r\n          xSpace: 87\r\n        });\r\n      }\r\n\r\n      const base64 = canvas.toDataURL();\r\n      await download(base64, `TyphiNET - ${globalOverviewLabel.fullLabel} - ${card.title}.png`);\r\n    } catch {\r\n      setShowAlert(true);\r\n    } finally {\r\n      handleLoading(card.id, false);\r\n    }\r\n  }\r\n\r\n  function handleLoading(id, value) {\r\n    setChartLoadings({ ...chartLoadings, [id]: value });\r\n  }\r\n\r\n  function handleCloseAlert() {\r\n    setShowAlert(false);\r\n  }\r\n\r\n  return (\r\n    <Card className={classes.graphsCard} elevation={2}>\r\n      <SelectCountry />\r\n      {graphCards.map((card, index) => {\r\n        return (\r\n          <Card key={`graph-card-${index}`} className={classes.card} elevation={0}>\r\n            <CardActions disableSpacing className={classes.cardActions}>\r\n              <div className={classes.titleWrapper}>\r\n                <Typography fontSize=\"18px\" fontWeight=\"500\">\r\n                  {card.title}\r\n                </Typography>\r\n                <div className={classes.downloadWrapper}>\r\n                  <Tooltip title=\"Download Chart as PNG\" placement=\"top\">\r\n                    <span>\r\n                      <IconButton color=\"primary\" onClick={(event) => handleClickDownload(event, card)}>\r\n                        {chartLoadings[card.id] ? <CircularProgress color=\"primary\" size={24} /> : <CameraAlt />}\r\n                      </IconButton>\r\n                    </span>\r\n                  </Tooltip>\r\n                </div>\r\n              </div>\r\n              <Typography fontSize=\"10px\" component=\"span\">\r\n                {card.description.map((d, i) => (\r\n                  <div key={`description-${i}`}>{d}</div>\r\n                ))}\r\n              </Typography>\r\n            </CardActions>\r\n            <div className={classes.cardContent}>\r\n              {card.id === 'RFWG' && <FrequenciesGraph />}\r\n              {card.id === 'DRT' && <DrugResistanceGraph />}\r\n              {card.id === 'RDWG' && <DeterminantsGraph />}\r\n              {card.id === 'GD' && <DistributionGraph />}\r\n            </div>\r\n          </Card>\r\n        );\r\n      })}\r\n      <DownloadData />\r\n      <Snackbar open={showAlert} autoHideDuration={5000} onClose={handleCloseAlert}>\r\n        <Alert onClose={handleCloseAlert} severity=\"error\" sx={{ width: '100%' }}>\r\n          Something went wrong with the download, please try again later.\r\n        </Alert>\r\n      </Snackbar>\r\n    </Card>\r\n  );\r\n};\r\n","// Drug rules for Salmonella, where the column has to have one of the values to validate the rule. For frequencies and\r\n// drug resistance graphs\r\nexport const drugRules = [\r\n  { key: 'Ampicillin', columnID: 'blaTEM-1D', values: ['1'] },\r\n  { key: 'Azithromycin', columnID: 'azith_pred_pheno', values: ['AzithR'] },\r\n  { key: 'Chloramphenicol', columnID: 'chloramphenicol_category', values: ['ChlR'] },\r\n  // { key: 'Co-trimoxazole', columnID: 'co_trim', values: ['1'] },\r\n  { key: 'Trimethoprim-sulfamethoxazole', columnID: 'co_trim', values: ['1'] },\r\n  // { key: 'ESBL', columnID: 'ESBL_category', values: ['ESBL'] },\r\n  { key: 'Ceftriaxone', columnID: 'ESBL_category', values: ['ESBL'] },\r\n  // { key: 'Fluoroquinolones (CipNS)', columnID: 'cip_pred_pheno', values: ['CipR', 'CipI'] },\r\n  { key: 'Ciprofloxacin NS', columnID: 'cip_pred_pheno', values: ['CipNS'] },\r\n  { key: 'Sulphonamides', columnID: 'sul_any', values: ['1'] },\r\n  { key: 'Susceptible', columnID: 'amr_category', values: ['No AMR detected'] },\r\n  { key: 'Tetracyclines', columnID: 'tetracycline_category', values: ['TetR'] },\r\n  { key: 'Trimethoprim', columnID: 'dfra_any', values: ['1'] }\r\n];\r\n\r\nexport const drugRulesForDrugResistanceGraph = [\r\n  { key: 'MDR', columnID: 'MDR', values: ['MDR'] },\r\n  { key: 'XDR', columnID: 'XDR', values: ['XDR'] }\r\n];\r\n\r\n// Salmonella drug classes rules for determinants graph\r\nexport const drugClassesRules = {\r\n  Ampicillin: [\r\n    {\r\n      name: 'blaTEM-1D',\r\n      susceptible: false,\r\n      rules: [{ columnID: 'blaTEM-1D', value: '1' }]\r\n    },\r\n    {\r\n      name: 'None',\r\n      susceptible: true,\r\n      rules: [{ columnID: 'blaTEM-1D', value: '0' }]\r\n    }\r\n  ],\r\n  Azithromycin: [\r\n    {\r\n      name: 'acrB_R717Q + acrB_R717L',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'azith_pred_pheno', value: 'AzithR' },\r\n        { columnID: 'acrB_R717Q', value: '1' },\r\n        { columnID: 'acrB_R717L', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'acrB_R717Q',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'azith_pred_pheno', value: 'AzithR' },\r\n        { columnID: 'acrB_R717Q', value: '1' },\r\n        { columnID: 'acrB_R717L', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'acrB_R717L',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'azith_pred_pheno', value: 'AzithR' },\r\n        { columnID: 'acrB_R717L', value: '1' },\r\n        { columnID: 'acrB_R717Q', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'None',\r\n      susceptible: true,\r\n      rules: [{ columnID: 'azith_pred_pheno', value: 'AzithS' }]\r\n    }\r\n  ],\r\n  Chloramphenicol: [\r\n    {\r\n      name: 'catA1 + cmlA',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'chloramphenicol_category', value: 'ChlR' },\r\n        { columnID: 'catA1', value: '1' },\r\n        { columnID: 'cmlA', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'catA1',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'chloramphenicol_category', value: 'ChlR' },\r\n        { columnID: 'catA1', value: '1' },\r\n        { columnID: 'cmlA', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'cmlA',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'chloramphenicol_category', value: 'ChlR' },\r\n        { columnID: 'cmlA', value: '1' },\r\n        { columnID: 'catA1', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'None',\r\n      susceptible: true,\r\n      rules: [{ columnID: 'chloramphenicol_category', value: 'ChlS' }]\r\n    }\r\n  ],\r\n  // 'Co-trimoxazole': [\r\n  'Trimethoprim-sulfamethoxazole': [\r\n    {\r\n      name: 'dfrA7 + dfrA14 + sul1 + sul2',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA7', value: '1' },\r\n        { columnID: 'dfrA14', value: '1' },\r\n        { columnID: 'sul1', value: '1' },\r\n        { columnID: 'sul2', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA7 + sul1 + sul2',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA7', value: '1' },\r\n        { columnID: 'dfrA14', value: '0' },\r\n        { columnID: 'sul1', value: '1' },\r\n        { columnID: 'sul2', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA7 + sul1',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA7', value: '1' },\r\n        { columnID: 'dfrA14', value: '0' },\r\n        { columnID: 'sul1', value: '1' },\r\n        { columnID: 'sul2', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA7 + sul2',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA7', value: '1' },\r\n        { columnID: 'dfrA14', value: '0' },\r\n        { columnID: 'sul1', value: '0' },\r\n        { columnID: 'sul2', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA14 + sul1 + sul2',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA7', value: '0' },\r\n        { columnID: 'dfrA14', value: '1' },\r\n        { columnID: 'sul1', value: '1' },\r\n        { columnID: 'sul2', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA14 + sul1',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA7', value: '0' },\r\n        { columnID: 'dfrA14', value: '1' },\r\n        { columnID: 'sul1', value: '1' },\r\n        { columnID: 'sul2', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA14 + sul2',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA7', value: '0' },\r\n        { columnID: 'dfrA14', value: '1' },\r\n        { columnID: 'sul1', value: '0' },\r\n        { columnID: 'sul2', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA1 + sul1 + sul2',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA1', value: '1' },\r\n        { columnID: 'sul1', value: '1' },\r\n        { columnID: 'sul2', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA1 + sul1',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA1', value: '1' },\r\n        { columnID: 'sul1', value: '1' },\r\n        { columnID: 'sul2', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA1 + sul2',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA1', value: '1' },\r\n        { columnID: 'sul1', value: '0' },\r\n        { columnID: 'sul2', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA5 + sul1 + sul2',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA5', value: '1' },\r\n        { columnID: 'sul1', value: '1' },\r\n        { columnID: 'sul2', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA5 + sul1',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA5', value: '1' },\r\n        { columnID: 'sul1', value: '1' },\r\n        { columnID: 'sul2', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA5 + sul2',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA5', value: '1' },\r\n        { columnID: 'sul1', value: '0' },\r\n        { columnID: 'sul2', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA15 + sul1 + sul2',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA15', value: '1' },\r\n        { columnID: 'sul1', value: '1' },\r\n        { columnID: 'sul2', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA15 + sul1',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA15', value: '1' },\r\n        { columnID: 'sul1', value: '1' },\r\n        { columnID: 'sul2', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA15 + sul2',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA15', value: '1' },\r\n        { columnID: 'sul1', value: '0' },\r\n        { columnID: 'sul2', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA17 + sul1 + sul2',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA17', value: '1' },\r\n        { columnID: 'sul1', value: '1' },\r\n        { columnID: 'sul2', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA17 + sul1',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA17', value: '1' },\r\n        { columnID: 'sul1', value: '1' },\r\n        { columnID: 'sul2', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA17 + sul2',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA17', value: '1' },\r\n        { columnID: 'sul1', value: '0' },\r\n        { columnID: 'sul2', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA18 + sul1 + sul2',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA18', value: '1' },\r\n        { columnID: 'sul1', value: '1' },\r\n        { columnID: 'sul2', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA18 + sul1',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA18', value: '1' },\r\n        { columnID: 'sul1', value: '1' },\r\n        { columnID: 'sul2', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA18 + sul2',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'co_trim', value: '1' },\r\n        { columnID: 'dfrA18', value: '1' },\r\n        { columnID: 'sul1', value: '0' },\r\n        { columnID: 'sul2', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'None',\r\n      susceptible: true,\r\n      rules: [{ columnID: 'co_trim', value: '0' }]\r\n    }\r\n  ],\r\n  // ESBL: [\r\n  Ceftriaxone: [\r\n    {\r\n      name: 'blaCTX-M-15',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'ESBL_category', value: 'ESBL' },\r\n        { columnID: 'blaCTX-M-15_23', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'blaOXA-7',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'ESBL_category', value: 'ESBL' },\r\n        { columnID: 'blaOXA-7', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'blaSHV-12',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'ESBL_category', value: 'ESBL' },\r\n        { columnID: 'blaSHV-12', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'blaCTX-M-55',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'ESBL_category', value: 'ESBL' },\r\n        { columnID: 'blaCTX-M-55', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'None',\r\n      susceptible: true,\r\n      rules: [{ columnID: 'ESBL_category', value: 'Non-ESBL' }]\r\n    }\r\n  ],\r\n  // 'Fluoroquinolones (CipNS)': [\r\n  'Ciprofloxacin NS': [\r\n    {\r\n      name: '3_QRDR + qnrS (CipR)',\r\n      susceptible: false,\r\n      rules: [{ columnID: 'dcs_mechanisms', value: '3_QRDR + qnrS' }]\r\n    },\r\n    {\r\n      name: '3_QRDR + qnrB (CipR)',\r\n      susceptible: false,\r\n      rules: [{ columnID: 'dcs_mechanisms', value: '3_QRDR + qnrB' }]\r\n    },\r\n    {\r\n      name: '3_QRDR (CipR)',\r\n      susceptible: false,\r\n      rules: [{ columnID: 'dcs_mechanisms', value: '3_QRDR' }]\r\n    },\r\n    {\r\n      name: '2_QRDR + qnrS (CipR)',\r\n      susceptible: false,\r\n      rules: [{ columnID: 'dcs_mechanisms', value: '2_QRDR + qnrS' }]\r\n    },\r\n    {\r\n      name: '2_QRDR + qnrB (CipR)',\r\n      susceptible: false,\r\n      rules: [{ columnID: 'dcs_mechanisms', value: '2_QRDR + qnrB' }]\r\n    },\r\n    {\r\n      name: '2_QRDR (CipR)',\r\n      susceptible: false,\r\n      rules: [{ columnID: 'dcs_mechanisms', value: '2_QRDR' }]\r\n    },\r\n    {\r\n      name: '1_QRDR + qnrS (CipNS)',\r\n      susceptible: false,\r\n      rules: [{ columnID: 'dcs_mechanisms', value: '1_QRDR + qnrS' }]\r\n    },\r\n    {\r\n      name: '1_QRDR + qnrB (CipNS)',\r\n      susceptible: false,\r\n      rules: [{ columnID: 'dcs_mechanisms', value: '1_QRDR + qnrB' }]\r\n    },\r\n    {\r\n      name: '1_QRDR (CipNS)',\r\n      susceptible: false,\r\n      rules: [{ columnID: 'dcs_mechanisms', value: '1_QRDR' }]\r\n    },\r\n    {\r\n      name: '0_QRDR + qnrS (CipNS)',\r\n      susceptible: false,\r\n      rules: [{ columnID: 'dcs_mechanisms', value: '0_QRDR + qnrS' }]\r\n    },\r\n    {\r\n      name: '0_QRDR + qnrB (CipNS)',\r\n      susceptible: false,\r\n      rules: [{ columnID: 'dcs_mechanisms', value: '0_QRDR + qnrB' }]\r\n    },\r\n    {\r\n      name: 'None (CipS)',\r\n      susceptible: true,\r\n      rules: [{ columnID: 'dcs_mechanisms', value: '0_QRDR' }]\r\n    }\r\n  ],\r\n  Sulphonamides: [\r\n    {\r\n      name: 'sul1 + sul2',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'sul_any', value: '1' },\r\n        { columnID: 'sul1', value: '1' },\r\n        { columnID: 'sul2', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'sul1',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'sul_any', value: '1' },\r\n        { columnID: 'sul1', value: '1' },\r\n        { columnID: 'sul2', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'sul2',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'sul_any', value: '1' },\r\n        { columnID: 'sul2', value: '1' },\r\n        { columnID: 'sul1', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'None',\r\n      susceptible: true,\r\n      rules: [{ columnID: 'sul_any', value: '0' }]\r\n    }\r\n  ],\r\n  Tetracyclines: [\r\n    {\r\n      name: 'tetA(A)',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'tetracycline_category', value: 'TetR' },\r\n        { columnID: 'tetA(A)', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'tetA(B)',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'tetracycline_category', value: 'TetR' },\r\n        { columnID: 'tetA(B)', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'tetA(C)',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'tetracycline_category', value: 'TetR' },\r\n        { columnID: 'tetA(C)', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'tetA(D)',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'tetracycline_category', value: 'TetR' },\r\n        { columnID: 'tetA(D)', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'None',\r\n      susceptible: true,\r\n      rules: [{ columnID: 'tetracycline_category', value: 'TetS' }]\r\n    }\r\n  ],\r\n  Trimethoprim: [\r\n    {\r\n      name: 'dfrA7 + dfrA14',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'dfra_any', value: '1' },\r\n        { columnID: 'dfrA7', value: '1' },\r\n        { columnID: 'dfrA14', value: '1' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA7',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'dfra_any', value: '1' },\r\n        { columnID: 'dfrA7', value: '1' },\r\n        { columnID: 'dfrA14', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA14',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'dfra_any', value: '1' },\r\n        { columnID: 'dfrA14', value: '1' },\r\n        { columnID: 'dfrA7', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA1',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'dfra_any', value: '1' },\r\n        { columnID: 'dfrA1', value: '1' },\r\n        { columnID: 'dfrA14', value: '0' },\r\n        { columnID: 'dfrA7', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA5',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'dfra_any', value: '1' },\r\n        { columnID: 'dfrA5', value: '1' },\r\n        { columnID: 'dfrA14', value: '0' },\r\n        { columnID: 'dfrA7', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA15',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'dfra_any', value: '1' },\r\n        { columnID: 'dfrA15', value: '1' },\r\n        { columnID: 'dfrA14', value: '0' },\r\n        { columnID: 'dfrA7', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA17',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'dfra_any', value: '1' },\r\n        { columnID: 'dfrA17', value: '1' },\r\n        { columnID: 'dfrA14', value: '0' },\r\n        { columnID: 'dfrA7', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'dfrA18',\r\n      susceptible: false,\r\n      rules: [\r\n        { columnID: 'dfra_any', value: '1' },\r\n        { columnID: 'dfrA18', value: '1' },\r\n        { columnID: 'dfrA14', value: '0' },\r\n        { columnID: 'dfrA7', value: '0' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'None',\r\n      susceptible: true,\r\n      rules: [{ columnID: 'dfra_any', value: '0' }]\r\n    }\r\n  ]\r\n};\r\n","// This filter is called after either dataset, initialYear, finalYear or country changes and if reset button is pressed.\r\n// And it returns the data filtered by the variables said before, also the list of unique genotypes, count of genotypes\r\n\r\nimport { drugClassesRules, drugRules, drugRulesForDrugResistanceGraph } from '../../util/drugClassesRules';\r\n\r\n// and count of genomes.\r\nexport function filterData({ data, dataset, actualTimeInitial, actualTimeFinal, actualCountry }) {\r\n  const checkDataset = (item) => dataset === 'All' || item.TRAVEL === dataset.toLowerCase();\r\n  const checkTime = (item) => {\r\n    return item.DATE >= actualTimeInitial && item.DATE <= actualTimeFinal;\r\n  };\r\n\r\n  const newData = data.filter((x) => checkDataset(x) && checkTime(x));\r\n  const genotypes = [...new Set(newData.map((x) => x.GENOTYPE))];\r\n  genotypes.sort((a, b) => a.localeCompare(b));\r\n\r\n  let genomesCount = newData.length;\r\n  let genotypesCount = genotypes.length;\r\n  let listPMID = [];\r\n\r\n  if (actualCountry !== 'All') {\r\n    const countryData = newData.filter((x) => getCountryDisplayName(x.COUNTRY_ONLY) === actualCountry);\r\n    genomesCount = countryData.length;\r\n    listPMID = [...new Set(countryData.map((x) => x.PMID))];\r\n\r\n    const countryGenotypes = [...new Set(countryData.map((x) => x.GENOTYPE))];\r\n    genotypesCount = countryGenotypes.length;\r\n  }\r\n\r\n  return {\r\n    data: newData,\r\n    genotypes,\r\n    genomesCount,\r\n    genotypesCount,\r\n    listPMID\r\n  };\r\n}\r\n\r\n// Adjust the country names to its correct name\r\nexport function getCountryDisplayName(country) {\r\n  switch (country) {\r\n    case 'Democratic Republic of the Congo':\r\n      return 'Dem. Rep. Congo';\r\n    case 'Central African Republic':\r\n      return 'Central African Rep.';\r\n    case 'Ivory Coast':\r\n    case \"Cote d'Ivoire\":\r\n      return \"Côte d'Ivoire\";\r\n    case 'East Timor':\r\n      return 'Timor-Leste';\r\n    case 'State of Palestine':\r\n      return 'Palestine';\r\n    case 'Dominican Republic':\r\n      return 'Dominican Rep.';\r\n    case 'Viet Nam':\r\n      return 'Vietnam';\r\n    case 'USA':\r\n      return 'United States of America';\r\n    case 'Cape Verde':\r\n      return 'Cabo Verde';\r\n    case 'Turks and Caicos Islands':\r\n      return 'Turks and Caicos Is.';\r\n    case 'United Kingdom (England/Wales/N. Ireland)':\r\n    case 'United Kingdom (Scotland)':\r\n    case 'UK':\r\n      return 'United Kingdom';\r\n    case 'The Gambia':\r\n      return 'Gambia';\r\n    default:\r\n      return country;\r\n  }\r\n}\r\n\r\n// Get specific drug count, percentage and al its types for the map component\r\nfunction getMapStatsData({ countryData, columnKey, statsKey }) {\r\n  const data = {\r\n    items: [],\r\n    percentage: 0,\r\n    count: 0\r\n  };\r\n\r\n  const columnData = [...new Set(countryData.map((x) => x[columnKey]))];\r\n  data.items = columnData.map((name) => {\r\n    const count = countryData.filter((x) => x[columnKey] === name).length;\r\n    const percentage = Number(((count / countryData.length) * 100).toFixed(2));\r\n\r\n    if (name === statsKey) {\r\n      data.count = count;\r\n      data.percentage = percentage;\r\n    }\r\n    return { name, count, percentage };\r\n  });\r\n\r\n  if (statsKey === '-') {\r\n    data.count = countryData.length - data.count;\r\n    data.percentage = Number(((data.count / countryData.length) * 100).toFixed(2));\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\n// Get country data for map component, the data includes the name, count and drug stats\r\nexport function getMapData({ data, countries }) {\r\n  const mapData = countries.map((country) => {\r\n    const stats = {\r\n      GENOTYPE: {\r\n        items: [],\r\n        count: 0\r\n      }\r\n    };\r\n\r\n    const countryData = data.filter((x) => getCountryDisplayName(x.COUNTRY_ONLY) === country);\r\n\r\n    if (countryData.length === 0) {\r\n      return {};\r\n    }\r\n\r\n    const genotypes = [...new Set(countryData.map((x) => x.GENOTYPE))];\r\n    stats.GENOTYPE.count = genotypes.length;\r\n    stats.GENOTYPE.items = genotypes.map((genotype) => {\r\n      return {\r\n        name: genotype,\r\n        count: countryData.filter((x) => x.GENOTYPE === genotype).length\r\n      };\r\n    });\r\n    stats.GENOTYPE.items.sort((a, b) => (a.count <= b.count ? 1 : -1));\r\n\r\n    stats.H58 = getMapStatsData({ countryData, columnKey: 'GENOTYPE_SIMPLE', statsKey: 'H58' });\r\n    stats.MDR = getMapStatsData({ countryData, columnKey: 'MDR', statsKey: 'MDR' });\r\n    stats.XDR = getMapStatsData({ countryData, columnKey: 'XDR', statsKey: 'XDR' });\r\n    stats.AzithR = getMapStatsData({ countryData, columnKey: 'azith_pred_pheno', statsKey: 'AzithR' });\r\n    stats.Susceptible = getMapStatsData({ countryData, columnKey: 'amr_category', statsKey: 'No AMR detected' });\r\n    stats.CipR = getMapStatsData({ countryData, columnKey: 'cip_pred_pheno', statsKey: 'CipR' });\r\n    stats.CipNS = getMapStatsData({ countryData, columnKey: 'cip_pred_pheno', statsKey: 'CipNS' });\r\n\r\n    return {\r\n      name: country,\r\n      count: countryData.length,\r\n      stats\r\n    };\r\n  });\r\n\r\n  return mapData;\r\n}\r\n\r\n// Get data for distribution and drug resistance graphs\r\nexport function getYearsData({ data, years, actualCountry }) {\r\n  const drugsData = [];\r\n\r\n  const genotypesData = years.map((year) => {\r\n    const yearData = data.filter(\r\n      (x) => x.DATE === year && (actualCountry === 'All' || getCountryDisplayName(x.COUNTRY_ONLY) === actualCountry)\r\n    );\r\n    const response = {\r\n      name: year.toString(),\r\n      count: yearData.length\r\n    };\r\n    let stats = {};\r\n\r\n    if (yearData.length > 0) {\r\n      const genotypes = [...new Set(yearData.map((x) => x.GENOTYPE))];\r\n\r\n      stats = genotypes.reduce((accumulator, currentValue) => {\r\n        const count = yearData.filter((x) => x.GENOTYPE === currentValue).length;\r\n        accumulator[currentValue] = count;\r\n\r\n        return accumulator;\r\n      }, {});\r\n\r\n      if (yearData.length >= 10) {\r\n        const drugStats = {};\r\n\r\n        drugRules.forEach((rule) => {\r\n          const drugData = yearData.filter((x) => rule.values.includes(x[rule.columnID]));\r\n          drugStats[rule.key] = drugData.length;\r\n\r\n          if (rule.key === 'Ciprofloxacin NS') {\r\n            drugStats['Ciprofloxacin R'] = yearData.filter((x) => x[rule.columnID] === 'CipR').length;\r\n          }\r\n        });\r\n\r\n        drugRulesForDrugResistanceGraph.forEach((rule) => {\r\n          const drugData = yearData.filter((x) => rule.values.includes(x[rule.columnID]));\r\n          drugStats[rule.key] = drugData.length;\r\n        });\r\n\r\n        drugsData.push({ ...response, ...drugStats });\r\n      }\r\n    }\r\n\r\n    return {\r\n      ...response,\r\n      ...stats\r\n    };\r\n  });\r\n\r\n  return { genotypesData: genotypesData.filter((x) => x.count > 0), drugsData };\r\n}\r\n\r\n// Get data for frequencies and determinants graphs\r\nexport function getGenotypesData({ data, genotypes, actualCountry }) {\r\n  const genotypesDrugClassesData = {};\r\n\r\n  drugRules.forEach((drug) => {\r\n    if (drug.key !== 'Susceptible') {\r\n      genotypesDrugClassesData[drug.key] = [];\r\n    }\r\n  });\r\n\r\n  const genotypesDrugsData = genotypes.map((genotype) => {\r\n    const genotypeData = data.filter(\r\n      (x) =>\r\n        x.GENOTYPE === genotype && (actualCountry === 'All' || getCountryDisplayName(x.COUNTRY_ONLY) === actualCountry)\r\n    );\r\n\r\n    const response = {\r\n      name: genotype,\r\n      totalCount: genotypeData.length,\r\n      resistantCount: 0\r\n    };\r\n\r\n    const drugClassResponse = {\r\n      name: genotype,\r\n      totalCount: genotypeData.length,\r\n      resistantCount: 0\r\n    };\r\n\r\n    drugRules.forEach((rule) => {\r\n      const drugData = genotypeData.filter((x) => rule.values.includes(x[rule.columnID]));\r\n      response[rule.key] = drugData.length;\r\n\r\n      if (rule.key === 'Ciprofloxacin NS') {\r\n        response['Ciprofloxacin R'] = genotypeData.filter((x) => x[rule.columnID] === 'CipR').length;\r\n      }\r\n\r\n      if (rule.key !== 'Susceptible') {\r\n        const drugClass = { ...drugClassResponse };\r\n\r\n        drugClassesRules[rule.key].forEach((classRule) => {\r\n          const classRuleName = classRule.name;\r\n\r\n          drugClass[classRuleName] = genotypeData.filter((x) => {\r\n            return classRule.rules.every((r) => x[r.columnID] === r.value);\r\n          }).length;\r\n\r\n          if (classRule.susceptible) {\r\n            drugClass.resistantCount = drugClass.totalCount - drugClass[classRuleName];\r\n          }\r\n        });\r\n\r\n        genotypesDrugClassesData[rule.key].push(drugClass);\r\n      }\r\n    });\r\n\r\n    response.resistantCount = response.totalCount - response['Susceptible'];\r\n    return response;\r\n  });\r\n\r\n  genotypesDrugsData.sort((a, b) => b.resistantCount - a.resistantCount);\r\n  Object.keys(genotypesDrugClassesData).forEach((key) => {\r\n    genotypesDrugClassesData[key].sort((a, b) => b.resistantCount - a.resistantCount);\r\n    genotypesDrugClassesData[key] = genotypesDrugClassesData[key].slice(0, 10);\r\n  });\r\n\r\n  return { genotypesDrugsData, genotypesDrugClassesData };\r\n}\r\n","import { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  resetButton: {\r\n    position: 'fixed',\r\n    right: 16,\r\n    bottom: 0,\r\n    padding: '16px',\r\n\r\n    '@media (max-width: 500px)': {\r\n      right: 8,\r\n      padding: '8px'\r\n    }\r\n  }\r\n}));\r\n\r\nexport { useStyles };\r\n","import { RestartAlt } from '@mui/icons-material';\r\nimport { useStyles } from './ResetButtonMUI';\r\nimport { Fab, Tooltip, useMediaQuery } from '@mui/material';\r\nimport { useAppDispatch, useAppSelector } from '../../../stores/hooks';\r\nimport { setActualTimeFinal, setActualTimeInitial, setCanGetData } from '../../../stores/slices/dashboardSlice';\r\nimport { setDataset, setMapView, setPosition, setIfCustom} from '../../../stores/slices/mapSlice';\r\nimport { setActualCountry } from '../../../stores/slices/dashboardSlice';\r\nimport {\r\n  setDeterminantsGraphDrugClass,\r\n  setDeterminantsGraphView,\r\n  setDistributionGraphView,\r\n  setDrugResistanceGraphView,\r\n  setFrequenciesGraphView,\r\n  setCustomDropdownMapView\r\n} from '../../../stores/slices/graphSlice';\r\nimport { defaultDrugsForDrugResistanceGraph } from '../../../util/drugs';\r\nimport {\r\n  getGenotypesData\r\n} from '../../Dashboard/filters';\r\n\r\nexport const ResetButton = (props) => {\r\n  const classes = useStyles();\r\n  const matches500 = useMediaQuery('(max-width: 500px)');\r\n\r\n  const dispatch = useAppDispatch();\r\n  const timeInitial = useAppSelector((state) => state.dashboard.timeInitial);\r\n  const timeFinal = useAppSelector((state) => state.dashboard.timeFinal);\r\n  const genotypes = useAppSelector((state) => state.dashboard.genotypesForFilter);\r\n  const actualCountry = useAppSelector((state) => state.dashboard.actualCountry);\r\n\r\n  function handleClick() {\r\n    dispatch(setCanGetData(false));\r\n  \r\n    dispatch(setDataset('All'));\r\n    dispatch(setActualTimeInitial(timeInitial));\r\n    dispatch(setActualTimeFinal(timeFinal));\r\n    dispatch(setPosition({ coordinates: [0, 0], zoom: 1 }));\r\n    dispatch(setActualCountry('All'));\r\n\r\n    dispatch(setMapView('CipNS'));\r\n    dispatch(setDrugResistanceGraphView(defaultDrugsForDrugResistanceGraph));\r\n    dispatch(setDeterminantsGraphDrugClass('Ciprofloxacin NS'));\r\n\r\n    dispatch(setFrequenciesGraphView('percentage'));\r\n    dispatch(setDeterminantsGraphView('percentage'));\r\n    dispatch(setDistributionGraphView('number'));\r\n    dispatch(setCanGetData(true));\r\n    dispatch(setIfCustom(false));\r\n    const genotypesData = getGenotypesData({ data: props.data, genotypes, actualCountry });\r\n    dispatch(setCustomDropdownMapView(genotypesData.genotypesDrugsData.slice(0, 1).map((x) => x.name)));\r\n  }\r\n\r\n  return (\r\n    <div className={classes.resetButton}>\r\n      <Tooltip title=\"Reset Configurations\" placement=\"left\">\r\n        <span>\r\n          <Fab color=\"primary\" size={matches500 ? 'medium' : 'large'} onClick={handleClick}>\r\n            <RestartAlt sx={{ color: '#fff' }} />\r\n          </Fab>\r\n        </span>\r\n      </Tooltip>\r\n    </div>\r\n  );\r\n};\r\n","import { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  card: {\r\n    '&.MuiCard-root': {\r\n      borderRadius: '16px'\r\n    }\r\n  },\r\n  cardContent: {\r\n    padding: '24px !important',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n\r\n    '@media (max-width: 500px)': {\r\n      padding: '16px !important'\r\n    }\r\n  },\r\n  paragraph: {\r\n    textAlign: 'justify',\r\n    margin: '16px 0px'\r\n  }\r\n}));\r\n\r\nexport { useStyles };\r\n","import { Card, CardContent, Typography } from '@mui/material';\r\nimport { useStyles } from './AboutMUI';\r\nimport euFlagImg from '../../assets/img/eu_flag.jpg';\r\n\r\nexport const About = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Card className={classes.card} elevation={2}>\r\n      <CardContent className={classes.cardContent}>\r\n        <Typography variant=\"h5\" fontWeight={700}>\r\n          About TyphiNET\r\n        </Typography>\r\n\r\n        <div className={classes.paragraph}>\r\n          The TyphiNET dashboard collates antimicrobial resistance (AMR) and genotype (lineage) information extracted\r\n          from whole genome sequence (WGS) data from the bacterial pathogen <i> Salmonella</i> Typhi, the agent of\r\n          typhoid fever.\r\n        </div>\r\n\r\n        <div className={classes.paragraph}>\r\n          AMR determinants identified in the genome assemblies using Pathogenwatch are used to define drug resistance\r\n          variables as follows.Multidrug resistance(MDR): resistance determinants for chloramphenicol (<i>catA1</i> or{' '}\r\n          <i>cmlA</i>), ampicillin (<i>bla</i>TEM-1D, <i>bla</i>OXA-7), and co-trimoxazole (at least one <i>dfrA</i>{' '}\r\n          gene and at least one <i>sul</i> gene). Ciprofloxacin non-susceptible (CipI/R): one or more of the quinolone\r\n          resistance determining region(QRDR) mutations at <i>gyrA</i>-83, <i>gyrA</i>\r\n          -87, <i>parC</i>-80, <i>parC</i>-84, <i>gyrB</i>-464 or presence of a plasmid - mediated quinolone\r\n          resistance(PMQR) gene(<i>qnrB</i>, <i>qnrD</i> , <i>qnrS</i>). Ciprofloxacin resistant (CipR): QRDR triple\r\n          mutant (<i>gyrA</i>-83 and <i>gyrA</i>-87, together with either <i>parC</i>-80 or <i>parC</i>-84), or plasmid\r\n          - mediated quinolone resistance(PMQR) together with <i>gyrA</i>-83, <i>gyrA</i>\r\n          -87 and/or <i>gyrB</i>-464. Third - generation cephalosporin resistance (3 GCR): presence of an extended -\r\n          spectrum beta-lactamase(ESBL) (<i>bla</i>CTX-M-12, <i>bla</i>CTX-M-15, <i>bla</i>CTX-M-23, <i>bla</i>CTX-M-55,{' '}\r\n          <i>bla</i>SHV-12) or <i>ampC</i> gene.Extreme drug resistance(XDR): MDR plus CipR plus 3 GCR. Azithromycin\r\n          resistance(AziR): mutation at <i>acrB</i>-717 and/or gene <i>ereA</i>. See{' '}\r\n          <a href=\"https://www.nature.com/articles/s41467-021-23091-2\" target=\"_blank\" rel=\"noreferrer\">\r\n            Argimon et al, 2021\r\n          </a>{' '}\r\n          for details.\r\n        </div>\r\n\r\n        <div className={classes.paragraph}>\r\n          <b>Data:</b> Data are sourced regularly from Typhi{' '}\r\n          <a href=\"https://pathogen.watch/\" target=\"_blank\" rel=\"noreferrer\">\r\n            Pathogenwatch\r\n          </a>\r\n          , and filtered to include only genomes from unbiased sampling frames (e.g. routine or project - based enteric\r\n          fever surveillance, as opposed to AMR - focused sampling), based on curation by the{' '}\r\n          <a href=\"https://www.typhoidgenomics.org/\" target=\"_blank\" rel=\"noreferrer\">\r\n            Global Typhoid Genomics Consortium\r\n          </a>\r\n          . The database can be downloaded using the button below.\r\n          <p>\r\n            <b>Documentation:</b> Full documentation for the dashboard is available{' '}\r\n            <a href=\"https://github.com/zadyson/TyphiNET/wiki\" target=\"_blank\" rel=\"noreferrer\">\r\n              here\r\n            </a>\r\n            .\r\n          </p>\r\n          Information on genotype definitions can be found in{' '}\r\n          <a\r\n            href=\"https://academic.oup.com/jid/article/224/Supplement_7/S775/6358992?login=true\"\r\n            target=\"_blank\"\r\n            rel=\"noreferrer\"\r\n          >\r\n            Dyson & Holt, 2021\r\n          </a>\r\n          .\r\n        </div>\r\n\r\n        <div className={classes.paragraph}>\r\n          <b>Team:</b> The TyphiNET dashboard is coordinated by{' '}\r\n          <a href=\"https://scholar.google.com.au/citations?hl=en&user=klhFnE0AAAAJ\" target=\"_blank\" rel=\"noreferrer\">\r\n            Dr Zoe Dyson\r\n          </a>\r\n          ,{' '}\r\n          <a href=\"https://scholar.google.com.au/citations?hl=en&user=O2dcz5MAAAAJ\" target=\"_blank\" rel=\"noreferrer\">\r\n            Dr Louise Cerdeira\r\n          </a>\r\n          &amp;{' '}\r\n          <a href=\"https://holtlab.net/\" target=\"_blank\" rel=\"noreferrer\">\r\n            Prof Kat Holt\r\n          </a>\r\n          , with support from the Wellcome Trust (Open Research Fund, 219692/Z/19/Z), the European Union's Horizon 2020\r\n          research and innovation programme under the Marie Sklodowska-Curie grant agreement No 845681.\r\n          <img className=\"euFlagImage\" src={euFlagImg} alt=\"EU_FLAG\" height=\"20\" />, the{' '}\r\n          <a href=\"https://www.lshtm.ac.uk/\" target=\"_blank\" rel=\"noreferrer\">\r\n            London School of Hygiene and Tropical Medicine\r\n          </a>{' '}\r\n          &amp;{' '}\r\n          <a href=\"https://www.monash.edu/\" target=\"_blank\" rel=\"noreferrer\">\r\n            Monash University\r\n          </a>\r\n          .\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport { MainLayout } from '../Layout';\r\nimport { Map } from '../Elements/Map';\r\nimport { Footer } from '../Elements/Footer';\r\nimport { API_ENDPOINT } from '../../constants';\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useAppDispatch, useAppSelector } from '../../stores/hooks';\r\nimport {\r\n  setActualGenomes,\r\n  setActualGenotypes,\r\n  setGenotypesForFilter,\r\n  setListPMID,\r\n  setLoadingData,\r\n  setTotalGenomes,\r\n  setTotalGenotypes,\r\n  setYears\r\n} from '../../stores/slices/dashboardSlice.ts';\r\nimport { setMapData, setIfCustom } from '../../stores/slices/mapSlice.ts';\r\nimport { Graphs } from '../Elements/Graphs';\r\nimport {\r\n  setCountriesForFilter,\r\n  setDrugsYearData,\r\n  setFrequenciesGraphSelectedGenotypes,\r\n  setGenotypesDrugClassesData,\r\n  setGenotypesDrugsData,\r\n  setGenotypesYearData,\r\n  setCustomDropdownMapView,\r\n} from '../../stores/slices/graphSlice.ts';\r\nimport { filterData, getYearsData, getMapData, getGenotypesData, getCountryDisplayName } from './filters';\r\nimport { ResetButton } from '../Elements/ResetButton/ResetButton';\r\nimport { About } from '../About';\r\n\r\nexport const DashboardPage = () => {\r\n  const [data, setData] = useState([]);\r\n\r\n  const dispatch = useAppDispatch();\r\n  const canGetData = useAppSelector((state) => state.dashboard.canGetData);\r\n  const dataset = useAppSelector((state) => state.map.dataset);\r\n  const actualTimeInitial = useAppSelector((state) => state.dashboard.actualTimeInitial);\r\n  const actualTimeFinal = useAppSelector((state) => state.dashboard.actualTimeFinal);\r\n  const actualCountry = useAppSelector((state) => state.dashboard.actualCountry);\r\n  const countriesForFilter = useAppSelector((state) => state.graph.countriesForFilter);\r\n  const yearsForFilter = useAppSelector((state) => state.dashboard.years);\r\n  const genotypesForFilter = useAppSelector((state) => state.dashboard.genotypesForFilter);\r\n\r\n  // This function is only called once, after the csv is read. It gets all the static and dynamic data\r\n  // that came from the csv file and sets all the data the organism needs to show\r\n  function getInfoFromData(response) {\r\n    const responseData = response.data;\r\n    dispatch(setTotalGenomes(responseData.length));\r\n    dispatch(setActualGenomes(responseData.length));\r\n\r\n    const genotypes = [...new Set(responseData.map((x) => x.GENOTYPE))];\r\n    genotypes.sort((a, b) => a.localeCompare(b));\r\n    dispatch(setGenotypesForFilter(genotypes));\r\n\r\n    const years = [...new Set(responseData.map((x) => x.DATE))];\r\n    const countries = [...new Set(responseData.map((x) => getCountryDisplayName(x.COUNTRY_ONLY)))];\r\n\r\n    years.sort();\r\n    countries.sort();\r\n\r\n    dispatch(setTotalGenotypes(genotypes.length));\r\n    dispatch(setActualGenotypes(genotypes.length));\r\n    dispatch(setYears(years));\r\n    // dispatch(setTimeInitial(years[0]));\r\n    // dispatch(setActualTimeInitial(years[0]));\r\n    // dispatch(setTimeFinal(years[years.length - 1]));\r\n    // dispatch(setActualTimeFinal(years[years.length - 1]));\r\n    dispatch(setCountriesForFilter(countries));\r\n\r\n    dispatch(setMapData(getMapData({ data: responseData, countries })));\r\n\r\n    const genotypesData = getGenotypesData({ data: responseData, genotypes, actualCountry });\r\n    dispatch(setGenotypesDrugsData(genotypesData.genotypesDrugsData));\r\n    dispatch(setFrequenciesGraphSelectedGenotypes(genotypesData.genotypesDrugsData.slice(0, 5).map((x) => x.name)));\r\n    dispatch(setCustomDropdownMapView(genotypesData.genotypesDrugsData.slice(0, 1).map((x) => x.name)));\r\n    dispatch(setGenotypesDrugClassesData(genotypesData.genotypesDrugClassesData));\r\n\r\n    const yearsData = getYearsData({\r\n      data: responseData,\r\n      years,\r\n      actualCountry\r\n    });\r\n\r\n    dispatch(setGenotypesYearData(yearsData.genotypesData));\r\n    dispatch(setDrugsYearData(yearsData.drugsData));\r\n\r\n    return responseData;\r\n  }\r\n\r\n  // This function reads the csv file\r\n  async function getData() {\r\n    dispatch(setLoadingData(true));\r\n\r\n    await axios\r\n      .get(`${API_ENDPOINT}filters/getDataFromCSV`)\r\n      .then((response) => {\r\n        const newData = getInfoFromData(response);\r\n        setData(newData);\r\n      })\r\n      .finally(() => {\r\n        dispatch(setLoadingData(false));\r\n      });\r\n  }\r\n\r\n  // This useEffect is called once when the website starts to get info for the dashboard\r\n  useEffect(() => {\r\n    getData();\r\n    dispatch(setIfCustom(false));\r\n  }, []);\r\n\r\n  // This useEffect is called everytime the main filters are changed, it does not need to read the csv file again.\r\n  // It filters accordingly to the filters give. Is also called when the reset button is pressed.\r\n  useEffect(() => {\r\n    if (data.length > 0 && canGetData) {\r\n      const filters = filterData({ data, dataset, actualTimeInitial, actualTimeFinal, actualCountry });\r\n      dispatch(setActualGenomes(filters.genomesCount));\r\n      dispatch(setActualGenotypes(filters.genotypesCount));\r\n      dispatch(setListPMID(filters.listPMID));\r\n\r\n      dispatch(setMapData(getMapData({ data: filters.data, countries: countriesForFilter })));\r\n\r\n      const genotypesData = getGenotypesData({\r\n        data: filters.data,\r\n        genotypes: genotypesForFilter,\r\n        actualCountry\r\n      });\r\n      dispatch(setGenotypesDrugsData(genotypesData.genotypesDrugsData));\r\n      dispatch(setFrequenciesGraphSelectedGenotypes(genotypesData.genotypesDrugsData.slice(0, 5).map((x) => x.name)));\r\n      dispatch(setGenotypesDrugClassesData(genotypesData.genotypesDrugClassesData));\r\n\r\n      const yearsData = getYearsData({\r\n        data: filters.data,\r\n        years: yearsForFilter,\r\n        actualCountry\r\n      });\r\n      dispatch(setGenotypesYearData(yearsData.genotypesData));\r\n      dispatch(setDrugsYearData(yearsData.drugsData));\r\n    }\r\n  }, [canGetData, dataset, actualTimeInitial, actualTimeFinal, actualCountry]);\r\n\r\n  return (\r\n    <MainLayout>\r\n      <Map />\r\n      <Graphs />\r\n      <About />\r\n      <Footer />\r\n      <ResetButton data={data} />\r\n    </MainLayout>\r\n  );\r\n};\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport deashboardReducer from './slices/dashboardSlice';\r\nimport mapReducer from './slices/mapSlice';\r\nimport graphReducer from './slices/graphSlice';\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    dashboard: deashboardReducer,\r\n    map: mapReducer,\r\n    graph: graphReducer\r\n  },\r\n  middleware: (getDefaultMiddleware) => {\r\n    return getDefaultMiddleware({\r\n      serializableCheck: false\r\n    });\r\n  }\r\n});\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;\r\n","import './App.css';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport registerServiceWorker from './registerServiceWorker';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { createTheme, ThemeProvider } from '@mui/material';\r\nimport { Provider } from 'react-redux';\r\nimport { DashboardPage } from './components/Dashboard';\r\nimport { HashRouter, Route, Routes } from 'react-router-dom';\r\nimport { store } from './stores/store.ts';\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#1fbbd3'\r\n    }\r\n  },\r\n  typography: {\r\n    fontFamily: [\r\n      'Montserrat',\r\n      '-apple-system',\r\n      'BlinkMacSystemFont',\r\n      '\"Segoe UI\"',\r\n      '\"Roboto\"',\r\n      '\"Oxygen\"',\r\n      '\"Ubuntu\"',\r\n      '\"Cantarell\"',\r\n      '\"Fira Sans\"',\r\n      '\"Droid Sans\"',\r\n      '\"Helvetica Neue\"',\r\n      'sans-serif'\r\n    ].join(',')\r\n  }\r\n});\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <HashRouter>\r\n      <Provider store={store}>\r\n        <ThemeProvider theme={theme}>\r\n          <div className=\"App\">\r\n            <Routes>\r\n              <Route path=\"/\" element={<DashboardPage />} />\r\n            </Routes>\r\n          </div>\r\n        </ThemeProvider>\r\n      </Provider>\r\n    </HashRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\nregisterServiceWorker();\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}